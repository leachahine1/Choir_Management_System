{
    "sourceFile": "ISFM/controllers/users.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1714840597073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1714840624061,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -571,190 +571,190 @@\n        \r\n     }\r\n \r\n     //This function is using for add new section_trainers\r\n-    function addSection_trainers() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            // Fetch Choir ID and Section\r\n-        $Choir_id = $this->db->escape_like_str($this->input->post('Choir', TRUE));\r\n-         $Choir_title = $this->common->Choir_title($Choir_id);\r\n+                            function addSection_trainers() {\r\n+                                if ($this->input->post('submit', TRUE)) {\r\n+                                    // Fetch Choir ID and Section\r\n+                                $Choir_id = $this->db->escape_like_str($this->input->post('Choir', TRUE));\r\n+                                $Choir_title = $this->common->Choir_title($Choir_id);\r\n \r\n-$section = $this->db->escape_like_str($this->input->post('section', TRUE));\r\n+                        $section = $this->db->escape_like_str($this->input->post('section', TRUE));\r\n \r\n-// Include these in your data array for database insertion\r\n-$additional_data['Choir_id'] = $Choir_id;\r\n-$additional_data['section'] = $section;\r\n+                        // Include these in your data array for database insertion\r\n+                        $additional_data['Choir_id'] = $Choir_id;\r\n+                        $additional_data['section'] = $section;\r\n \r\n-$section_leadersInfo['Choir_id'] = $Choir_id;\r\n-$section_leadersInfo['section'] = $section;\r\n-$section_leadersInfo['Choir_title'] = $Choir_title;\r\n+                        $section_leadersInfo['Choir_id'] = $Choir_id;\r\n+                        $section_leadersInfo['section'] = $section;\r\n+                        $section_leadersInfo['Choir_title'] = $Choir_title;\r\n \r\n-$username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n-$email = strtolower($this->input->post('email', TRUE));\r\n-$password = $this->input->post('password', TRUE);\r\n-//Here is uploading the Choir_member's photo.\r\n-$config['upload_path'] = './assets/uploads/';\r\n-$config['allowed_types'] = 'gif|jpg|png';\r\n-$config['max_size'] = '10000';\r\n-$config['max_width'] = '10240';\r\n-$config['max_height'] = '7680';\r\n-$config['encrypt_name'] = TRUE;\r\n-$this->load->library('upload', $config);\r\n-$this->upload->do_upload();\r\n-$uploadFileInfo = $this->upload->data();\r\n-$this->upload->display_errors('<p>', '</p>');\r\n+                        $username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n+                        $email = strtolower($this->input->post('email', TRUE));\r\n+                        $password = $this->input->post('password', TRUE);\r\n+                        //Here is uploading the Choir_member's photo.\r\n+                        $config['upload_path'] = './assets/uploads/';\r\n+                        $config['allowed_types'] = 'gif|jpg|png';\r\n+                        $config['max_size'] = '10000';\r\n+                        $config['max_width'] = '10240';\r\n+                        $config['max_height'] = '7680';\r\n+                        $config['encrypt_name'] = TRUE;\r\n+                        $this->load->library('upload', $config);\r\n+                        $this->upload->do_upload();\r\n+                        $uploadFileInfo = $this->upload->data();\r\n+                        $this->upload->display_errors('<p>', '</p>');\r\n \r\n-$phone = $this->input->post('phoneCode', TRUE) . '' . $this->input->post('phone', TRUE);\r\n-$additional_data = array(\r\n-'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n-'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n-'phone' => $this->db->escape_like_str($phone),\r\n-'profile_image' => $this->db->escape_like_str($uploadFileInfo['file_name'])\r\n-);\r\n-$group_ids = array(\r\n-'group_id' => $this->db->escape_like_str(5)\r\n-);\r\n-if ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n-//This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n-$userid = $this->common->usersId();\r\n-$additionalData1 = array(\r\n-    'user_id' => $this->db->escape_like_str($userid),\r\n-    'Choir_member_id' => $this->db->escape_like_str($this->input->post('Choir_memberId', TRUE)),\r\n-    'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n-    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-    'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n-    'section_trainers_name' => $this->db->escape_like_str($username),\r\n-    'level' => $this->db->escape_like_str($this->input->post('guardianLevel', TRUE)),\r\n-    'email' => $this->db->escape_like_str($this->input->post('email', TRUE)),\r\n-    'phone' => $this->db->escape_like_str($phone)\r\n-);\r\n-$this->db->insert('section_trainers_info', $additionalData1);\r\n-$section_trainers_access = array(\r\n-    'user_id' => $this->db->escape_like_str($userid),\r\n-    'group_id' => $this->db->escape_like_str(5),\r\n-    'das_top_info' => $this->db->escape_like_str(0),\r\n-    'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n-    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-    'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n-    'das_grab_chart' => $this->db->escape_like_str(0),\r\n-    'das_Choir_info' => $this->db->escape_like_str(0),\r\n-    'das_message' => $this->db->escape_like_str(1),\r\n-    'das_employ_attend' => $this->db->escape_like_str(0),\r\n-    'das_notice' => $this->db->escape_like_str(1),\r\n-    'das_calender' => $this->db->escape_like_str(1),\r\n-    'admission' => $this->db->escape_like_str(0),\r\n-    'all_Choir_member_info' => $this->db->escape_like_str(0),\r\n-    'stud_edit_delete' => $this->db->escape_like_str(0),\r\n-    'stu_own_info' => $this->db->escape_like_str(1),\r\n-    'section_leader_info' => $this->db->escape_like_str(1),\r\n-    'add_section_leader' => $this->db->escape_like_str(0),\r\n-    'section_leader_details' => $this->db->escape_like_str(0),\r\n-    'section_leader_edit_delete' => $this->db->escape_like_str(0),\r\n-    'all_section_trainers_info' => $this->db->escape_like_str(0),\r\n-    'own_section_trainers_info' => $this->db->escape_like_str(1),\r\n-    'make_section_trainers_id' => $this->db->escape_like_str(0),\r\n-    'section_trainers_edit_dlete' => $this->db->escape_like_str(0),\r\n-    'add_new_Choir' => $this->db->escape_like_str(0),\r\n-    'all_Choir_info' => $this->db->escape_like_str(0),\r\n-    'Choir_details' => $this->db->escape_like_str(0),\r\n-    'Choir_delete' => $this->db->escape_like_str(0),\r\n-    'Choir_promotion' => $this->db->escape_like_str(0),\r\n-    'assin_optio_sub' => $this->db->escape_like_str(0),\r\n-    'add_Choir_routine' => $this->db->escape_like_str(0),\r\n-    'own_Choir_routine' => $this->db->escape_like_str(1),\r\n-    'all_Choir_routine' => $this->db->escape_like_str(0),\r\n-    'rutin_edit_delete' => $this->db->escape_like_str(0),\r\n-    'attendance_preview' => $this->db->escape_like_str(0),\r\n-    'take_studence_atten' => $this->db->escape_like_str(0),\r\n-    'edit_Choir_member_atten' => $this->db->escape_like_str(0),\r\n-    'add_employee' => $this->db->escape_like_str(0),\r\n-    'employee_list' => $this->db->escape_like_str(0),\r\n-    'employ_attendance' => $this->db->escape_like_str(0),\r\n-    'empl_atte_view' => $this->db->escape_like_str(0),\r\n-    'add_song' => $this->db->escape_like_str(0),\r\n-    'all_song' => $this->db->escape_like_str(0),\r\n-    'make_suggestion' => $this->db->escape_like_str(0),\r\n-    'all_suggestion' => $this->db->escape_like_str(0),\r\n-    'own_suggestion' => $this->db->escape_like_str(1),\r\n-    'add_rehearsal_gread' => $this->db->escape_like_str(0),\r\n-    'rehearsal_gread' => $this->db->escape_like_str(0),\r\n-    'add_rehearsal_routin' => $this->db->escape_like_str(0),\r\n-    'all_rehearsal_routine' => $this->db->escape_like_str(0),\r\n-    'own_rehearsal_routine' => $this->db->escape_like_str(1),\r\n-    'rehearsal_attend_preview' => $this->db->escape_like_str(0),\r\n-    'approve_result' => $this->db->escape_like_str(0),\r\n-    'view_result' => $this->db->escape_like_str(1),\r\n-    'all_mark_sheet' => $this->db->escape_like_str(0),\r\n-    'own_mark_sheet' => $this->db->escape_like_str(1),\r\n-    'take_rehearsal_attend' => $this->db->escape_like_str(0),\r\n-    'change_rehearsal_attendance' => $this->db->escape_like_str(0),\r\n-    'make_result' => $this->db->escape_like_str(0),\r\n-    'add_category' => $this->db->escape_like_str(0),\r\n-    'all_category' => $this->db->escape_like_str(1),\r\n-    'edit_delete_category' => $this->db->escape_like_str(0),\r\n-    'add_resources' => $this->db->escape_like_str(0),\r\n-    'all_resources' => $this->db->escape_like_str(1),\r\n-    'edit_delete_resources' => $this->db->escape_like_str(0),\r\n-    'add_library_mem' => $this->db->escape_like_str(0),\r\n-    'memb_list' => $this->db->escape_like_str(0),\r\n-    'issu_return' => $this->db->escape_like_str(0),\r\n-    'add_concerts' => $this->db->escape_like_str(0),\r\n-    'add_set_dormi' => $this->db->escape_like_str(0),\r\n-    'set_member_seat' => $this->db->escape_like_str(0),\r\n-    'dormi_report' => $this->db->escape_like_str(1),\r\n-    'add_transport' => $this->db->escape_like_str(0),\r\n-    'all_transport' => $this->db->escape_like_str(1),\r\n-    'transport_edit_dele' => $this->db->escape_like_str(0),\r\n-    'add_account_title' => $this->db->escape_like_str(0),\r\n-    'edit_dele_acco' => $this->db->escape_like_str(0),\r\n-    'trensection' => $this->db->escape_like_str(0),\r\n-    'fee_collection' => $this->db->escape_like_str(0),\r\n-    'all_slips' => $this->db->escape_like_str(0),\r\n-    'own_slip' => $this->db->escape_like_str(1),\r\n-    'slip_edit_delete' => $this->db->escape_like_str(0),\r\n-    'pay_salary' => $this->db->escape_like_str(0),\r\n-    'creat_notice' => $this->db->escape_like_str(0),\r\n-    'send_message' => $this->db->escape_like_str(0),\r\n-    'vendor' => $this->db->escape_like_str(0),\r\n-    'delet_vendor' => $this->db->escape_like_str(0),\r\n-    'add_inv_cat' => $this->db->escape_like_str(0),\r\n-    'inve_item' => $this->db->escape_like_str(0),\r\n-    'delete_inve_ite' => $this->db->escape_like_str(0),\r\n-    'delete_inv_cat' => $this->db->escape_like_str(0),\r\n-    'inve_issu' => $this->db->escape_like_str(0),\r\n-    'delete_inven_issu' => $this->db->escape_like_str(0),\r\n-    'check_leav_appli' => $this->db->escape_like_str(0),\r\n-    'setting_manage_user' => $this->db->escape_like_str(0),\r\n-    'setting_accounts' => $this->db->escape_like_str(0),\r\n-    'other_setting' => $this->db->escape_like_str(0),\r\n-    'front_setings' => $this->db->escape_like_str(0),\r\n-);\r\n-if ($this->db->insert('role_based_access', $section_trainers_access)) {\r\n-    //check to see if we are creating the user\r\n-    //redirect them back to the admin page\r\n-    $this->session->set_flashdata('message', $this->ion_auth->messages());\r\n+                        $phone = $this->input->post('phoneCode', TRUE) . '' . $this->input->post('phone', TRUE);\r\n+                        $additional_data = array(\r\n+                        'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n+                        'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n+                        'phone' => $this->db->escape_like_str($phone),\r\n+                        'profile_image' => $this->db->escape_like_str($uploadFileInfo['file_name'])\r\n+                        );\r\n+                        $group_ids = array(\r\n+                        'group_id' => $this->db->escape_like_str(5)\r\n+                        );\r\n+                        if ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n+                        //This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n+                        $userid = $this->common->usersId();\r\n+                        $additionalData1 = array(\r\n+                            'user_id' => $this->db->escape_like_str($userid),\r\n+                            'Choir_member_id' => $this->db->escape_like_str($this->input->post('Choir_memberId', TRUE)),\r\n+                            'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n+                            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                            'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n+                            'section_trainers_name' => $this->db->escape_like_str($username),\r\n+                            'level' => $this->db->escape_like_str($this->input->post('guardianLevel', TRUE)),\r\n+                            'email' => $this->db->escape_like_str($this->input->post('email', TRUE)),\r\n+                            'phone' => $this->db->escape_like_str($phone)\r\n+                        );\r\n+                        $this->db->insert('section_trainers_info', $additionalData1);\r\n+                        $section_trainers_access = array(\r\n+                            'user_id' => $this->db->escape_like_str($userid),\r\n+                            'group_id' => $this->db->escape_like_str(5),\r\n+                            'das_top_info' => $this->db->escape_like_str(0),\r\n+                            'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n+                            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                            'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n+                            'das_grab_chart' => $this->db->escape_like_str(0),\r\n+                            'das_Choir_info' => $this->db->escape_like_str(0),\r\n+                            'das_message' => $this->db->escape_like_str(1),\r\n+                            'das_employ_attend' => $this->db->escape_like_str(0),\r\n+                            'das_notice' => $this->db->escape_like_str(1),\r\n+                            'das_calender' => $this->db->escape_like_str(1),\r\n+                            'admission' => $this->db->escape_like_str(0),\r\n+                            'all_Choir_member_info' => $this->db->escape_like_str(0),\r\n+                            'stud_edit_delete' => $this->db->escape_like_str(0),\r\n+                            'stu_own_info' => $this->db->escape_like_str(1),\r\n+                            'section_leader_info' => $this->db->escape_like_str(1),\r\n+                            'add_section_leader' => $this->db->escape_like_str(0),\r\n+                            'section_leader_details' => $this->db->escape_like_str(0),\r\n+                            'section_leader_edit_delete' => $this->db->escape_like_str(0),\r\n+                            'all_section_trainers_info' => $this->db->escape_like_str(0),\r\n+                            'own_section_trainers_info' => $this->db->escape_like_str(1),\r\n+                            'make_section_trainers_id' => $this->db->escape_like_str(0),\r\n+                            'section_trainers_edit_dlete' => $this->db->escape_like_str(0),\r\n+                            'add_new_Choir' => $this->db->escape_like_str(0),\r\n+                            'all_Choir_info' => $this->db->escape_like_str(0),\r\n+                            'Choir_details' => $this->db->escape_like_str(0),\r\n+                            'Choir_delete' => $this->db->escape_like_str(0),\r\n+                            'Choir_promotion' => $this->db->escape_like_str(0),\r\n+                            'assin_optio_sub' => $this->db->escape_like_str(0),\r\n+                            'add_Choir_routine' => $this->db->escape_like_str(0),\r\n+                            'own_Choir_routine' => $this->db->escape_like_str(1),\r\n+                            'all_Choir_routine' => $this->db->escape_like_str(0),\r\n+                            'rutin_edit_delete' => $this->db->escape_like_str(0),\r\n+                            'attendance_preview' => $this->db->escape_like_str(0),\r\n+                            'take_studence_atten' => $this->db->escape_like_str(0),\r\n+                            'edit_Choir_member_atten' => $this->db->escape_like_str(0),\r\n+                            'add_employee' => $this->db->escape_like_str(0),\r\n+                            'employee_list' => $this->db->escape_like_str(0),\r\n+                            'employ_attendance' => $this->db->escape_like_str(0),\r\n+                            'empl_atte_view' => $this->db->escape_like_str(0),\r\n+                            'add_song' => $this->db->escape_like_str(0),\r\n+                            'all_song' => $this->db->escape_like_str(0),\r\n+                            'make_suggestion' => $this->db->escape_like_str(0),\r\n+                            'all_suggestion' => $this->db->escape_like_str(0),\r\n+                            'own_suggestion' => $this->db->escape_like_str(1),\r\n+                            'add_rehearsal_gread' => $this->db->escape_like_str(0),\r\n+                            'rehearsal_gread' => $this->db->escape_like_str(0),\r\n+                            'add_rehearsal_routin' => $this->db->escape_like_str(0),\r\n+                            'all_rehearsal_routine' => $this->db->escape_like_str(0),\r\n+                            'own_rehearsal_routine' => $this->db->escape_like_str(1),\r\n+                            'rehearsal_attend_preview' => $this->db->escape_like_str(0),\r\n+                            'approve_result' => $this->db->escape_like_str(0),\r\n+                            'view_result' => $this->db->escape_like_str(1),\r\n+                            'all_mark_sheet' => $this->db->escape_like_str(0),\r\n+                            'own_mark_sheet' => $this->db->escape_like_str(1),\r\n+                            'take_rehearsal_attend' => $this->db->escape_like_str(0),\r\n+                            'change_rehearsal_attendance' => $this->db->escape_like_str(0),\r\n+                            'make_result' => $this->db->escape_like_str(0),\r\n+                            'add_category' => $this->db->escape_like_str(0),\r\n+                            'all_category' => $this->db->escape_like_str(1),\r\n+                            'edit_delete_category' => $this->db->escape_like_str(0),\r\n+                            'add_resources' => $this->db->escape_like_str(0),\r\n+                            'all_resources' => $this->db->escape_like_str(1),\r\n+                            'edit_delete_resources' => $this->db->escape_like_str(0),\r\n+                            'add_library_mem' => $this->db->escape_like_str(0),\r\n+                            'memb_list' => $this->db->escape_like_str(0),\r\n+                            'issu_return' => $this->db->escape_like_str(0),\r\n+                            'add_concerts' => $this->db->escape_like_str(0),\r\n+                            'add_set_dormi' => $this->db->escape_like_str(0),\r\n+                            'set_member_seat' => $this->db->escape_like_str(0),\r\n+                            'dormi_report' => $this->db->escape_like_str(1),\r\n+                            'add_transport' => $this->db->escape_like_str(0),\r\n+                            'all_transport' => $this->db->escape_like_str(1),\r\n+                            'transport_edit_dele' => $this->db->escape_like_str(0),\r\n+                            'add_account_title' => $this->db->escape_like_str(0),\r\n+                            'edit_dele_acco' => $this->db->escape_like_str(0),\r\n+                            'trensection' => $this->db->escape_like_str(0),\r\n+                            'fee_collection' => $this->db->escape_like_str(0),\r\n+                            'all_slips' => $this->db->escape_like_str(0),\r\n+                            'own_slip' => $this->db->escape_like_str(1),\r\n+                            'slip_edit_delete' => $this->db->escape_like_str(0),\r\n+                            'pay_salary' => $this->db->escape_like_str(0),\r\n+                            'creat_notice' => $this->db->escape_like_str(0),\r\n+                            'send_message' => $this->db->escape_like_str(0),\r\n+                            'vendor' => $this->db->escape_like_str(0),\r\n+                            'delet_vendor' => $this->db->escape_like_str(0),\r\n+                            'add_inv_cat' => $this->db->escape_like_str(0),\r\n+                            'inve_item' => $this->db->escape_like_str(0),\r\n+                            'delete_inve_ite' => $this->db->escape_like_str(0),\r\n+                            'delete_inv_cat' => $this->db->escape_like_str(0),\r\n+                            'inve_issu' => $this->db->escape_like_str(0),\r\n+                            'delete_inven_issu' => $this->db->escape_like_str(0),\r\n+                            'check_leav_appli' => $this->db->escape_like_str(0),\r\n+                            'setting_manage_user' => $this->db->escape_like_str(0),\r\n+                            'setting_accounts' => $this->db->escape_like_str(0),\r\n+                            'other_setting' => $this->db->escape_like_str(0),\r\n+                            'front_setings' => $this->db->escape_like_str(0),\r\n+                        );\r\n+                        if ($this->db->insert('role_based_access', $section_trainers_access)) {\r\n+                            //check to see if we are creating the user\r\n+                            //redirect them back to the admin page\r\n+                            $this->session->set_flashdata('message', $this->ion_auth->messages());\r\n \r\n-    //redirect(\"section_trainers/section_trainersInformation\", 'refresh');\r\n+                            //redirect(\"section_trainers/section_trainersInformation\", 'refresh');\r\n \r\n-    $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-    $data['success'] = '<div class=\"col-md-12\"><div class=\"alert alert-info alert-dismissable admisionSucceassMessageFont\">\r\n-                                        <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n-                                        <strong>Success!</strong> The section_trainers profile made successfully.\r\n-                                </div></div>';\r\n-    $this->load->view('temp/header');\r\n-    $this->load->view('makeProfile', $data);\r\n-    $this->load->view('temp/footer');\r\n-}\r\n-}\r\n-} else {\r\n-$query = $this->common->countryPhoneCode();\r\n-$data['countryPhoneCode'] = $query->countryPhonCode;\r\n-$data['s_Choir'] = $this->common->getAllData('Choir');\r\n-$this->load->view('temp/header');\r\n-$this->load->view('makeProfile', $data);\r\n-$this->load->view('temp/footer');\r\n-}\r\n-}\r\n+                            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+                            $data['success'] = '<div class=\"col-md-12\"><div class=\"alert alert-info alert-dismissable admisionSucceassMessageFont\">\r\n+                                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n+                                                                <strong>Success!</strong> The section_trainers profile made successfully.\r\n+                                                        </div></div>';\r\n+                            $this->load->view('temp/header');\r\n+                            $this->load->view('makeProfile', $data);\r\n+                            $this->load->view('temp/footer');\r\n+                        }\r\n+                        }\r\n+                        } else {\r\n+                        $query = $this->common->countryPhoneCode();\r\n+                        $data['countryPhoneCode'] = $query->countryPhonCode;\r\n+                        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+                        $this->load->view('temp/header');\r\n+                        $this->load->view('makeProfile', $data);\r\n+                        $this->load->view('temp/footer');\r\n+                        }\r\n+                        }\r\n \r\n     //This function will give the Choir_member information from Choir_memberID\r\n     public function Choir_memberInfoById() {\r\n         $Choir_memberId = $this->input->get('q', TRUE);\r\n"
                },
                {
                    "date": 1714841232442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -533,21 +533,22 @@\n                     </div>\r\n                 </div>';\r\n     }\r\n \r\n-    public function Section_trainer_info() {\r\n+    public function Section_trainer_leader_info(){\r\n         $Choir_id = $this->input->get('q', TRUE);\r\n         $query = $this->common->getWhere('Choir', 'id', $Choir_id);\r\n-        error_log(\"Choir ID: \" . $Choir_id);\r\n-\r\n         foreach ($query as $row) {\r\n             $data = $row;\r\n+\r\n         }\r\n         $Choir_code = $data['ChoirCode'];\r\n+\r\n         //making here Choir Section fild.\r\n         if (!empty($data['section'])) {\r\n             $section = $data['section'];\r\n             $sectionArray = explode(\",\", $section);\r\n+\r\n             echo '<div class=\"form-group\">\r\n                         <label class=\"col-md-3 control-label\">section <span class=\"requiredStar\"> * </span></label>\r\n                         <div class=\"col-md-6\">\r\n                             <select name=\"section\" class=\"form-control\">\r\n@@ -565,11 +566,8 @@\n                         <div class=\"alert alert-warning\">\r\n                                 <strong>Info!</strong> ' . $section . '\r\n                         </div></div></div>';\r\n         }\r\n-\r\n-       \r\n-       \r\n     }\r\n \r\n     //This function is using for add new section_trainers\r\n                             function addSection_trainers() {\r\n"
                },
                {
                    "date": 1714841502166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -615,16 +615,16 @@\n                         //This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n                         $userid = $this->common->usersId();\r\n                         $additionalData1 = array(\r\n                             'user_id' => $this->db->escape_like_str($userid),\r\n-                            'Choir_member_id' => $this->db->escape_like_str($this->input->post('Choir_memberId', TRUE)),\r\n                             'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n                             'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                             'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n                             'section_trainers_name' => $this->db->escape_like_str($username),\r\n                             'level' => $this->db->escape_like_str($this->input->post('guardianLevel', TRUE)),\r\n                             'email' => $this->db->escape_like_str($this->input->post('email', TRUE)),\r\n-                            'phone' => $this->db->escape_like_str($phone)\r\n+                            'phone' => $this->db->escape_like_str($phone),\r\n+                            \r\n                         );\r\n                         $this->db->insert('section_trainers_info', $additionalData1);\r\n                         $section_trainers_access = array(\r\n                             'user_id' => $this->db->escape_like_str($userid),\r\n"
                },
                {
                    "date": 1714842888120,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,19 +225,27 @@\n     }\r\n \r\n     //This function add section_leader in this function\r\n     function addSection_leader() {\r\n-       \r\n-\r\n         if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin()) {\r\n             redirect('auth', 'refresh');\r\n         }\r\n-        \r\n         if ($this->input->post('submit', TRUE)) {\r\n+                    $Choir_id = $this->db->escape_like_str($this->input->post('Choir', TRUE));\r\n+                    $Choir_title = $this->common->Choir_title($Choir_id);\r\n+\r\n+                    $section = $this->db->escape_like_str($this->input->post('section', TRUE));\r\n+\r\n+                    // Include these in your data array for database insertion\r\n+                    $additional_data['Choir_id'] = $Choir_id;\r\n+                    $additional_data['section'] = $section;\r\n+\r\n+                    $section_leadersInfo['Choir_id'] = $Choir_id;\r\n+                    $section_leadersInfo['section'] = $section;\r\n+                    $section_leadersInfo['Choir_title'] = $Choir_title;\r\n             $this->load->database();\r\n             $tables = $this->config->item('tables', 'ion_auth');\r\n             $edu_1 = '';\r\n-           \r\n             $edu_2 = '';\r\n             $edu_3 = '';\r\n             $edu_4 = '';\r\n             $edu_5 = '';\r\n@@ -300,35 +308,33 @@\n \r\n             //This array information's are sending to \"user\" table as a core information as a user this system.\r\n             $additional_data = array(\r\n                 'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n+                'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n+                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n                 'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n                 'phone' => $this->db->escape_like_str($phone),\r\n                 'profile_image' => $this->db->escape_like_str($uploadFileInfo['file_name']),\r\n                 'leave_status' => $this->db->escape_like_str('Available'),\r\n-                'user_status' => $this->db->escape_like_str('Employee'),\r\n-                'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n-                    'Choir_id' => $this->db->escape_like_str($this->input->post('Choir_id', TRUE)),\r\n-\r\n+                'user_status' => $this->db->escape_like_str('Employee')\r\n             );\r\n \r\n             $group_ids = array(\r\n                 'group_id' => $this->db->escape_like_str(4)\r\n             );\r\n             if ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n-\r\n-                \r\n                 //This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n                 $userid = $this->common->usersId();\r\n                 //This array information's are sending to \"section_leaders_info\" table.\r\n                 $section_leadersInfo = array(\r\n                     'user_id' => $this->db->escape_like_str($userid),\r\n                     'fullname' => $this->db->escape_like_str($username),\r\n                     'farther_name' => $this->db->escape_like_str($this->input->post('father_name', TRUE)),\r\n                     'mother_name' => $this->db->escape_like_str($this->input->post('mother_name', TRUE)),\r\n-                    'Choir_id' => $this->db->escape_like_str($this->input->post('Choir_id', TRUE)),\r\n+                    'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                     'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n-\r\n                     'birth_date' => $this->db->escape_like_str($this->input->post('birthdate', TRUE)),\r\n                     'sex' => $this->db->escape_like_str($this->input->post('sex', TRUE)),\r\n                     'present_address' => $this->db->escape_like_str($this->input->post('present_address', TRUE)),\r\n                     'permanent_address' => $this->db->escape_like_str($this->input->post('permanent_address', TRUE)),\r\n@@ -350,8 +356,11 @@\n \r\n                 $section_leader_access = array(\r\n                     'user_id' => $this->db->escape_like_str($userid),\r\n                     'group_id' => $this->db->escape_like_str(4),\r\n+                    'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n                     'das_top_info' => $this->db->escape_like_str(1),\r\n                     'das_grab_chart' => $this->db->escape_like_str(0),\r\n                     'das_Choir_info' => $this->db->escape_like_str(1),\r\n                     'das_message' => $this->db->escape_like_str(1),\r\n@@ -445,24 +454,40 @@\n                     'other_setting' => $this->db->escape_like_str(0),\r\n                     'front_setings' => $this->db->escape_like_str(0),\r\n                 );\r\n \r\n+\r\n+              \r\n+\r\n                 $this->db->insert('section_leaders_info', $section_leadersInfo);\r\n                 if ($this->db->insert('role_based_access', $section_leader_access)) {\r\n                     //Load the Section_leaders Information's page after Add New Section_leader.\r\n-                    redirect('section_leaders/section_leadersInfomration', 'refresh');\r\n+                    $this->session->set_flashdata('message', $this->ion_auth->messages());\r\n+\r\n+                    //redirect(\"section_trainers/section_trainersInformation\", 'refresh');\r\n+\r\n+                    $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+                    $data['success'] = '<div class=\"col-md-12\"><div class=\"alert alert-info alert-dismissable admisionSucceassMessageFont\">\r\n+                                                        <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n+                                                        <strong>Success!</strong> The section_trainers profile made successfully.\r\n+                                                </div></div>';\r\n+                    $this->load->view('temp/header');\r\n+                    $this->load->view('add_new_section_leader', $data);\r\n+                    $this->load->view('temp/footer');\r\n                 }\r\n             } else {\r\n                 $query = $this->common->countryPhoneCode();\r\n                 $data['countryPhoneCode'] = $query->countryPhonCode;\r\n                 //display the create user form\r\n+                $data['s_Choir'] = $this->common->getAllData('Choir');\r\n                 $this->load->view('temp/header');\r\n                 $this->load->view('add_new_section_leader', $data);\r\n                 $this->load->view('temp/footer');\r\n             }\r\n         } else {\r\n             $query = $this->common->countryPhoneCode();\r\n             $data['countryPhoneCode'] = $query->countryPhonCode;\r\n+            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n             //display the create user form\r\n             $this->load->view('temp/header');\r\n             $this->load->view('add_new_section_leader', $data);\r\n             $this->load->view('temp/footer');\r\n"
                }
            ],
            "date": 1714840597073,
            "name": "Commit-0",
            "content": "<?php\r\n\r\nif (!defined('BASEPATH')) {\r\n    exit('No direct script access allowed');\r\n}\r\n\r\nclass Users extends CI_Controller {\r\n\r\n    /**\r\n     * This controller is using for add new users (New Choir_member,Section_leader and Parents) in this system \r\n     *\r\n     * Maps to the following URL\r\n     * \t\thttp://rehearsalple.com/index.php/users\r\n     * \t- or -  \r\n     * \t\thttp://rehearsalple.com/index.php/users/<method_name>\r\n     */\r\n    function __construct() {\r\n        parent::__construct();\r\n        $this->load->library('form_validation');\r\n        if (!$this->ion_auth->logged_in()) {\r\n            redirect('auth/login');\r\n        }\r\n    }\r\n\r\n    //This function is using for add new Choir_member\r\n    function admission() {\r\n        $Choir_id = $this->db->escape_like_str($this->input->post('Choir', TRUE));\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $tables = $this->config->item('tables', 'ion_auth');\r\n            $username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n            $email = strtolower($this->input->post('email', TRUE));\r\n            $password = $this->input->post('password', TRUE);\r\n            //Here is uploading the Choir_member's photo.\r\n            $config['upload_path'] = './assets/uploads/';\r\n            $config['allowed_types'] = 'gif|jpg|png';\r\n            $config['max_size'] = '10000';\r\n            $config['max_width'] = '10240';\r\n            $config['max_height'] = '7680';\r\n            $config['encrypt_name'] = TRUE;\r\n            $this->load->library('upload', $config);\r\n            $this->upload->do_upload();\r\n            $uploadFileInfo = $this->upload->data();\r\n            $phone = $this->input->post('phoneCode', TRUE) . '' . $this->input->post('phone', TRUE);\r\n            //This array information's are sending to \"user\" table as a core information as a user this system\r\n            $additional_data = array(\r\n                'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n                'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n                'phone' => $this->db->escape_like_str($phone),\r\n                'profile_image' => $uploadFileInfo['file_name'],\r\n            );\r\n            $group_ids = array('group_id' => 3);\r\n            $Choir_id = $this->db->escape_like_str($this->input->post('Choir', TRUE));\r\n            $Choir_title = $this->common->Choir_title($Choir_id);\r\n            if ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n                $userid = $this->common->usersId();\r\n                //This array information's are sending to \"Choir_member_info\" table.\r\n                $Choir_membersInfo = array(\r\n                    'year' => date('Y'),\r\n                    'user_id' => $this->db->escape_like_str($userid),\r\n                    'Choir_member_id' => $this->db->escape_like_str($this->input->post('Choir_member_id', TRUE)),\r\n                    'roll_number' => $this->db->escape_like_str($this->input->post('roll_number', TRUE)),\r\n                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                    'Choir_member_nam' => $this->db->escape_like_str($username),\r\n                    'farther_name' => $this->db->escape_like_str($this->input->post('father_name', TRUE)),\r\n                    'mother_name' => $this->db->escape_like_str($this->input->post('mother_name', TRUE)),\r\n                    'birth_date' => $this->db->escape_like_str($this->input->post('birthdate', TRUE)),\r\n                    'sex' => $this->db->escape_like_str($this->input->post('sex', TRUE)),\r\n                    'present_address' => $this->db->escape_like_str($this->input->post('present_address', TRUE)),\r\n                    'permanent_address' => $this->db->escape_like_str($this->input->post('permanent_address', TRUE)),\r\n                    'phone' => $this->db->escape_like_str($phone),\r\n                    'father_occupation' => $this->db->escape_like_str($this->input->post('father_occupation', TRUE)),\r\n                    'father_incom_range' => $this->db->escape_like_str($this->input->post('father_incom_range', TRUE)),\r\n                    'mother_occupation' => $this->db->escape_like_str($this->input->post('mother_occupation', TRUE)),\r\n                    'Choir_member_photo' => $this->db->escape_like_str($uploadFileInfo['file_name']),\r\n                    'last_Choir_certificate' => $this->db->escape_like_str($this->input->post('previous_certificate', TRUE)),\r\n                    't_c' => $this->db->escape_like_str($this->input->post('tc', TRUE)),\r\n                    'academic_transcription' => $this->db->escape_like_str($this->input->post('at', TRUE)),\r\n                    'national_birth_certificate' => $this->db->escape_like_str($this->input->post('nbc', TRUE)),\r\n                    'testimonial' => $this->db->escape_like_str($this->input->post('testmonial', TRUE)),\r\n                    'documents_info' => $this->db->escape_like_str($this->input->post('submit_file_information', TRUE)),\r\n                    'blood' => $this->db->escape_like_str($this->input->post('blood', TRUE)),\r\n                    'starting_year' => $this->db->escape_like_str(date('Y')),\r\n                );\r\n                if ($this->db->insert('Choir_member_info', $Choir_membersInfo)) {\r\n                    $Choir_member_info_id = $this->db->insert_id();\r\n                    $additionalData3 = array(\r\n                        'year' => $this->db->escape_like_str(date('Y')),\r\n                        'user_id' => $this->db->escape_like_str($userid),\r\n                        'roll_number' => $this->db->escape_like_str($this->input->post('roll_number', TRUE)),\r\n                        'Choir_member_id' => $this->db->escape_like_str($this->input->post('Choir_member_id', TRUE)),\r\n                        'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                        'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n                        'Choir_member_title' => $this->db->escape_like_str($username),\r\n                    );\r\n\r\n                    if ($this->db->insert('Choir_Choir_members', $additionalData3)) {\r\n                        $Choir_memberAmount = $this->common->ChoirChoir_memberAmount($Choir_id);\r\n                        $clas_info = array(\r\n                            'Choir_member_amount' => $this->db->escape_like_str($Choir_memberAmount)\r\n                        );\r\n                        $this->db->where('id', $Choir_id);\r\n                        if ($this->db->update('Choir', $clas_info)) {\r\n                            $Choir_member_access = array(\r\n                                'user_id' => $this->db->escape_like_str($userid),\r\n                                'group_id' => $this->db->escape_like_str(3),\r\n                                'das_top_info' => $this->db->escape_like_str(0),\r\n                                'das_grab_chart' => $this->db->escape_like_str(0),\r\n                                'das_Choir_info' => $this->db->escape_like_str(0),\r\n                                'das_message' => $this->db->escape_like_str(1),\r\n                                'das_employ_attend' => $this->db->escape_like_str(0),\r\n                                'das_notice' => $this->db->escape_like_str(1),\r\n                                'das_calender' => $this->db->escape_like_str(1),\r\n                                'admission' => $this->db->escape_like_str(0),\r\n                                'all_Choir_member_info' => $this->db->escape_like_str(0),\r\n                                'stud_edit_delete' => $this->db->escape_like_str(0),\r\n                                'stu_own_info' => $this->db->escape_like_str(1),\r\n                                'section_leader_info' => $this->db->escape_like_str(1),\r\n                                'add_section_leader' => $this->db->escape_like_str(0),\r\n                                'section_leader_details' => $this->db->escape_like_str(0),\r\n                                'section_leader_edit_delete' => $this->db->escape_like_str(0),\r\n                                'all_section_trainers_info' => $this->db->escape_like_str(0),\r\n                                'own_section_trainers_info' => $this->db->escape_like_str(1),\r\n                                'make_section_trainers_id' => $this->db->escape_like_str(0),\r\n                                'section_trainers_edit_dlete' => $this->db->escape_like_str(0),\r\n                                'add_new_Choir' => $this->db->escape_like_str(0),\r\n                                'all_Choir_info' => $this->db->escape_like_str(0),\r\n                                'Choir_details' => $this->db->escape_like_str(0),\r\n                                'Choir_delete' => $this->db->escape_like_str(0),\r\n                                'Choir_promotion' => $this->db->escape_like_str(0),\r\n                                'assin_optio_sub' => $this->db->escape_like_str(0),\r\n                                'add_Choir_routine' => $this->db->escape_like_str(0),\r\n                                'own_Choir_routine' => $this->db->escape_like_str(1),\r\n                                'all_Choir_routine' => $this->db->escape_like_str(0),\r\n                                'rutin_edit_delete' => $this->db->escape_like_str(0),\r\n                                'attendance_preview' => $this->db->escape_like_str(0),\r\n                                'take_studence_atten' => $this->db->escape_like_str(0),\r\n                                'edit_Choir_member_atten' => $this->db->escape_like_str(0),\r\n                                'add_employee' => $this->db->escape_like_str(0),\r\n                                'employee_list' => $this->db->escape_like_str(0),\r\n                                'employ_attendance' => $this->db->escape_like_str(0),\r\n                                'empl_atte_view' => $this->db->escape_like_str(0),\r\n                                'add_song' => $this->db->escape_like_str(0),\r\n                                'all_song' => $this->db->escape_like_str(0),\r\n                                'make_suggestion' => $this->db->escape_like_str(0),\r\n                                'all_suggestion' => $this->db->escape_like_str(0),\r\n                                'own_suggestion' => $this->db->escape_like_str(1),\r\n                                'add_rehearsal_gread' => $this->db->escape_like_str(0),\r\n                                'rehearsal_gread' => $this->db->escape_like_str(0),\r\n                                'add_rehearsal_routin' => $this->db->escape_like_str(0),\r\n                                'all_rehearsal_routine' => $this->db->escape_like_str(0),\r\n                                'own_rehearsal_routine' => $this->db->escape_like_str(1),\r\n                                'rehearsal_attend_preview' => $this->db->escape_like_str(0),\r\n                                'approve_result' => $this->db->escape_like_str(0),\r\n                                'view_result' => $this->db->escape_like_str(1),\r\n                                'all_mark_sheet' => $this->db->escape_like_str(0),\r\n                                'own_mark_sheet' => $this->db->escape_like_str(1),\r\n                                'take_rehearsal_attend' => $this->db->escape_like_str(0),\r\n                                'change_rehearsal_attendance' => $this->db->escape_like_str(0),\r\n                                'make_result' => $this->db->escape_like_str(0),\r\n                                'add_category' => $this->db->escape_like_str(0),\r\n                                'all_category' => $this->db->escape_like_str(1),\r\n                                'edit_delete_category' => $this->db->escape_like_str(0),\r\n                                'add_resources' => $this->db->escape_like_str(0),\r\n                                'all_resources' => $this->db->escape_like_str(1),\r\n                                'edit_delete_resources' => $this->db->escape_like_str(0),\r\n                                'add_library_mem' => $this->db->escape_like_str(0),\r\n                                'memb_list' => $this->db->escape_like_str(0),\r\n                                'issu_return' => $this->db->escape_like_str(0),\r\n                                'add_concerts' => $this->db->escape_like_str(0),\r\n                                'add_set_dormi' => $this->db->escape_like_str(0),\r\n                                'set_member_seat' => $this->db->escape_like_str(0),\r\n                                'dormi_report' => $this->db->escape_like_str(1),\r\n                                'add_transport' => $this->db->escape_like_str(0),\r\n                                'all_transport' => $this->db->escape_like_str(1),\r\n                                'transport_edit_dele' => $this->db->escape_like_str(0),\r\n                                'add_account_title' => $this->db->escape_like_str(0),\r\n                                'edit_dele_acco' => $this->db->escape_like_str(0),\r\n                                'trensection' => $this->db->escape_like_str(0),\r\n                                'fee_collection' => $this->db->escape_like_str(0),\r\n                                'all_slips' => $this->db->escape_like_str(0),\r\n                                'own_slip' => $this->db->escape_like_str(1),\r\n                                'slip_edit_delete' => $this->db->escape_like_str(0),\r\n                                'pay_salary' => $this->db->escape_like_str(0),\r\n                                'creat_notice' => $this->db->escape_like_str(0),\r\n                                'send_message' => $this->db->escape_like_str(0),\r\n                                'vendor' => $this->db->escape_like_str(0),\r\n                                'delet_vendor' => $this->db->escape_like_str(0),\r\n                                'add_inv_cat' => $this->db->escape_like_str(0),\r\n                                'inve_item' => $this->db->escape_like_str(0),\r\n                                'delete_inve_ite' => $this->db->escape_like_str(0),\r\n                                'delete_inv_cat' => $this->db->escape_like_str(0),\r\n                                'inve_issu' => $this->db->escape_like_str(0),\r\n                                'delete_inven_issu' => $this->db->escape_like_str(0),\r\n                                'check_leav_appli' => $this->db->escape_like_str(0),\r\n                                'setting_manage_user' => $this->db->escape_like_str(0),\r\n                                'setting_accounts' => $this->db->escape_like_str(0),\r\n                                'other_setting' => $this->db->escape_like_str(0),\r\n                                'front_setings' => $this->db->escape_like_str(0),\r\n                            );\r\n                            if ($this->db->insert('role_based_access', $Choir_member_access)) {\r\n                                $data['success'] = '<div class=\"alert alert-info alert-dismissable admisionSucceassMessageFont\">\r\n                                                                    <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n                                                                    <strong>Success!</strong> The Choir_member admitted successfully.\r\n                                                            </div>';\r\n                                //Load the admission form again for new Choir_member. \r\n                                $data['s_Choir'] = $this->common->getAllData('Choir');\r\n                                $this->load->view('temp/header');\r\n                                $this->load->view('add_new_Choir_member', $data);\r\n                                $this->load->view('temp/footer');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            $query = $this->common->countryPhoneCode();\r\n            $data['countryPhoneCode'] = $query->countryPhonCode;\r\n            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n            //display the create user form\r\n            $this->load->view('temp/header');\r\n            $this->load->view('add_new_Choir_member', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n\r\n    //This function add section_leader in this function\r\n    function addSection_leader() {\r\n       \r\n\r\n        if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin()) {\r\n            redirect('auth', 'refresh');\r\n        }\r\n        \r\n        if ($this->input->post('submit', TRUE)) {\r\n            $this->load->database();\r\n            $tables = $this->config->item('tables', 'ion_auth');\r\n            $edu_1 = '';\r\n           \r\n            $edu_2 = '';\r\n            $edu_3 = '';\r\n            $edu_4 = '';\r\n            $edu_5 = '';\r\n            $dd_1 = $this->input->post('dd_1', TRUE);\r\n            if (!empty($dd_1)) {\r\n                $this->form_validation->set_rules('scu_1', 'School/College/University 1st fild', 'required');\r\n                $this->form_validation->set_rules('result_1', 'Result  1st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_1', 'Passing year 1st fild', 'required');\r\n                $edu_1 = $this->input->post('dd_1', TRUE) . ',' . $this->input->post('scu_1', TRUE) . ',' . $this->input->post('result_1', TRUE) . ',' . $this->input->post('paYear_1', TRUE);\r\n            }\r\n\r\n            $dd_2 = $this->input->post('dd_2', TRUE);\r\n            if (!empty($dd_2)) {\r\n                $this->form_validation->set_rules('scu_2', 'School/College/University 2st fild', 'required');\r\n                $this->form_validation->set_rules('result_2', 'Result  2st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_2', 'Passing year 2st fild', 'required');\r\n                $edu_2 = $this->input->post('dd_2', TRUE) . ',' . $this->input->post('scu_2', TRUE) . ',' . $this->input->post('result_2', TRUE) . ',' . $this->input->post('paYear_2', TRUE);\r\n            }\r\n\r\n            $dd_3 = $this->input->post('dd_3', TRUE);\r\n            if (!empty($dd_3)) {\r\n                $this->form_validation->set_rules('scu_3', 'School/College/University 3st fild', 'required');\r\n                $this->form_validation->set_rules('result_3', 'Result  3st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_3', 'Passing year 3st fild', 'required');\r\n                $edu_3 = $this->input->post('dd_3', TRUE) . ',' . $this->input->post('scu_3', TRUE) . ',' . $this->input->post('result_3', TRUE) . ',' . $this->input->post('paYear_3', TRUE);\r\n            }\r\n\r\n            $dd_4 = $this->input->post('dd_4', TRUE);\r\n            if (!empty($dd_4)) {\r\n                $this->form_validation->set_rules('scu_4', 'School/College/University 4st fild', 'required');\r\n                $this->form_validation->set_rules('result_4', 'Result  4st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_4', 'Passing year 4st fild', 'required');\r\n                $edu_4 = $this->input->post('dd_4', TRUE) . ',' . $this->input->post('scu_4', TRUE) . ',' . $this->input->post('result_4', TRUE) . ',' . $this->input->post('paYear_4', TRUE);\r\n            }\r\n\r\n            $dd_5 = $this->input->post('dd_5', TRUE);\r\n            if (!empty($dd_5)) {\r\n                $this->form_validation->set_rules('scu_5', 'School/College/University 5st fild', 'required');\r\n                $this->form_validation->set_rules('result_5', 'Result  5st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_5', 'Passing year 5st fild', 'required');\r\n                $edu_5 = $this->input->post('dd_5', TRUE) . ',' . $this->input->post('scu_5', TRUE) . ',' . $this->input->post('result_5', TRUE) . ',' . $this->input->post('paYear_5', TRUE);\r\n            }\r\n\r\n            $username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n            $email = strtolower($this->input->post('email', TRUE));\r\n            $password = $this->input->post('password', TRUE);\r\n            $phone = $this->input->post('phoneCode', TRUE) . '' . $this->input->post('phone', TRUE);\r\n\r\n            //here is upload the section_leader's photo.\r\n            $config['upload_path'] = './assets/uploads/';\r\n            $config['allowed_types'] = 'gif|jpg|png';\r\n            $config['max_size'] = '10000';\r\n            $config['max_width'] = '10240';\r\n            $config['max_height'] = '7680';\r\n            $config['encrypt_name'] = TRUE;\r\n\r\n            $this->load->library('upload', $config);\r\n            $this->upload->do_upload();\r\n            $uploadFileInfo = $this->upload->data();\r\n\r\n            //This array information's are sending to \"user\" table as a core information as a user this system.\r\n            $additional_data = array(\r\n                'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n                'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n                'phone' => $this->db->escape_like_str($phone),\r\n                'profile_image' => $this->db->escape_like_str($uploadFileInfo['file_name']),\r\n                'leave_status' => $this->db->escape_like_str('Available'),\r\n                'user_status' => $this->db->escape_like_str('Employee'),\r\n                'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n                    'Choir_id' => $this->db->escape_like_str($this->input->post('Choir_id', TRUE)),\r\n\r\n            );\r\n\r\n            $group_ids = array(\r\n                'group_id' => $this->db->escape_like_str(4)\r\n            );\r\n            if ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n\r\n                \r\n                //This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n                $userid = $this->common->usersId();\r\n                //This array information's are sending to \"section_leaders_info\" table.\r\n                $section_leadersInfo = array(\r\n                    'user_id' => $this->db->escape_like_str($userid),\r\n                    'fullname' => $this->db->escape_like_str($username),\r\n                    'farther_name' => $this->db->escape_like_str($this->input->post('father_name', TRUE)),\r\n                    'mother_name' => $this->db->escape_like_str($this->input->post('mother_name', TRUE)),\r\n                    'Choir_id' => $this->db->escape_like_str($this->input->post('Choir_id', TRUE)),\r\n                    'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n\r\n                    'birth_date' => $this->db->escape_like_str($this->input->post('birthdate', TRUE)),\r\n                    'sex' => $this->db->escape_like_str($this->input->post('sex', TRUE)),\r\n                    'present_address' => $this->db->escape_like_str($this->input->post('present_address', TRUE)),\r\n                    'permanent_address' => $this->db->escape_like_str($this->input->post('permanent_address', TRUE)),\r\n                    'song' => $this->db->escape_like_str($this->input->post('facultiesSong', TRUE)),\r\n                    'position' => $this->db->escape_like_str($this->input->post('position', TRUE)),\r\n                    'index_no' => $this->db->escape_like_str($this->input->post('indexNo', TRUE)),\r\n                    'working_hour' => $this->db->escape_like_str($this->input->post('workingHoure', TRUE)),\r\n                    'educational_qualification_1' => $this->db->escape_like_str($edu_1),\r\n                    'educational_qualification_2' => $this->db->escape_like_str($edu_2),\r\n                    'educational_qualification_3' => $this->db->escape_like_str($edu_3),\r\n                    'educational_qualification_4' => $this->db->escape_like_str($edu_4),\r\n                    'educational_qualification_5' => $this->db->escape_like_str($edu_5),\r\n                    'cv' => $this->db->escape_like_str($this->input->post('cv', TRUE)),\r\n                    'educational_certificat' => $this->db->escape_like_str($this->input->post('educational_certificat', TRUE)),\r\n                    'exprieance_certificatte' => $this->db->escape_like_str($this->input->post('exc', TRUE)),\r\n                    'files_info' => $this->db->escape_like_str($this->input->post('submited_info', TRUE)),\r\n                    'phone' => $this->db->escape_like_str($phone),\r\n                );\r\n\r\n                $section_leader_access = array(\r\n                    'user_id' => $this->db->escape_like_str($userid),\r\n                    'group_id' => $this->db->escape_like_str(4),\r\n                    'das_top_info' => $this->db->escape_like_str(1),\r\n                    'das_grab_chart' => $this->db->escape_like_str(0),\r\n                    'das_Choir_info' => $this->db->escape_like_str(1),\r\n                    'das_message' => $this->db->escape_like_str(1),\r\n                    'das_employ_attend' => $this->db->escape_like_str(0),\r\n                    'das_notice' => $this->db->escape_like_str(1),\r\n                    'das_calender' => $this->db->escape_like_str(1),\r\n                    'admission' => $this->db->escape_like_str(0),\r\n                    'all_Choir_member_info' => $this->db->escape_like_str(1),\r\n                    'stud_edit_delete' => $this->db->escape_like_str(0),\r\n                    'stu_own_info' => $this->db->escape_like_str(0),\r\n                    'section_leader_info' => $this->db->escape_like_str(0),\r\n                    'add_section_leader' => $this->db->escape_like_str(0),\r\n                    'section_leader_details' => $this->db->escape_like_str(0),\r\n                    'section_leader_edit_delete' => $this->db->escape_like_str(0),\r\n                    'all_section_trainers_info' => $this->db->escape_like_str(1),\r\n                    'own_section_trainers_info' => $this->db->escape_like_str(0),\r\n                    'make_section_trainers_id' => $this->db->escape_like_str(0),\r\n                    'section_trainers_edit_dlete' => $this->db->escape_like_str(0),\r\n                    'add_new_Choir' => $this->db->escape_like_str(0),\r\n                    'all_Choir_info' => $this->db->escape_like_str(1),\r\n                    'Choir_details' => $this->db->escape_like_str(1),\r\n                    'Choir_delete' => $this->db->escape_like_str(0),\r\n                    'Choir_promotion' => $this->db->escape_like_str(0),\r\n                    'assin_optio_sub' => $this->db->escape_like_str(0),\r\n                    'add_Choir_routine' => $this->db->escape_like_str(0),\r\n                    'own_Choir_routine' => $this->db->escape_like_str(0),\r\n                    'all_Choir_routine' => $this->db->escape_like_str(1),\r\n                    'rutin_edit_delete' => $this->db->escape_like_str(0),\r\n                    'attendance_preview' => $this->db->escape_like_str(1),\r\n                    'take_studence_atten' => $this->db->escape_like_str(1),\r\n                    'edit_Choir_member_atten' => $this->db->escape_like_str(0),\r\n                    'add_employee' => $this->db->escape_like_str(0),\r\n                    'employee_list' => $this->db->escape_like_str(0),\r\n                    'employ_attendance' => $this->db->escape_like_str(0),\r\n                    'empl_atte_view' => $this->db->escape_like_str(0),\r\n                    'add_song' => $this->db->escape_like_str(0),\r\n                    'all_song' => $this->db->escape_like_str(1),\r\n                    'make_suggestion' => $this->db->escape_like_str(1),\r\n                    'all_suggestion' => $this->db->escape_like_str(1),\r\n                    'own_suggestion' => $this->db->escape_like_str(0),\r\n                    'add_rehearsal_gread' => $this->db->escape_like_str(0),\r\n                    'rehearsal_gread' => $this->db->escape_like_str(1),\r\n                    'add_rehearsal_routin' => $this->db->escape_like_str(0),\r\n                    'all_rehearsal_routine' => $this->db->escape_like_str(1),\r\n                    'own_rehearsal_routine' => $this->db->escape_like_str(0),\r\n                    'rehearsal_attend_preview' => $this->db->escape_like_str(1),\r\n                    'approve_result' => $this->db->escape_like_str(0),\r\n                    'view_result' => $this->db->escape_like_str(1),\r\n                    'all_mark_sheet' => $this->db->escape_like_str(1),\r\n                    'own_mark_sheet' => $this->db->escape_like_str(0),\r\n                    'take_rehearsal_attend' => $this->db->escape_like_str(1),\r\n                    'change_rehearsal_attendance' => $this->db->escape_like_str(0),\r\n                    'make_result' => $this->db->escape_like_str(1),\r\n                    'add_category' => $this->db->escape_like_str(0),\r\n                    'all_category' => $this->db->escape_like_str(1),\r\n                    'edit_delete_category' => $this->db->escape_like_str(0),\r\n                    'add_resources' => $this->db->escape_like_str(0),\r\n                    'all_resources' => $this->db->escape_like_str(1),\r\n                    'edit_delete_resources' => $this->db->escape_like_str(0),\r\n                    'add_library_mem' => $this->db->escape_like_str(0),\r\n                    'memb_list' => $this->db->escape_like_str(0),\r\n                    'issu_return' => $this->db->escape_like_str(0),\r\n                    'add_concerts' => $this->db->escape_like_str(0),\r\n                    'add_set_dormi' => $this->db->escape_like_str(0),\r\n                    'set_member_seat' => $this->db->escape_like_str(0),\r\n                    'dormi_report' => $this->db->escape_like_str(1),\r\n                    'add_transport' => $this->db->escape_like_str(0),\r\n                    'all_transport' => $this->db->escape_like_str(1),\r\n                    'transport_edit_dele' => $this->db->escape_like_str(0),\r\n                    'add_account_title' => $this->db->escape_like_str(0),\r\n                    'edit_dele_acco' => $this->db->escape_like_str(0),\r\n                    'trensection' => $this->db->escape_like_str(0),\r\n                    'fee_collection' => $this->db->escape_like_str(1),\r\n                    'all_slips' => $this->db->escape_like_str(1),\r\n                    'own_slip' => $this->db->escape_like_str(0),\r\n                    'slip_edit_delete' => $this->db->escape_like_str(0),\r\n                    'pay_salary' => $this->db->escape_like_str(0),\r\n                    'creat_notice' => $this->db->escape_like_str(0),\r\n                    'send_message' => $this->db->escape_like_str(1),\r\n                    'vendor' => $this->db->escape_like_str(0),\r\n                    'delet_vendor' => $this->db->escape_like_str(0),\r\n                    'add_inv_cat' => $this->db->escape_like_str(0),\r\n                    'inve_item' => $this->db->escape_like_str(0),\r\n                    'delete_inve_ite' => $this->db->escape_like_str(0),\r\n                    'delete_inv_cat' => $this->db->escape_like_str(0),\r\n                    'inve_issu' => $this->db->escape_like_str(0),\r\n                    'delete_inven_issu' => $this->db->escape_like_str(0),\r\n                    'check_leav_appli' => $this->db->escape_like_str(0),\r\n                    'setting_manage_user' => $this->db->escape_like_str(0),\r\n                    'setting_accounts' => $this->db->escape_like_str(0),\r\n                    'other_setting' => $this->db->escape_like_str(0),\r\n                    'front_setings' => $this->db->escape_like_str(0),\r\n                );\r\n\r\n                $this->db->insert('section_leaders_info', $section_leadersInfo);\r\n                if ($this->db->insert('role_based_access', $section_leader_access)) {\r\n                    //Load the Section_leaders Information's page after Add New Section_leader.\r\n                    redirect('section_leaders/section_leadersInfomration', 'refresh');\r\n                }\r\n            } else {\r\n                $query = $this->common->countryPhoneCode();\r\n                $data['countryPhoneCode'] = $query->countryPhonCode;\r\n                //display the create user form\r\n                $this->load->view('temp/header');\r\n                $this->load->view('add_new_section_leader', $data);\r\n                $this->load->view('temp/footer');\r\n            }\r\n        } else {\r\n            $query = $this->common->countryPhoneCode();\r\n            $data['countryPhoneCode'] = $query->countryPhonCode;\r\n            //display the create user form\r\n            $this->load->view('temp/header');\r\n            $this->load->view('add_new_section_leader', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n\r\n    //This function is returning Choir_member id and roll number by class title , runing year\r\n    public function Choir_member_info() {\r\n        $Choir_id = $this->input->get('q', TRUE);\r\n        $query = $this->common->getWhere('Choir', 'id', $Choir_id);\r\n        foreach ($query as $row) {\r\n            $data = $row;\r\n        }\r\n        $Choir_code = $data['ChoirCode'];\r\n        //making here Choir Section fild.\r\n        if (!empty($data['section'])) {\r\n            $section = $data['section'];\r\n            $sectionArray = explode(\",\", $section);\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">section <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select name=\"section\" class=\"form-control\">\r\n                                <option value=\"\">Select one</option>';\r\n            foreach ($sectionArray as $sec) {\r\n                echo '<option value=\"' . $sec . '\">' . $sec . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                    </div>';\r\n        } else {\r\n            $section = 'This class has no section.';\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>Info!</strong> ' . $section . '\r\n                        </div></div></div>';\r\n        }\r\n\r\n        //making here Choir_memberID Unick number.\r\n        if (strlen($Choir_code) == 1) {\r\n            $ChoirId = '0' . $Choir_code;\r\n        } elseif (strlen($Choir_code) == 2) {\r\n            $ChoirId = $Choir_code;\r\n        }\r\n        $roll = $this->common->rollNumber($Choir_id);\r\n        if (strlen($roll) == 1) {\r\n            $rollNumber = '00' . $roll;\r\n        } elseif (strlen($roll) == 2) {\r\n            $rollNumber = '0' . $roll;\r\n        } elseif (strlen($roll) == 3) {\r\n            $rollNumber = $roll;\r\n        }\r\n        $finalChoir_memberId = date(\"Y\") . $ChoirId . $rollNumber;\r\n\r\n        echo '<div class=\"form-group\">\r\n                    <label class=\"col-md-3 control-label\">Choir_member\\'s ID <span class=\"requiredStar\"> * </span></label>\r\n                    <div class=\"col-md-6\">\r\n                        <input type=\"text\" name=\"Choir_member_id\" class=\"form-control\" value=\"' . $finalChoir_memberId . '\" readonly>\r\n                    </div>\r\n                </div>';\r\n\r\n\r\n        //making here Choir Roll Number fild.\r\n        echo '<div class=\"form-group\">\r\n                    <label class=\"col-md-3 control-label\">Roll Number <span class=\"requiredStar\"> * </span></label>\r\n                    <div class=\"col-md-6\">\r\n                        <input type=\"text\" name=\"roll_number\" class=\"form-control\" value=\"' . $rollNumber . '\" readonly>\r\n                    </div>\r\n                </div>';\r\n    }\r\n\r\n    public function Section_trainer_info() {\r\n        $Choir_id = $this->input->get('q', TRUE);\r\n        $query = $this->common->getWhere('Choir', 'id', $Choir_id);\r\n        error_log(\"Choir ID: \" . $Choir_id);\r\n\r\n        foreach ($query as $row) {\r\n            $data = $row;\r\n        }\r\n        $Choir_code = $data['ChoirCode'];\r\n        //making here Choir Section fild.\r\n        if (!empty($data['section'])) {\r\n            $section = $data['section'];\r\n            $sectionArray = explode(\",\", $section);\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">section <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select name=\"section\" class=\"form-control\">\r\n                                <option value=\"\">Select one</option>';\r\n            foreach ($sectionArray as $sec) {\r\n                echo '<option value=\"' . $sec . '\">' . $sec . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                    </div>';\r\n        } else {\r\n            $section = 'This class has no section.';\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>Info!</strong> ' . $section . '\r\n                        </div></div></div>';\r\n        }\r\n\r\n       \r\n       \r\n    }\r\n\r\n    //This function is using for add new section_trainers\r\n    function addSection_trainers() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            // Fetch Choir ID and Section\r\n        $Choir_id = $this->db->escape_like_str($this->input->post('Choir', TRUE));\r\n         $Choir_title = $this->common->Choir_title($Choir_id);\r\n\r\n$section = $this->db->escape_like_str($this->input->post('section', TRUE));\r\n\r\n// Include these in your data array for database insertion\r\n$additional_data['Choir_id'] = $Choir_id;\r\n$additional_data['section'] = $section;\r\n\r\n$section_leadersInfo['Choir_id'] = $Choir_id;\r\n$section_leadersInfo['section'] = $section;\r\n$section_leadersInfo['Choir_title'] = $Choir_title;\r\n\r\n$username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n$email = strtolower($this->input->post('email', TRUE));\r\n$password = $this->input->post('password', TRUE);\r\n//Here is uploading the Choir_member's photo.\r\n$config['upload_path'] = './assets/uploads/';\r\n$config['allowed_types'] = 'gif|jpg|png';\r\n$config['max_size'] = '10000';\r\n$config['max_width'] = '10240';\r\n$config['max_height'] = '7680';\r\n$config['encrypt_name'] = TRUE;\r\n$this->load->library('upload', $config);\r\n$this->upload->do_upload();\r\n$uploadFileInfo = $this->upload->data();\r\n$this->upload->display_errors('<p>', '</p>');\r\n\r\n$phone = $this->input->post('phoneCode', TRUE) . '' . $this->input->post('phone', TRUE);\r\n$additional_data = array(\r\n'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n'phone' => $this->db->escape_like_str($phone),\r\n'profile_image' => $this->db->escape_like_str($uploadFileInfo['file_name'])\r\n);\r\n$group_ids = array(\r\n'group_id' => $this->db->escape_like_str(5)\r\n);\r\nif ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n//This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n$userid = $this->common->usersId();\r\n$additionalData1 = array(\r\n    'user_id' => $this->db->escape_like_str($userid),\r\n    'Choir_member_id' => $this->db->escape_like_str($this->input->post('Choir_memberId', TRUE)),\r\n    'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n    'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n    'section_trainers_name' => $this->db->escape_like_str($username),\r\n    'level' => $this->db->escape_like_str($this->input->post('guardianLevel', TRUE)),\r\n    'email' => $this->db->escape_like_str($this->input->post('email', TRUE)),\r\n    'phone' => $this->db->escape_like_str($phone)\r\n);\r\n$this->db->insert('section_trainers_info', $additionalData1);\r\n$section_trainers_access = array(\r\n    'user_id' => $this->db->escape_like_str($userid),\r\n    'group_id' => $this->db->escape_like_str(5),\r\n    'das_top_info' => $this->db->escape_like_str(0),\r\n    'Choir_title' => $this->db->escape_like_str($Choir_title),\r\n    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n    'section' => $this->db->escape_like_str($this->input->post('section', TRUE)),\r\n    'das_grab_chart' => $this->db->escape_like_str(0),\r\n    'das_Choir_info' => $this->db->escape_like_str(0),\r\n    'das_message' => $this->db->escape_like_str(1),\r\n    'das_employ_attend' => $this->db->escape_like_str(0),\r\n    'das_notice' => $this->db->escape_like_str(1),\r\n    'das_calender' => $this->db->escape_like_str(1),\r\n    'admission' => $this->db->escape_like_str(0),\r\n    'all_Choir_member_info' => $this->db->escape_like_str(0),\r\n    'stud_edit_delete' => $this->db->escape_like_str(0),\r\n    'stu_own_info' => $this->db->escape_like_str(1),\r\n    'section_leader_info' => $this->db->escape_like_str(1),\r\n    'add_section_leader' => $this->db->escape_like_str(0),\r\n    'section_leader_details' => $this->db->escape_like_str(0),\r\n    'section_leader_edit_delete' => $this->db->escape_like_str(0),\r\n    'all_section_trainers_info' => $this->db->escape_like_str(0),\r\n    'own_section_trainers_info' => $this->db->escape_like_str(1),\r\n    'make_section_trainers_id' => $this->db->escape_like_str(0),\r\n    'section_trainers_edit_dlete' => $this->db->escape_like_str(0),\r\n    'add_new_Choir' => $this->db->escape_like_str(0),\r\n    'all_Choir_info' => $this->db->escape_like_str(0),\r\n    'Choir_details' => $this->db->escape_like_str(0),\r\n    'Choir_delete' => $this->db->escape_like_str(0),\r\n    'Choir_promotion' => $this->db->escape_like_str(0),\r\n    'assin_optio_sub' => $this->db->escape_like_str(0),\r\n    'add_Choir_routine' => $this->db->escape_like_str(0),\r\n    'own_Choir_routine' => $this->db->escape_like_str(1),\r\n    'all_Choir_routine' => $this->db->escape_like_str(0),\r\n    'rutin_edit_delete' => $this->db->escape_like_str(0),\r\n    'attendance_preview' => $this->db->escape_like_str(0),\r\n    'take_studence_atten' => $this->db->escape_like_str(0),\r\n    'edit_Choir_member_atten' => $this->db->escape_like_str(0),\r\n    'add_employee' => $this->db->escape_like_str(0),\r\n    'employee_list' => $this->db->escape_like_str(0),\r\n    'employ_attendance' => $this->db->escape_like_str(0),\r\n    'empl_atte_view' => $this->db->escape_like_str(0),\r\n    'add_song' => $this->db->escape_like_str(0),\r\n    'all_song' => $this->db->escape_like_str(0),\r\n    'make_suggestion' => $this->db->escape_like_str(0),\r\n    'all_suggestion' => $this->db->escape_like_str(0),\r\n    'own_suggestion' => $this->db->escape_like_str(1),\r\n    'add_rehearsal_gread' => $this->db->escape_like_str(0),\r\n    'rehearsal_gread' => $this->db->escape_like_str(0),\r\n    'add_rehearsal_routin' => $this->db->escape_like_str(0),\r\n    'all_rehearsal_routine' => $this->db->escape_like_str(0),\r\n    'own_rehearsal_routine' => $this->db->escape_like_str(1),\r\n    'rehearsal_attend_preview' => $this->db->escape_like_str(0),\r\n    'approve_result' => $this->db->escape_like_str(0),\r\n    'view_result' => $this->db->escape_like_str(1),\r\n    'all_mark_sheet' => $this->db->escape_like_str(0),\r\n    'own_mark_sheet' => $this->db->escape_like_str(1),\r\n    'take_rehearsal_attend' => $this->db->escape_like_str(0),\r\n    'change_rehearsal_attendance' => $this->db->escape_like_str(0),\r\n    'make_result' => $this->db->escape_like_str(0),\r\n    'add_category' => $this->db->escape_like_str(0),\r\n    'all_category' => $this->db->escape_like_str(1),\r\n    'edit_delete_category' => $this->db->escape_like_str(0),\r\n    'add_resources' => $this->db->escape_like_str(0),\r\n    'all_resources' => $this->db->escape_like_str(1),\r\n    'edit_delete_resources' => $this->db->escape_like_str(0),\r\n    'add_library_mem' => $this->db->escape_like_str(0),\r\n    'memb_list' => $this->db->escape_like_str(0),\r\n    'issu_return' => $this->db->escape_like_str(0),\r\n    'add_concerts' => $this->db->escape_like_str(0),\r\n    'add_set_dormi' => $this->db->escape_like_str(0),\r\n    'set_member_seat' => $this->db->escape_like_str(0),\r\n    'dormi_report' => $this->db->escape_like_str(1),\r\n    'add_transport' => $this->db->escape_like_str(0),\r\n    'all_transport' => $this->db->escape_like_str(1),\r\n    'transport_edit_dele' => $this->db->escape_like_str(0),\r\n    'add_account_title' => $this->db->escape_like_str(0),\r\n    'edit_dele_acco' => $this->db->escape_like_str(0),\r\n    'trensection' => $this->db->escape_like_str(0),\r\n    'fee_collection' => $this->db->escape_like_str(0),\r\n    'all_slips' => $this->db->escape_like_str(0),\r\n    'own_slip' => $this->db->escape_like_str(1),\r\n    'slip_edit_delete' => $this->db->escape_like_str(0),\r\n    'pay_salary' => $this->db->escape_like_str(0),\r\n    'creat_notice' => $this->db->escape_like_str(0),\r\n    'send_message' => $this->db->escape_like_str(0),\r\n    'vendor' => $this->db->escape_like_str(0),\r\n    'delet_vendor' => $this->db->escape_like_str(0),\r\n    'add_inv_cat' => $this->db->escape_like_str(0),\r\n    'inve_item' => $this->db->escape_like_str(0),\r\n    'delete_inve_ite' => $this->db->escape_like_str(0),\r\n    'delete_inv_cat' => $this->db->escape_like_str(0),\r\n    'inve_issu' => $this->db->escape_like_str(0),\r\n    'delete_inven_issu' => $this->db->escape_like_str(0),\r\n    'check_leav_appli' => $this->db->escape_like_str(0),\r\n    'setting_manage_user' => $this->db->escape_like_str(0),\r\n    'setting_accounts' => $this->db->escape_like_str(0),\r\n    'other_setting' => $this->db->escape_like_str(0),\r\n    'front_setings' => $this->db->escape_like_str(0),\r\n);\r\nif ($this->db->insert('role_based_access', $section_trainers_access)) {\r\n    //check to see if we are creating the user\r\n    //redirect them back to the admin page\r\n    $this->session->set_flashdata('message', $this->ion_auth->messages());\r\n\r\n    //redirect(\"section_trainers/section_trainersInformation\", 'refresh');\r\n\r\n    $data['s_Choir'] = $this->common->getAllData('Choir');\r\n    $data['success'] = '<div class=\"col-md-12\"><div class=\"alert alert-info alert-dismissable admisionSucceassMessageFont\">\r\n                                        <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n                                        <strong>Success!</strong> The section_trainers profile made successfully.\r\n                                </div></div>';\r\n    $this->load->view('temp/header');\r\n    $this->load->view('makeProfile', $data);\r\n    $this->load->view('temp/footer');\r\n}\r\n}\r\n} else {\r\n$query = $this->common->countryPhoneCode();\r\n$data['countryPhoneCode'] = $query->countryPhonCode;\r\n$data['s_Choir'] = $this->common->getAllData('Choir');\r\n$this->load->view('temp/header');\r\n$this->load->view('makeProfile', $data);\r\n$this->load->view('temp/footer');\r\n}\r\n}\r\n\r\n    //This function will give the Choir_member information from Choir_memberID\r\n    public function Choir_memberInfoById() {\r\n        $Choir_memberId = $this->input->get('q', TRUE);\r\n        $query = $this->common->stuInfoId($Choir_memberId);\r\n        if (empty($query)) {\r\n            echo '<div class=\"form-group\">\r\n                    <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-danger\">\r\n                            <strong>Info:</strong> This Choir_member ID <strong>' . $Choir_memberId . '</strong> is not matching in our Choir_member\\'s list.\r\n                    </div></div></div>';\r\n        } else {\r\n            echo '<div class=\"col-md-9 col-md-offset-1 stuInfoIdBox\">\r\n                    <div class=\"col-md-10\">\r\n                        <div class=\"form-group\">\r\n                            <label class=\"col-md-3 control-label\">Choir_member\\'s Name <span class=\"requiredStar\">  </span></label>\r\n                            <div class=\"col-md-9\">\r\n                                <input type=\"text\" class=\"form-control\" name=\"Choir_memberName\" value=\"' . $query->Choir_member_nam . '\" readonly>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label class=\"col-md-3 control-label\">Choir <span class=\"requiredStar\">  </span></label>\r\n                            <div class=\"col-md-9\">\r\n                                <input type=\"text\" class=\"form-control\" name=\"Choir_title\" value=\"' . $this->common->Choir_title($query->Choir_id) . '\" readonly>\r\n                            </div>\r\n                        </div>\r\n                        <input type=\"hidden\" name=\"Choir_id\" value=\"' . $query->Choir_id . '\">\r\n                    </div>\r\n                    <div class=\"col-md-2\">\r\n                        <img src=\"assets/uploads/' . $query->Choir_member_photo . '\" class=\"img-responsive\" alt=\"\"><br>\r\n                    </div>\r\n                </div>';\r\n        }\r\n    }\r\n\r\n    public function Choir_InfoById() {\r\n        $Choir_id = $this->input->get('q', TRUE);\r\n        if (empty($Choir_id)) {\r\n            echo 'No valid Choir ID provided.';\r\n            return; // Exit if no ID is provided\r\n        }\r\n        $query = $this->common->ChoirIdInfo($Choir_id);\r\n        // rest of the function...\r\n    }\r\n    \r\n\r\n\r\n    //Whene give the Choir_member id from the frontend input file.\r\n    //Then this function return Choir_member information\r\n//    public function ajaxChoir_memberInfo() {\r\n//        $ChoirTitle = $this->input->get('q', TRUE);\r\n//        $query = $this->common->getWhere('Choir_member_info', 'Choir', $ChoirTitle);\r\n//        foreach ($query as $row) {\r\n//            $data[] = $row;\r\n//        }\r\n//        if (!empty($data)) {\r\n//            echo '<div class=\"form-group\">\r\n//                        <label class=\"col-md-3 control-label\"></label>\r\n//                        <div class=\"col-md-6\">\r\n//                            <select name=\"Choir_memberID\" class=\"form-control\">\r\n//                                <option value=\"all\">Select Choir_member ID</option>';\r\n//            foreach ($data as $sec) {\r\n//                echo '<option value=\"' . $sec['Choir_member_id'] . '\">' . $sec['Choir_member_nam'] . '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ID - <span>' . $sec['Choir_member_id'] . '</span></option>';\r\n//            }\r\n//            echo '</select></div>\r\n//                    </div>';\r\n//        } else {\r\n//            echo '<div class=\"form-group\">\r\n//                    <label class=\"col-md-3 control-label\"></label>\r\n//                        <div class=\"col-md-6\">\r\n//                        <div class=\"alert alert-danger\">\r\n//                            <strong>Info:</strong> This Choir has no Choir_member.\r\n//                    </div></div></div>';\r\n//        }\r\n//    }\r\n    //This function will add new users in this system as Accountent,Libreament &Drivers etc\r\n    public function addNewUsers() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $this->load->database();\r\n            $tables = $this->config->item('tables', 'ion_auth');\r\n            $edu_1 = '';\r\n            $edu_2 = '';\r\n            $edu_3 = '';\r\n            $edu_4 = '';\r\n            $edu_5 = '';\r\n            $dd_1 = $this->input->post('dd_1', TRUE);\r\n            if (!empty($dd_1)) {\r\n                $this->form_validation->set_rules('scu_1', 'School/College/University 1st fild', 'required');\r\n                $this->form_validation->set_rules('result_1', 'Result  1st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_1', 'Passing year 1st fild', 'required');\r\n                $edu_1 = $this->input->post('dd_1', TRUE) . ',' . $this->input->post('scu_1', TRUE) . ',' . $this->input->post('result_1', TRUE) . ',' . $this->input->post('paYear_1', TRUE);\r\n            }\r\n\r\n            $dd_2 = $this->input->post('dd_2', TRUE);\r\n            if (!empty($dd_2)) {\r\n                $this->form_validation->set_rules('scu_2', 'School/College/University 2st fild', 'required');\r\n                $this->form_validation->set_rules('result_2', 'Result  2st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_2', 'Passing year 2st fild', 'required');\r\n                $edu_2 = $this->input->post('dd_2', TRUE) . ',' . $this->input->post('scu_2', TRUE) . ',' . $this->input->post('result_2', TRUE) . ',' . $this->input->post('paYear_2', TRUE);\r\n            }\r\n\r\n            $dd_3 = $this->input->post('dd_3', TRUE);\r\n            if (!empty($dd_3)) {\r\n                $this->form_validation->set_rules('scu_3', 'School/College/University 3st fild', 'required');\r\n                $this->form_validation->set_rules('result_3', 'Result  3st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_3', 'Passing year 3st fild', 'required');\r\n                $edu_3 = $this->input->post('dd_3', TRUE) . ',' . $this->input->post('scu_3', TRUE) . ',' . $this->input->post('result_3', TRUE) . ',' . $this->input->post('paYear_3', TRUE);\r\n            }\r\n\r\n            $dd_4 = $this->input->post('dd_4', TRUE);\r\n            if (!empty($dd_4)) {\r\n                $this->form_validation->set_rules('scu_4', 'School/College/University 4st fild', 'required');\r\n                $this->form_validation->set_rules('result_4', 'Result  4st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_4', 'Passing year 4st fild', 'required');\r\n                $edu_4 = $this->input->post('dd_4', TRUE) . ',' . $this->input->post('scu_4', TRUE) . ',' . $this->input->post('result_4', TRUE) . ',' . $this->input->post('paYear_4', TRUE);\r\n            }\r\n\r\n            $dd_5 = $this->input->post('dd_5', TRUE);\r\n            if (!empty($dd_5)) {\r\n                $this->form_validation->set_rules('scu_5', 'School/College/University 5st fild', 'required');\r\n                $this->form_validation->set_rules('result_5', 'Result  5st fild', 'required');\r\n                $this->form_validation->set_rules('paYear_5', 'Passing year 5st fild', 'required');\r\n                $edu_5 = $this->input->post('dd_5', TRUE) . ',' . $this->input->post('scu_5', TRUE) . ',' . $this->input->post('result_5', TRUE) . ',' . $this->input->post('paYear_5', TRUE);\r\n            }\r\n\r\n            $username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n            $email = strtolower($this->input->post('email', TRUE));\r\n            $password = $this->input->post('password', TRUE);\r\n            $phone = $this->input->post('phoneCode', TRUE) . '' . $this->input->post('phone', TRUE);\r\n\r\n            //here is upload the section_leader's photo.\r\n            $config['upload_path'] = './assets/uploads/';\r\n            $config['allowed_types'] = 'gif|jpg|png';\r\n            $config['max_size'] = '10000';\r\n            $config['max_width'] = '10240';\r\n            $config['max_height'] = '7680';\r\n            $config['encrypt_name'] = TRUE;\r\n\r\n            $this->load->library('upload', $config);\r\n            $this->upload->do_upload();\r\n            $uploadFileInfo = $this->upload->data();\r\n\r\n            //This array information's are sending to \"user\" table as a core information as a user this system.\r\n            $additional_data = array(\r\n                'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n                'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n                'phone' => $this->db->escape_like_str($phone),\r\n                'profile_image' => $this->db->escape_like_str($uploadFileInfo['file_name']),\r\n                'leave_status' => $this->db->escape_like_str('Available'),\r\n                'user_status' => $this->db->escape_like_str('Employee')\r\n            );\r\n\r\n            $group_ids = array(\r\n                'group_id' => $this->db->escape_like_str($this->input->post('group', TRUE))\r\n            );\r\n            if ($this->ion_auth->register($username, $password, $email, $additional_data, $group_ids)) {\r\n                //This the next user id in users table. If we \" -1 \" from it we can get current user id \r\n                $userid = $this->common->usersId();\r\n                //This array information's are sending to \"section_leaders_info\" table.\r\n                $additional_data2 = array(\r\n                    'user_id' => $this->db->escape_like_str($userid),\r\n                    'full_name' => $this->db->escape_like_str($username),\r\n                    'farther_name' => $this->db->escape_like_str($this->input->post('father_name', TRUE)),\r\n                    'mother_name' => $this->db->escape_like_str($this->input->post('mother_name', TRUE)),\r\n                    'birth_date' => $this->db->escape_like_str($this->input->post('birthdate', TRUE)),\r\n                    'sex' => $this->db->escape_like_str($this->input->post('sex', TRUE)),\r\n                    'present_address' => $this->db->escape_like_str($this->input->post('present_address', TRUE)),\r\n                    'permanent_address' => $this->db->escape_like_str($this->input->post('permanent_address', TRUE)),\r\n                    'group_id' => $this->db->escape_like_str($this->input->post('group', TRUE)),\r\n                    'group_id' => $this->db->escape_like_str($this->input->post('group', TRUE)),\r\n                    'working_hour' => $this->db->escape_like_str($this->input->post('workingHoure', TRUE)),\r\n                    'educational_qualification_1' => $this->db->escape_like_str($edu_1),\r\n                    'educational_qualification_2' => $this->db->escape_like_str($edu_2),\r\n                    'educational_qualification_3' => $this->db->escape_like_str($edu_3),\r\n                    'educational_qualification_4' => $this->db->escape_like_str($edu_4),\r\n                    'educational_qualification_5' => $this->db->escape_like_str($edu_5),\r\n                    'users_photo' => $this->db->escape_like_str($uploadFileInfo['file_name']),\r\n                    'cv' => $this->db->escape_like_str($this->input->post('cv', TRUE)),\r\n                    'educational_certificat' => $this->db->escape_like_str($this->input->post('educational_certificat', TRUE)),\r\n                    'exprieance_certificatte' => $this->db->escape_like_str($this->input->post('exc', TRUE)),\r\n                    'files_info' => $this->db->escape_like_str($this->input->post('submited_info', TRUE)),\r\n                    'phone' => $this->db->escape_like_str($phone)\r\n                );\r\n                $user_access = array(\r\n                    'user_id' => $this->db->escape_like_str($userid),\r\n                    'group_id' => $this->db->escape_like_str($this->input->post('group', TRUE)),\r\n                    'das_top_info' => $this->db->escape_like_str(0),\r\n                    'das_grab_chart' => $this->db->escape_like_str(0),\r\n                    'das_Choir_info' => $this->db->escape_like_str(0),\r\n                    'das_message' => $this->db->escape_like_str(0),\r\n                    'das_employ_attend' => $this->db->escape_like_str(0),\r\n                    'das_notice' => $this->db->escape_like_str(0),\r\n                    'das_calender' => $this->db->escape_like_str(0),\r\n                    'admission' => $this->db->escape_like_str(0),\r\n                    'all_Choir_member_info' => $this->db->escape_like_str(0),\r\n                    'stud_edit_delete' => $this->db->escape_like_str(0),\r\n                    'stu_own_info' => $this->db->escape_like_str(0),\r\n                    'section_leader_info' => $this->db->escape_like_str(0),\r\n                    'add_section_leader' => $this->db->escape_like_str(0),\r\n                    'section_leader_details' => $this->db->escape_like_str(0),\r\n                    'section_leader_edit_delete' => $this->db->escape_like_str(0),\r\n                    'all_section_trainers_info' => $this->db->escape_like_str(0),\r\n                    'own_section_trainers_info' => $this->db->escape_like_str(0),\r\n                    'make_section_trainers_id' => $this->db->escape_like_str(0),\r\n                    'section_trainers_edit_dlete' => $this->db->escape_like_str(0),\r\n                    'add_new_Choir' => $this->db->escape_like_str(0),\r\n                    'all_Choir_info' => $this->db->escape_like_str(0),\r\n                    'Choir_details' => $this->db->escape_like_str(0),\r\n                    'Choir_delete' => $this->db->escape_like_str(0),\r\n                    'Choir_promotion' => $this->db->escape_like_str(0),\r\n                    'assin_optio_sub' => $this->db->escape_like_str(0),\r\n                    'add_Choir_routine' => $this->db->escape_like_str(0),\r\n                    'own_Choir_routine' => $this->db->escape_like_str(0),\r\n                    'all_Choir_routine' => $this->db->escape_like_str(0),\r\n                    'rutin_edit_delete' => $this->db->escape_like_str(0),\r\n                    'attendance_preview' => $this->db->escape_like_str(0),\r\n                    'take_studence_atten' => $this->db->escape_like_str(0),\r\n                    'edit_Choir_member_atten' => $this->db->escape_like_str(0),\r\n                    'add_employee' => $this->db->escape_like_str(0),\r\n                    'employee_list' => $this->db->escape_like_str(0),\r\n                    'employ_attendance' => $this->db->escape_like_str(0),\r\n                    'empl_atte_view' => $this->db->escape_like_str(0),\r\n                    'add_song' => $this->db->escape_like_str(0),\r\n                    'all_song' => $this->db->escape_like_str(0),\r\n                    'make_suggestion' => $this->db->escape_like_str(0),\r\n                    'all_suggestion' => $this->db->escape_like_str(0),\r\n                    'own_suggestion' => $this->db->escape_like_str(0),\r\n                    'add_rehearsal_gread' => $this->db->escape_like_str(0),\r\n                    'rehearsal_gread' => $this->db->escape_like_str(0),\r\n                    'add_rehearsal_routin' => $this->db->escape_like_str(0),\r\n                    'all_rehearsal_routine' => $this->db->escape_like_str(0),\r\n                    'own_rehearsal_routine' => $this->db->escape_like_str(0),\r\n                    'rehearsal_attend_preview' => $this->db->escape_like_str(0),\r\n                    'approve_result' => $this->db->escape_like_str(0),\r\n                    'view_result' => $this->db->escape_like_str(0),\r\n                    'all_mark_sheet' => $this->db->escape_like_str(0),\r\n                    'own_mark_sheet' => $this->db->escape_like_str(0),\r\n                    'take_rehearsal_attend' => $this->db->escape_like_str(0),\r\n                    'change_rehearsal_attendance' => $this->db->escape_like_str(0),\r\n                    'make_result' => $this->db->escape_like_str(0),\r\n                    'add_category' => $this->db->escape_like_str(0),\r\n                    'all_category' => $this->db->escape_like_str(0),\r\n                    'edit_delete_category' => $this->db->escape_like_str(0),\r\n                    'add_resources' => $this->db->escape_like_str(0),\r\n                    'all_resources' => $this->db->escape_like_str(0),\r\n                    'edit_delete_resources' => $this->db->escape_like_str(0),\r\n                    'add_library_mem' => $this->db->escape_like_str(0),\r\n                    'memb_list' => $this->db->escape_like_str(0),\r\n                    'issu_return' => $this->db->escape_like_str(0),\r\n                    'add_concerts' => $this->db->escape_like_str(0),\r\n                    'add_set_dormi' => $this->db->escape_like_str(0),\r\n                    'set_member_seat' => $this->db->escape_like_str(0),\r\n                    'dormi_report' => $this->db->escape_like_str(0),\r\n                    'add_transport' => $this->db->escape_like_str(0),\r\n                    'all_transport' => $this->db->escape_like_str(0),\r\n                    'transport_edit_dele' => $this->db->escape_like_str(0),\r\n                    'add_account_title' => $this->db->escape_like_str(0),\r\n                    'edit_dele_acco' => $this->db->escape_like_str(0),\r\n                    'trensection' => $this->db->escape_like_str(0),\r\n                    'fee_collection' => $this->db->escape_like_str(0),\r\n                    'all_slips' => $this->db->escape_like_str(0),\r\n                    'own_slip' => $this->db->escape_like_str(0),\r\n                    'slip_edit_delete' => $this->db->escape_like_str(0),\r\n                    'pay_salary' => $this->db->escape_like_str(0),\r\n                    'creat_notice' => $this->db->escape_like_str(0),\r\n                    'send_message' => $this->db->escape_like_str(0),\r\n                    'vendor' => $this->db->escape_like_str(0),\r\n                    'delet_vendor' => $this->db->escape_like_str(0),\r\n                    'add_inv_cat' => $this->db->escape_like_str(0),\r\n                    'inve_item' => $this->db->escape_like_str(0),\r\n                    'delete_inve_ite' => $this->db->escape_like_str(0),\r\n                    'delete_inv_cat' => $this->db->escape_like_str(0),\r\n                    'inve_issu' => $this->db->escape_like_str(0),\r\n                    'delete_inven_issu' => $this->db->escape_like_str(0),\r\n                    'check_leav_appli' => $this->db->escape_like_str(0),\r\n                    'setting_manage_user' => $this->db->escape_like_str(0),\r\n                    'setting_accounts' => $this->db->escape_like_str(0),\r\n                    'other_setting' => $this->db->escape_like_str(0),\r\n                    'front_setings' => $this->db->escape_like_str(0),\r\n                );\r\n                $this->db->insert('userinfo', $additional_data2);\r\n                if ($this->db->insert('role_based_access', $user_access)) {\r\n                    //Load the Section_leaders Information's page after Add New Section_leader.\r\n                    redirect('users/allUserInafo', 'refresh');\r\n                }\r\n            } else {\r\n                $query = $this->common->countryPhoneCode();\r\n                $data['countryPhoneCode'] = $query->countryPhonCode;\r\n                //display the create user form\r\n                $this->load->view('temp/header');\r\n                $this->load->view('addNewUser', $data);\r\n                $this->load->view('temp/footer');\r\n            }\r\n        } else {\r\n            $query = $this->common->countryPhoneCode();\r\n            $data['countryPhoneCode'] = $query->countryPhonCode;\r\n            //display the create user form\r\n            $this->load->view('temp/header');\r\n            $this->load->view('addNewUser', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n\r\n    //This function will return user group id & title for adding new user.\r\n    public function newUserGrope() {\r\n        $groupId = $this->input->get('q', TRUE);\r\n        if ($groupId == '6') {\r\n            echo '<input type=\"hidden\" name=\"group\" value=\"6\">';\r\n            echo '<input type=\"hidden\" name=\"groupTitle\" value=\"Accountant\">';\r\n        } elseif ($groupId == '7') {\r\n            echo '<input type=\"hidden\" name=\"group\" value=\"7\">';\r\n            echo '<input type=\"hidden\" name=\"groupTitle\" value=\"Library Man\">';\r\n        } elseif ($groupId == '8') {\r\n            echo '<input type=\"hidden\" name=\"group\" value=\"8\">';\r\n            echo '<input type=\"hidden\" name=\"groupTitle\" value=\"Car Driver\">';\r\n        } elseif ($groupId == '9') {\r\n            echo '<input type=\"hidden\" name=\"group\" value=\"9\">';\r\n            echo '<input type=\"hidden\" name=\"groupTitle\" value=\"4th Choir Employee\">';\r\n        }\r\n    }\r\n\r\n    //This function returan all user's informations\r\n    public function allUserInafo() {\r\n        $data = array();\r\n        $data['usersInfo'] = $this->common->getAllData('userinfo');\r\n        $this->load->view('temp/header');\r\n        $this->load->view('allUserInfo', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n\r\n    //This function returan all user's informations detalis\r\n    public function allUserInafoDetails() {\r\n        $id = $this->input->get('id');\r\n        $userId = $this->input->get('uid');\r\n        $data['userinfo'] = $this->common->getWhere('userinfo', 'id', $id);\r\n        $data['user'] = $this->common->getWhere('users', 'id', $userId);\r\n        $this->load->view('temp/header');\r\n        $this->load->view('allUserInafoDetails', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n\r\n    //This function is using for editing a section_leader informations\r\n    //And admin an select group  \r\n    function edit_user() {\r\n        $userId = $this->input->get('uid');\r\n        $userInfoId = $this->input->get('id');\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $edu_1 = '';\r\n            $edu_2 = '';\r\n            $edu_3 = '';\r\n            $edu_4 = '';\r\n            $edu_5 = '';\r\n            if ($this->input->post('dd_1', TRUE)) {\r\n                $edu_1 = $this->input->post('dd_1') . ',' . $this->input->post('scu_1', TRUE) . ',' . $this->input->post('result_1', TRUE) . ',' . $this->input->post('paYear_1', TRUE);\r\n            }\r\n            if ($this->input->post('dd_2', TRUE)) {\r\n                $edu_2 = $this->input->post('dd_2') . ',' . $this->input->post('scu_2', TRUE) . ',' . $this->input->post('result_2', TRUE) . ',' . $this->input->post('paYear_2', TRUE);\r\n            }\r\n            if ($this->input->post('dd_3', TRUE)) {\r\n                $edu_3 = $this->input->post('dd_3') . ',' . $this->input->post('scu_3', TRUE) . ',' . $this->input->post('result_3', TRUE) . ',' . $this->input->post('paYear_3', TRUE);\r\n            }\r\n            if ($this->input->post('dd_4', TRUE)) {\r\n                $edu_4 = $this->input->post('dd_4') . ',' . $this->input->post('scu_4', TRUE) . ',' . $this->input->post('result_4', TRUE) . ',' . $this->input->post('paYear_4', TRUE);\r\n            }\r\n            if ($this->input->post('dd_5', TRUE)) {\r\n                $edu_5 = $this->input->post('dd_5') . ',' . $this->input->post('scu_5', TRUE) . ',' . $this->input->post('result_5', TRUE) . ',' . $this->input->post('paYear_5');\r\n            }\r\n            $username = $this->input->post('first_name') . ' ' . $this->input->post('last_name');\r\n\r\n            $phone = $this->input->post('phone', TRUE);\r\n//            $additional_data = array(\r\n//                'username' => $this->db->escape_like_str($username),\r\n//                'email' => $this->db->escape_like_str($this->input->post('email', TRUE)),\r\n//                'first_name' => $this->db->escape_like_str($this->input->post('first_name', TRUE)),\r\n//                'last_name' => $this->db->escape_like_str($this->input->post('last_name', TRUE)),\r\n//                'phone' => $this->db->escape_like_str($phone),\r\n//            );\r\n//\r\n//            $this->db->where('id', $userId);\r\n//            $this->db->update('users', $additional_data);\r\n\r\n            $additional_data2 = array(\r\n                'full_name' => $this->db->escape_like_str($username),\r\n                'farther_name' => $this->db->escape_like_str($this->input->post('father_name', TRUE)),\r\n                'mother_name' => $this->db->escape_like_str($this->input->post('mother_name', TRUE)),\r\n                'birth_date' => $this->db->escape_like_str($this->input->post('birthdate', TRUE)),\r\n                'sex' => $this->db->escape_like_str($this->input->post('sex', TRUE)),\r\n                'present_address' => $this->db->escape_like_str($this->input->post('present_address', TRUE)),\r\n                'permanent_address' => $this->db->escape_like_str($this->input->post('permanent_address', TRUE)),\r\n                'group_id' => $this->db->escape_like_str($this->input->post('group', TRUE)),\r\n                'group_id' => $this->db->escape_like_str($this->input->post('group', TRUE)),\r\n                'working_hour' => $this->db->escape_like_str($this->input->post('workingHoure', TRUE)),\r\n                'educational_qualification_1' => $this->db->escape_like_str($edu_1),\r\n                'educational_qualification_2' => $this->db->escape_like_str($edu_2),\r\n                'educational_qualification_3' => $this->db->escape_like_str($edu_3),\r\n                'educational_qualification_4' => $this->db->escape_like_str($edu_4),\r\n                'educational_qualification_5' => $this->db->escape_like_str($edu_5),\r\n//                'users_photo' => $this->db->escape_like_str($uploadFileInfo['file_name']),\r\n                'cv' => $this->db->escape_like_str($this->input->post('cv', TRUE)),\r\n                'educational_certificat' => $this->db->escape_like_str($this->input->post('educational_certificat', TRUE)),\r\n                'exprieance_certificatte' => $this->db->escape_like_str($this->input->post('exc', TRUE)),\r\n                'files_info' => $this->db->escape_like_str($this->input->post('submited_info', TRUE)),\r\n                'phone' => $this->db->escape_like_str($phone)\r\n            );\r\n            $this->db->where('id', $userInfoId);\r\n            $this->db->update('userinfo', $additional_data2);\r\n            redirect('users/allUserInafo', 'refresh');\r\n        } else {\r\n            //get all data about this section_leader from the \"user\" table\r\n            $data['userInfo'] = $this->common->getWhere('users', 'id', $userId);\r\n            $data['section_leaderInfo'] = $this->common->getWhere('userinfo', 'id', $userInfoId);\r\n\r\n            //get all groupe information and current group information to view file by \"$data\" array.\r\n            $data['groups'] = $this->ion_auth->groups()->result_array();\r\n            $data['currentGroups'] = $this->ion_auth->get_users_groups($userId)->result();\r\n\r\n            $this->load->view('temp/header');\r\n            $this->load->view('editUserInfo', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n\r\n    //This function is useing for delete a user.\r\n    public function section_leaderDelete() {\r\n        $userId = $this->input->get('uid');\r\n        $userInfoId = $this->input->get('id');\r\n\r\n        $this->db->delete('userinfo', array('id' => $userInfoId));\r\n        $this->db->delete('users', array('id' => $userId));\r\n\r\n        redirect('users/allUserInafo', 'refresh');\r\n    }\r\n\r\n    function test() {\r\n        $a = $this->common->usersId();\r\n        echo '<pre>';\r\n        echo $a;\r\n        echo '</pre>';\r\n    }\r\n\r\n}\r\n"
        }
    ]
}