{
    "sourceFile": "ISFM/modules/Rehearsal/controllers/Rehearsal.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1714943023299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1714943028563,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -613,9 +613,9 @@\n                 }\r\n             } elseif ($check == 'No Any Rehearsal') {\r\n                 // $info['ChoirTitle'] = $ChoirTitle;\r\n                 $this->load->view('temp/header');\r\n-                $this->load->view('attendanceFaild', $info);\r\n+                // $this->load->view('attendanceFaild', $info);\r\n                 $this->load->view('temp/footer');\r\n             }\r\n         }\r\n     }\r\n"
                },
                {
                    "date": 1714943054260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -608,14 +608,14 @@\n                     $this->load->view('temp/header');\r\n                     $this->load->view('rehearsalAttendance', $data);\r\n                     $this->load->view('temp/footer');\r\n                 } else {\r\n-                    // echo $ChoirTitle . 'has no any Choir_member.';\r\n+                    echo $ChoirTitle . 'has no any Choir_member.';\r\n                 }\r\n             } elseif ($check == 'No Any Rehearsal') {\r\n                 // $info['ChoirTitle'] = $ChoirTitle;\r\n                 $this->load->view('temp/header');\r\n-                // $this->load->view('attendanceFaild', $info);\r\n+                $this->load->view('attendanceFaild', $info);\r\n                 $this->load->view('temp/footer');\r\n             }\r\n         }\r\n     }\r\n"
                },
                {
                    "date": 1714943178091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -608,14 +608,14 @@\n                     $this->load->view('temp/header');\r\n                     $this->load->view('rehearsalAttendance', $data);\r\n                     $this->load->view('temp/footer');\r\n                 } else {\r\n-                    echo $ChoirTitle . 'has no any Choir_member.';\r\n+                    echo 'has no any Choir_member.';\r\n                 }\r\n             } elseif ($check == 'No Any Rehearsal') {\r\n                 // $info['ChoirTitle'] = $ChoirTitle;\r\n                 $this->load->view('temp/header');\r\n-                $this->load->view('attendanceFaild', $info);\r\n+                $this->load->view('attendanceFaild');\r\n                 $this->load->view('temp/footer');\r\n             }\r\n         }\r\n     }\r\n"
                },
                {
                    "date": 1714943400694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1168 @@\n+<?php\r\n+if (!defined('BASEPATH')) {\r\n+    exit('No direct script access allowed');\r\n+}\r\n+class Rehearsal extends MX_Controller {\r\n+\r\n+    /**\r\n+     * This controller is using for \r\n+     *\r\n+     * Maps to the following URL\r\n+     * \t\thttp://rehearsalple.com/index.php/rehearsal\r\n+     * \t- or -  \r\n+     * \t\thttp://rehearsalple.com/index.php/rehearsal/<method_name>\r\n+     */\r\n+    function __construct() {\r\n+        parent::__construct();\r\n+        $this->lang->load('auth');\r\n+        $this->load->model('rehearsalmodel');\r\n+        if (!$this->ion_auth->logged_in()) {\r\n+            redirect('auth/login');\r\n+        }\r\n+    }\r\n+    //This function load all rehearsal grade and point\r\n+    public function rehearsalGread() {\r\n+        $data['grade'] = $this->common->getAllData('rehearsal_grade');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('rehearsalGread', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //THis function add new rehearsal grade\r\n+    public function addRehearsalGread() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $gradeName = $this->input->post('gradeName', TRUE);\r\n+            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n+            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n+            $nameTo = $this->input->post('nameTo', TRUE);\r\n+\r\n+            $data = array(\r\n+                'grade_name' => $this->db->escape_like_str($gradeName),\r\n+                'point' => $this->db->escape_like_str($gradePoint),\r\n+                'number_form' => $this->db->escape_like_str($numberFrom),\r\n+                'number_to' => $this->db->escape_like_str($nameTo)\r\n+            );\r\n+            $this->db->insert('rehearsal_grade', $data);\r\n+\r\n+            redirect('rehearsal/rehearsalGread', 'refresh');\r\n+        } else {\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('addRehearsalGrade');\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will edit rehearsal grade and point\r\n+    public function editGrade() {\r\n+        $id = $this->input->get('id');\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $gradeName = $this->input->post('gradeName', TRUE);\r\n+            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n+            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n+            $nameTo = $this->input->post('nameTo', TRUE);\r\n+\r\n+            $editData = array(\r\n+                'grade_name' => $this->db->escape_like_str($gradeName),\r\n+                'point' => $this->db->escape_like_str($gradePoint),\r\n+                'number_form' => $this->db->escape_like_str($numberFrom),\r\n+                'number_to' => $this->db->escape_like_str($nameTo)\r\n+            );\r\n+\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('rehearsal_grade', $editData)) {\r\n+                redirect('rehearsal/rehearsalGread', 'refresh');\r\n+            }\r\n+        } else {\r\n+            $data['gradInfo'] = $this->common->getWhere('rehearsal_grade', 'id', $id);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('editGrade', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function can delete rehearsal grade in this system\r\n+    public function deleteGrade() {\r\n+        $id = $this->input->get('id');\r\n+        if ($this->db->delete('rehearsal_grade', array('id' => $id))) {\r\n+            redirect('rehearsal/rehearsalGread', 'refresh');\r\n+        }\r\n+    }\r\n+    //This function is using for decleration new rehearsal for nay class.\r\n+    public function addRehearsal() {\r\n+        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n+            $startDate = $this->input->post('startDate', TRUE);\r\n+            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+            $totleTime = $this->input->post('totleTime', TRUE);\r\n+            $rehearsalInfo = array(\r\n+                'year' => $this->db->escape_like_str(date('Y')),\r\n+                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                'start_date' => $this->db->escape_like_str($startDate),\r\n+                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                'total_time' => $this->db->escape_like_str($totleTime),\r\n+                'publish' => $this->db->escape_like_str('Not Publish'),\r\n+                'final' => $this->db->escape_like_str($this->input->post('final', TRUE)),\r\n+                'status' => $this->db->escape_like_str('NoResult')\r\n+            );\r\n+            //Here is adding an rehearsal information into database\r\n+            if ($this->db->insert('add_rehearsal', $rehearsalInfo)) {\r\n+                $data['successMessage'] = '<div class=\"alert alert-success\">\r\n+                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n+                                                <strong>' . lang('success') . '</strong> ' . lang('exac_1') . '\" ' . $rehearsalTitle . ' \" ' . lang('exac_2') . ' \"' . $this->common->Choir_title($Choir_id) . '\" ' . lang('exac_3') . '\r\n+                                        </div>';\r\n+                $data['rehearsalInfo'] = $this->common->getAllData('add_rehearsal');\r\n+                $data['song'] = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n+                $data['weeklyDay'] = $this->common->getAllData('config_week_day');\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('addRutinSong', $data);\r\n+                $this->load->view('temp/footer');\r\n+            }\r\n+        } else {\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('addRehearsalRutine', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will complete an rehearsal routine after decletration that rehearsal.\r\n+    public function completRehearsalRoutin() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+            //this is the 1st song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate', TRUE);\r\n+                $song = $this->input->post('song', TRUE);\r\n+                $songCode = $this->input->post('songCode', TRUE);\r\n+                $romeNo = $this->input->post('romeNo', TRUE);\r\n+                $starTima = $this->input->post('starTima', TRUE);\r\n+                $endTima = $this->input->post('endTima', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 2nd song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_2', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_2', TRUE);\r\n+                $song = $this->input->post('song_2', TRUE);\r\n+                $songCode = $this->input->post('song', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_2', TRUE);\r\n+                $starTima = $this->input->post('starTima_2', TRUE);\r\n+                $endTima = $this->input->post('endTima_2', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_2', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 3rd song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_3', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_3', TRUE);\r\n+                $song = $this->input->post('song_3', TRUE);\r\n+                $songe = $this->input->post('songCode_3', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_3', TRUE);\r\n+                $starTima = $this->input->post('starTima_3', TRUE);\r\n+                $endTima = $this->input->post('endTima_3', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_3', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 4th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_4', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_4', TRUE);\r\n+                $song = $this->input->post('song_4', TRUE);\r\n+                $songCode = $this->input->post('songCode_4', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_4', TRUE);\r\n+                $starTima = $this->input->post('starTima_4', TRUE);\r\n+                $endTima = $this->input->post('endTima_4', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_4', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 5th songinformations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_5', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_5', TRUE);\r\n+                $song = $this->input->post('song_5', TRUE);\r\n+                $songCode = $this->input->post('songCode_5', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_5', TRUE);\r\n+                $starTima = $this->input->post('starTima_5', TRUE);\r\n+                $endTima = $this->input->post('endTima_5', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_5', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 6th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_6', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_6', TRUE);\r\n+                $song = $this->input->post('song_6', TRUE);\r\n+                $songCode = $this->input->post('songCode_6', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_6', TRUE);\r\n+                $starTima = $this->input->post('starTima_6', TRUE);\r\n+                $endTima = $this->input->post('endTima_6', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_6', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($song),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 7th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_7', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_7', TRUE);\r\n+                $song = $this->input->post('song_7', TRUE);\r\n+                $songCode = $this->input->post('songCode_7', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_7', TRUE);\r\n+                $starTima = $this->input->post('starTima_7', TRUE);\r\n+                $endTima = $this->input->post('endTima_7', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_7', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 8th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_8', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_8', TRUE);\r\n+                $song = $this->input->post('song_8', TRUE);\r\n+                $songCode = $this->input->post('songe_8', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_8', TRUE);\r\n+                $starTima = $this->input->post('starTima_8', TRUE);\r\n+                $endTima = $this->input->post('endTima_8', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_8', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 9th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_9', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_9', TRUE);\r\n+                $song = $this->input->post('song_9', TRUE);\r\n+                $songCode = $this->input->post('songCode_9', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_9', TRUE);\r\n+                $starTima = $this->input->post('starTima_9', TRUE);\r\n+                $endTima = $this->input->post('endTima_9', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_9', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 10th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_10', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_10', TRUE);\r\n+                $song = $this->input->post('song_10', TRUE);\r\n+                $songCode = $this->input->post('songCode_10', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_10', TRUE);\r\n+                $starTima = $this->input->post('starTima_10', TRUE);\r\n+                $endTima = $this->input->post('endTima_10', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_10', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 11th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_11', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_11', TRUE);\r\n+                $song = $this->input->post('song_11', TRUE);\r\n+                $songCode = $this->input->post('songCode_11', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_11', TRUE);\r\n+                $starTima = $this->input->post('starTima_11', TRUE);\r\n+                $endTima = $this->input->post('endTima_11', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_11', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 12th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_12', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_12', TRUE);\r\n+                $song = $this->input->post('song_12', TRUE);\r\n+                $songCode = $this->input->post('songCode_12', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_12', TRUE);\r\n+                $starTima = $this->input->post('starTima_12', TRUE);\r\n+                $endTima = $this->input->post('endTima_12', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_12', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 13th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_13', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_13', TRUE);\r\n+                $song = $this->input->post('song_13', TRUE);\r\n+                $songCode = $this->input->post('songCode_13', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_13', TRUE);\r\n+                $starTima = $this->input->post('starTima_13', TRUE);\r\n+                $endTima = $this->input->post('endTima_13', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_13', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 14th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_14', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_14', TRUE);\r\n+                $song = $this->input->post('song_14', TRUE);\r\n+                $songCode = $this->input->post('songCode_14', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_14', TRUE);\r\n+                $starTima = $this->input->post('starTima_14', TRUE);\r\n+                $endTima = $this->input->post('endTima_14', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_14', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 15th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_15', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_15', TRUE);\r\n+                $song = $this->input->post('song_15', TRUE);\r\n+                $songCode = $this->input->post('songCode_15', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_15', TRUE);\r\n+                $starTima = $this->input->post('starTima_15', TRUE);\r\n+                $endTima = $this->input->post('endTima_15', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_15', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n+            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n+            $data['schoolName'] = $this->common->schoolName();\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('rutineSuccess', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function can delete rehearsal and rehearsal routine\r\n+    public function deleteRehearsalAndRoutine() {\r\n+        $rehearsalId = $this->input->get('rehearsalId', TRUE);\r\n+        if ($this->db->delete('add_rehearsal', array('id' => $rehearsalId))) {\r\n+            if ($this->db->delete('rehearsal_routine', array('rehearsal_id' => $rehearsalId))) {\r\n+                redirect('rehearsal/allRehearsalRutine', 'refresh');\r\n+            }\r\n+        }\r\n+    }\r\n+    //This function will select that which rehearsal routine \r\n+    public function allRehearsalRutine() {\r\n+        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('selectAllRoutine', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function load class's rehearsal title which is declard previously by class title.\r\n+    public function ajaxChoirRehearsal() {\r\n+        $Choir_id = $this->input->get('q');    \r\n+        // Using Active Record to prevent SQL injection\r\n+        $query = $this->db->select('*')\r\n+                          ->from('add_rehearsal')\r\n+                          ->where('Choir_id', $Choir_id)\r\n+                          ->get();\r\n+    \r\n+        $data = $query->result_array();\r\n+    \r\n+        // Check if we have any data returned\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                      <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n+                      <div class=\"col-md-6\">\r\n+                          <select name=\"rehearsalId\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                  </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                      <label class=\"col-md-3 control-label\"></label>\r\n+                      <div class=\"col-md-6\">\r\n+                          <div class=\"alert alert-warning\">\r\n+                              <strong>' . lang('exac_info') . '</strong> ' . lang('exac_5') . '\r\n+                          </div></div></div>';\r\n+        }\r\n+    }\r\n+    \r\n+    //This function show a success message when an Rehearsal added and made this rehearsal routine fully, with full rutine.\r\n+    public function routinView() {\r\n+        if ($this->input->post('submit', TRUE) && $this->input->post('rehearsalId', TRUE)) {\r\n+            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n+            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n+            $data['schoolName'] = $this->common->schoolName();\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('rutineSuccess', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            echo lang('exac_6');\r\n+        }\r\n+    }\r\n+    //This function is using for select class and Choir_members for rehearsal attendance.\r\n+    public function selectRehearsalAttendance() {\r\n+        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('selectRehearsalAttendance', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function is using for taking Choir_members by class title for rehearsal attendence\r\n+    public function rehearsalAttendance() {\r\n+        $date = date(\"d/m/Y\");\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $rehearsalId = $this->input->get('id');\r\n+            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+            $rehearsalSong = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n+            //Whene submit the attendence information after takeing the attendence\r\n+            $i = $this->input->post('in_velu', TRUE);\r\n+            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+            for ($x = 1; $x <= $i; $x++) {\r\n+                $roll = $this->input->post(\"roll_$x\", TRUE);\r\n+                $name = $this->input->post(\"Choir_memberName_$x\", TRUE);\r\n+                $present = $this->input->post(\"action_$x\", TRUE);\r\n+                $userId = $this->input->post(\"userId_$x\", TRUE);\r\n+                $Choir_memberInfoId = $this->input->post(\"Choir_memberInfoId_$x\", TRUE);\r\n+                $section = $this->input->post(\"section_$x\", TRUE);\r\n+                $data = array(\r\n+                    'date' => $this->db->escape_like_str($date),\r\n+                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n+                    'user_id' => $this->db->escape_like_str($userId),\r\n+                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberInfoId),\r\n+                    'roll_no' => $this->db->escape_like_str($roll),\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'section' => $this->db->escape_like_str($section),\r\n+                    'attendance' => $this->db->escape_like_str($present),\r\n+                    'Choir_member_title' => $this->db->escape_like_str($name),\r\n+                );\r\n+                //insert the $data information into \"daily_attendance\" database.\r\n+                $this->db->insert('rehearsal_attendanc', $data);\r\n+            }\r\n+            //Whene Rehearsal Attendance was full compleate then lode this page\r\n+            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($Choir_id, $rehearsalTitle, $rehearsalSong);\r\n+            print_r($data);\r\n+            $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('viewRehearsalAttendance', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+            $Choir_id = $this->input->post('Choir', TRUE);\r\n+            \r\n+            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId);\r\n+            if ($check == 'Have An Rehearsal') {\r\n+                //Here is loding Choir_member for rehearsal attendance.\r\n+                //Get here Choir_members and informations by class title.\r\n+                $queryData = array();\r\n+                $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n+                foreach ($query->result_array() as $row) {\r\n+                    $queryData[] = $row;\r\n+                }$data['Choir_members'] = $queryData;\r\n+                $data['rehearsalId'] = $rehearsalId;\r\n+                $data['rehearsalTitle'] = $rehearsalTitle;\r\n+                $data['rehearsalSong'] = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n+                $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n+                if (!empty($data['Choir_members'])) {\r\n+                    $this->load->view('temp/header');\r\n+                    $this->load->view('rehearsalAttendance', $data);\r\n+                    $this->load->view('temp/footer');\r\n+                } else {\r\n+                    echo 'has no any Choir_member.';\r\n+                }\r\n+            } elseif ($check == 'No Any Rehearsal') {\r\n+                // $info['ChoirTitle'] = $ChoirTitle;\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('attendanceFaild');\r\n+                $this->load->view('temp/footer');\r\n+            }\r\n+        }\r\n+    }\r\n+    //This function load's rehearsal attendance view\r\n+    public function viewRehearsalAttendance() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $ChoirTitle = $this->input->post('Choir', TRUE);\r\n+            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n+            $songTitle = $this->input->post('songTitle', TRUE);\r\n+            $data['ChoirTitle'] = $ChoirTitle;\r\n+            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($ChoirTitle, $rehearsalTitle, $songTitle);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('viewRehearsalAttendance', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('allRehearsalAttendanceView', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function is called by ajax from view\r\n+    public function ajaxAttendanceView() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $query = $this->db->query(\"SELECT * FROM add_rehearsal WHERE Choir_id=$Choir_id\");\r\n+        foreach ($query->result_array() as $row) {\r\n+            $data[] = $row;\r\n+        }\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"rehearsalTitle\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['rehearsal_title'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_7') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+        $song = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n+        if (!empty($song)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"songTitle\" class=\"form-control\">';\r\n+            foreach ($song as $sub) {\r\n+                echo '<option value=\"' . $sub['song_title'] . '\">' . $sub['song_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //The rehearsal attendance can edit by this function.\r\n+    public function editRehearsalAttendance() {\r\n+        $id = $this->input->get('id');\r\n+\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $updateInfo = array(\r\n+                'attendance' => $this->db->escape_like_str($this->input->post('action', TRUE))\r\n+            );\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('rehearsal_attendanc', $updateInfo)) {\r\n+                redirect('rehearsal/viewRehearsalAttendance', 'refresh');\r\n+            }\r\n+        }\r\n+        $data['rehearsalAttendanceInf'] = $this->common->getWhere('rehearsal_attendanc', 'id', $id);\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('editRehearsalAttendance', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //Here is first time select class for result.\r\n+    public function makingResult() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+            $data['Choir_id'] = $Choir_id;\r\n+            $data['rehearsalId'] = $this->input->post('rehearsalID', TRUE);\r\n+            $data['songTitle'] = $this->input->post('rehearsalSongTitle', TRUE);\r\n+            $data['rehearsalRUtinID'] = $this->input->post('subjRutID', TRUE);\r\n+            $data['section_leaderInfo'] = $this->rehearsalmodel->section_leaderInfo($this->input->post('section_leaderUserId', TRUE));\r\n+            $queryData = array();\r\n+            $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n+            foreach ($query->result_array() as $row) {\r\n+                $queryData[] = $row;\r\n+            }\r\n+            $data['Choir_members'] = $queryData;\r\n+            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('makingResult', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            $data['s_Choir'] = $this->rehearsalmodel->getChoirTitle();\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('selectChoirResult', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will take class and give the class rehearsal title and song\r\n+    public function ajaxChoirResult() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $data = $this->rehearsalmodel->rehearsalTitleRes($Choir_id);\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select onchange=\"rehearsalSong(this.value)\" name=\"rehearsalID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n+                            <option value=\"\">' . lang('select') . '</option>';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div><div id=\"ajaxResult_2\"></div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_10') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //This function will show via ajax rehearsal song which are not compleated result\r\n+    public function ajaxRehearsalSong() {\r\n+        $rehearsalID = $this->input->get('erid');\r\n+        $song = $this->rehearsalmodel->rehearsalResSong($rehearsalID);\r\n+        if (!empty($song)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select onchange=\"rehearsalSongTitle(this.value)\" name=\"subjRutID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n+                            <option value=\"\">' . lang('select') . '</option>';\r\n+            foreach ($song as $sub) {\r\n+                echo '<option value=\"' . $sub['id'] . '\">' . $sub['rehearsal_song'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div><div id=\"ajaxResult_3\"></div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_11') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //This function will returan rehearsal song title \r\n+    public function ajaxRehearsalSubTitle() {\r\n+        $rehearsalId = $this->input->get('erid');\r\n+        $query = $this->db->query(\"SELECT rehearsal_song FROM rehearsal_routine WHERE id='$rehearsalId'\");\r\n+        foreach ($query->result_array() as $row) {\r\n+            $data = $row['rehearsal_song'];\r\n+            echo '<input type=\"hidden\" name=\"rehearsalSongTitle\" value=\"' . $row['rehearsal_song'] . '\">';\r\n+        }\r\n+    }\r\n+    //This function will submit result from section_leader.\r\n+    public function submitResult() {\r\n+        $i = $this->input->post('ivalue', TRUE);\r\n+        $rehearsalID = $this->input->post('rehearsalId', TRUE);\r\n+        $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalID);\r\n+        $rehearsalRuId = $this->input->post('rehearsalRutinID', TRUE);\r\n+        $rehearsalSong = $this->rehearsalmodel->rehearsalSongTitle($rehearsalRuId);\r\n+        $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+        $section_leaderName = $this->input->post('section_leaderName', TRUE);\r\n+        //here is checking this song is optionakl or not\r\n+        $date = date('d/m/Y');\r\n+        for ($a = 1; $a <= $i; $a++) {\r\n+            $rollNumber = $this->input->post(\"rollNumber_$a\", TRUE);\r\n+            $result = $this->input->post(\"result_$a\", TRUE);\r\n+            $greadInfo = $this->input->post(\"gread_$a\", TRUE);\r\n+            $grade = explode(\",\", $greadInfo);\r\n+            $resultInfo = array(\r\n+                'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n+                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                'Choir_member_name' => $this->db->escape_like_str($this->input->post(\"Choir_memberTitle_$a\", TRUE)),\r\n+                'Choir_member_id' => $this->db->escape_like_str($this->input->post(\"Choir_memberId_$a\", TRUE)),\r\n+                'roll_number' => $this->db->escape_like_str($this->input->post(\"rollNumber_$a\", TRUE)),\r\n+                'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n+                'result' => $this->db->escape_like_str($this->input->post(\"result_$a\", TRUE)),\r\n+                'mark' => $this->db->escape_like_str($this->input->post(\"totalMark_$a\", TRUE)),\r\n+                'grade' => $this->db->escape_like_str($grade[0]),\r\n+                'point' => $this->db->escape_like_str($grade[1]),\r\n+            );\r\n+            $this->db->insert('result_shit', $resultInfo);\r\n+        }\r\n+        $submitInfo = array(\r\n+            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+            'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+            'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n+            'date' => $this->db->escape_like_str($date),\r\n+            'song' => $this->db->escape_like_str($rehearsalSong),\r\n+            'submited' => $this->db->escape_like_str(0),\r\n+            'section_leader' => $this->db->escape_like_str($section_leaderName),\r\n+        );\r\n+        $songStatus = array(\r\n+            'status' => $this->db->escape_like_str('Result')\r\n+        );\r\n+        $this->db->where('id', $rehearsalRuId);\r\n+        $this->db->update('rehearsal_routine', $songStatus);\r\n+        if ($this->db->insert('result_submition_info', $submitInfo)) {\r\n+            $data['rehearsalTitle'] = $rehearsalTitle;\r\n+            $data['rehearsalSong'] = $rehearsalSong;\r\n+            $data['section_leaderName'] = $section_leaderName;\r\n+            $data['Choir_id'] = $Choir_id;\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('submitMessage', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function work only for admin.\r\n+    //He can view how many result shit was submited for aprove by admin.\r\n+    public function aproveShitView() {\r\n+        $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n+        $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('aproveShitView', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function can exes only admin and he can edit and Approve rehearsal rtesult shit\r\n+    public function checkResultShit() {\r\n+        $id = $this->input->get('id', TRUE);\r\n+        $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n+        $rehearsalTitle = $query[0]['rehearsal_title'];\r\n+        $Choir_id = $query[0]['Choir_id'];\r\n+        $song = $query[0]['song'];\r\n+        $data['rehearsalId'] = $id;\r\n+        $data['rehearsalTitle'] = $query[0]['rehearsal_title'];\r\n+        $data['Choir_id'] = $Choir_id;\r\n+        $data['section_leader'] = $query[0]['section_leader'];\r\n+        $data['song'] = $query[0]['song'];\r\n+        $data['resultShit'] = $this->rehearsalmodel->checkResultShit($Choir_id, $rehearsalTitle, $song);\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('checkResultShit', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function will edit Choir_member's result,number and grade,point\r\n+    public function editResult() {\r\n+        $id = $this->input->get('id');\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $updateData = array(\r\n+                'result' => $this->db->escape_like_str($this->input->post('result', TRUE)),\r\n+                'mark' => $this->db->escape_like_str($this->input->post('mark', TRUE)),\r\n+                'point' => $this->db->escape_like_str($this->input->post('point', TRUE)),\r\n+                'grade' => $this->db->escape_like_str($this->input->post('gread', TRUE))\r\n+            );\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('result_shit', $updateData)) {\r\n+                redirect('rehearsal/aproveShitView', 'refresh');\r\n+            }\r\n+        } else {\r\n+            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n+            $data['previousResult'] = $this->common->getWhere('result_shit', 'id', $id);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('editResult', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will approuve result shit which is sent from section_leader.\r\n+    public function approuveResultShit() {\r\n+        $id = $this->input->get('id');\r\n+        $data = array(\r\n+            'submited' => $this->db->escape_like_str(1)\r\n+        );\r\n+        $this->db->where('id', $id);\r\n+        if ($this->db->update('result_submition_info', $data)) {\r\n+            $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n+            foreach ($query as $row) {\r\n+                $rowInfo = $row;\r\n+            }\r\n+            $Choir_id = $rowInfo['Choir_id'];\r\n+            $rehearsalTitle = $rowInfo['rehearsal_title'];\r\n+            $rehearsalId = $rowInfo['rehearsal_id'];\r\n+            $song = $rowInfo['song'];\r\n+            $approuveSong = $this->rehearsalmodel->approuveSongAmount($Choir_id, $rehearsalTitle);\r\n+            $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n+            //By this if conditation we are chacking that all songs result was submited or not\r\n+            //When all songs result is submited in that time insert the informations in \"result_action\" table then it will ready for final calculation.\r\n+            if ($approuveSong == $ChoirSong) {\r\n+                $actionArrayt = array(\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'status' => $this->db->escape_like_str('Not Complete')\r\n+                );\r\n+                if ($this->db->insert('result_action', $actionArrayt)) {\r\n+                    redirect('rehearsal/aproveShitView', 'refresh');\r\n+                }\r\n+            } else {\r\n+                redirect('rehearsal/aproveShitView', 'refresh');\r\n+            }\r\n+        }\r\n+    }\r\n+    //This function will make finalresult for class Choir_members\r\n+    public function finalResult() {\r\n+        $rehearsalActionId = $this->input->get('id');\r\n+        $Choir_id = $this->input->get('Choir');\r\n+        $rehearsalTitle = $this->input->get('rehearsal');\r\n+        $rehearsalId = $this->input->get('rehearsalId');\r\n+        //Here taking a Choir_members list by class title\r\n+        $Choir_memberQuery = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n+        foreach ($Choir_memberQuery as $row) {\r\n+            $Choir_memberId = $row['Choir_member_id'];\r\n+            $absent = $this->rehearsalmodel->absent($Choir_memberId);\r\n+            if ($absent == 0) {\r\n+                $fail = $this->rehearsalmodel->fail($Choir_memberId);\r\n+                if ($fail == 0) {\r\n+                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n+                    $finalPoint = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n+                    $gradeAverage = $this->rehearsalmodel->averageGrade($finalPoint);\r\n+                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n+                    $finalResultArray = array(\r\n+                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n+                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n+                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n+                        'point' => $this->db->escape_like_str($finalPoint),\r\n+                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n+                        'status' => $this->db->escape_like_str('Pass'),\r\n+                    );\r\n+                    $this->db->insert('final_result', $finalResultArray);\r\n+                } else {\r\n+                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n+                    $pointAverage = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n+                    $gradeAverage = $this->rehearsalmodel->averageGrade($pointAverage);\r\n+                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n+                    $finalResultArray = array(\r\n+                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n+                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n+                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n+                        'point' => $this->db->escape_like_str($pointAverage),\r\n+                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n+                        'status' => $this->db->escape_like_str('Fail'),\r\n+                        'fail_amount' => $this->db->escape_like_str($fail)\r\n+                    );\r\n+                    $this->db->insert('final_result', $finalResultArray);\r\n+                }\r\n+            } else {\r\n+                $finalResultArray = array(\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n+                    'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n+                    'final_grade' => $this->db->escape_like_str('--'),\r\n+                    'point' => $this->db->escape_like_str('--'),\r\n+                    'total_mark' => $this->db->escape_like_str('--'),\r\n+                    'status' => $this->db->escape_like_str('Absent'),\r\n+                    'fail_amount' => $this->db->escape_like_str('--')\r\n+                );\r\n+                $this->db->insert('final_result', $finalResultArray);\r\n+            }\r\n+        }\r\n+        $rehearsalActionArray = array(\r\n+            'status' => $this->db->escape_like_str('Complete'),\r\n+            'publish' => $this->db->escape_like_str('Not Publish')\r\n+        );\r\n+        $this->db->where('id', $rehearsalActionId);\r\n+        if ($this->db->update('result_action', $rehearsalActionArray)) {\r\n+            $data['message'] = '<br><div class=\"alert alert-success\">\r\n+                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n+                                                <strong>' . lang('success') . '</strong> ' . lang('exac_12') . ' \"' . $rehearsalTitle . '\" ' . lang('exac_13') . ' \"' . $this->common->Choir_title($Choir_id) . '\"' . lang('exac_14') . '<br>\r\n+                                                <strong>' . lang('exac_info') . ' </strong>' . lang('exac_15') . '   \r\n+                                        </div>';\r\n+            $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n+            $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('aproveShitView', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function select class for results \r\n+    public function selectResult() {\r\n+        $data['result'] = $this->rehearsalmodel->publish('Complete', 'Publish');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('selectResult', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function will show details result in a class \r\n+    public function fullResult() {\r\n+        $Choir_id = $this->input->get('Choir');\r\n+        $rehearsalTitle = $this->input->get('rehearsal');\r\n+        \r\n+        $data['result'] = $this->rehearsalmodel->finalResultShow($Choir_id, $rehearsalTitle);\r\n+        // echo \"<pre>\";  // Use <pre> for better readability of array or object structures\r\n+        // print_r($data);\r\n+        // echo \"</pre>\";\r\n+        $data['Choir'] = $Choir_id;\r\n+        $data['rehearsalTitle'] = $rehearsalTitle;\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('fullResult', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //By this function admin can publish rehearsal result in day.\r\n+    public function publishResult() {\r\n+        $query = $this->rehearsalmodel->publish('Complete', 'Not Publish');\r\n+        foreach ($query as $row) {\r\n+            $id = $row['id'];\r\n+            $rehearsalTitle = $row['rehearsal_title'];\r\n+            $Choir_id = $row['Choir_id'];\r\n+            $array = array(\r\n+                'publish' => $this->db->escape_like_str('Publish')\r\n+            );\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('result_action', $array)) {\r\n+                $this->db->update('add_rehearsal', $array, array('rehearsal_title' => $this->db->escape_like_str($rehearsalTitle), 'Choir_id' => $this->db->escape_like_str($Choir_id)));\r\n+            }\r\n+        }\r\n+        redirect('rehearsal/selectResult', 'refresh');\r\n+    }\r\n+    //This function will select Choir_memberfor know mark shit\r\n+    public function selectChoirMarksheet() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            if ($this->input->post('rehearsalId', TRUE) && $this->input->post('Choir_memberId', TRUE)) {\r\n+                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+                $Choir_memberId = $this->input->post('Choir_memberId', TRUE);\r\n+                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n+                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+                $data['Choir_memberId'] = $Choir_memberId;\r\n+                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('marksheet', $data);\r\n+                $this->load->view('temp/footer');\r\n+            } else {\r\n+                echo lang('exac_16');\r\n+            }\r\n+        } else {\r\n+            $data['Choir'] = $this->common->getAllData('Choir');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('selectChoirMarksheet', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will called by ajax from view for load class markshit\r\n+    public function ajaxChoirMarkshit() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n+        foreach ($query as $row) {\r\n+            $data[] = $row;\r\n+        }\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+            $Choir_member = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n+            if (!empty($Choir_member)) {\r\n+                echo '<div class=\"form-group\">\r\n+                            <label class=\"col-md-3 control-label\">' . lang('exac_17') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                            <div class=\"col-md-6\">\r\n+                                <select name=\"Choir_memberId\" class=\"form-control\">';\r\n+                foreach ($Choir_member as $stu) {\r\n+                    echo '<option value=\"' . $stu['Choir_member_id'] . '\">' . $stu['Choir_member_title'] . '</option>';\r\n+                }\r\n+                echo '</select></div>\r\n+                    <input type=\"hidden\" name=\"Choir_memberTitle\" value=\"' . $stu['Choir_member_title'] . '\">\r\n+                            </div>';\r\n+            } else {\r\n+                echo '<div class=\"form-group\">\r\n+                            <label class=\"col-md-3 control-label\"></label>\r\n+                            <div class=\"col-md-6\">\r\n+                            <div class=\"alert alert-warning\">\r\n+                                    <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n+                            </div></div></div>';\r\n+            }\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //This function will select Choir_member's own marksheet\r\n+    public function sel_ow_ma() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            if ($this->input->post('rehearsalId', TRUE)) {\r\n+                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+                $user = $this->ion_auth->user()->row();\r\n+                $userId = $user->id;\r\n+                $Choir_memberId = $this->rehearsalmodel->Choir_member_id($userId);\r\n+                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n+                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+                $data['Choir_memberId'] = $Choir_memberId;\r\n+                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('ow_marksheet', $data);\r\n+                $this->load->view('temp/footer');\r\n+            } else {\r\n+                echo lang('exac_16');\r\n+            }\r\n+        } else {\r\n+            $data['Choir'] = $this->common->getAllData('Choir');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('sel_ow_ma', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will called by ajax from view for load class markshit\r\n+    public function ajax_ow_ma() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n+        foreach ($query as $row) {\r\n+            $data[] = $row;\r\n+        }\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+}\r\n"
                },
                {
                    "date": 1714943440274,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -590,9 +590,9 @@\n             $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n             $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n             $Choir_id = $this->input->post('Choir', TRUE);\r\n             \r\n-            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId);\r\n+            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId, $date);\r\n             if ($check == 'Have An Rehearsal') {\r\n                 //Here is loding Choir_member for rehearsal attendance.\r\n                 //Get here Choir_members and informations by class title.\r\n                 $queryData = array();\r\n"
                },
                {
                    "date": 1714943470036,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -590,9 +590,9 @@\n             $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n             $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n             $Choir_id = $this->input->post('Choir', TRUE);\r\n             \r\n-            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId, $date);\r\n+            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId);\r\n             if ($check == 'Have An Rehearsal') {\r\n                 //Here is loding Choir_member for rehearsal attendance.\r\n                 //Get here Choir_members and informations by class title.\r\n                 $queryData = array();\r\n@@ -1165,1172 +1165,4 @@\n                         </div></div></div>';\r\n         }\r\n     }\r\n }\r\n-<?php\r\n-if (!defined('BASEPATH')) {\r\n-    exit('No direct script access allowed');\r\n-}\r\n-class Rehearsal extends MX_Controller {\r\n-\r\n-    /**\r\n-     * This controller is using for \r\n-     *\r\n-     * Maps to the following URL\r\n-     * \t\thttp://rehearsalple.com/index.php/rehearsal\r\n-     * \t- or -  \r\n-     * \t\thttp://rehearsalple.com/index.php/rehearsal/<method_name>\r\n-     */\r\n-    function __construct() {\r\n-        parent::__construct();\r\n-        $this->lang->load('auth');\r\n-        $this->load->model('rehearsalmodel');\r\n-        if (!$this->ion_auth->logged_in()) {\r\n-            redirect('auth/login');\r\n-        }\r\n-    }\r\n-    //This function load all rehearsal grade and point\r\n-    public function rehearsalGread() {\r\n-        $data['grade'] = $this->common->getAllData('rehearsal_grade');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('rehearsalGread', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //THis function add new rehearsal grade\r\n-    public function addRehearsalGread() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $gradeName = $this->input->post('gradeName', TRUE);\r\n-            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n-            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n-            $nameTo = $this->input->post('nameTo', TRUE);\r\n-\r\n-            $data = array(\r\n-                'grade_name' => $this->db->escape_like_str($gradeName),\r\n-                'point' => $this->db->escape_like_str($gradePoint),\r\n-                'number_form' => $this->db->escape_like_str($numberFrom),\r\n-                'number_to' => $this->db->escape_like_str($nameTo)\r\n-            );\r\n-            $this->db->insert('rehearsal_grade', $data);\r\n-\r\n-            redirect('rehearsal/rehearsalGread', 'refresh');\r\n-        } else {\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('addRehearsalGrade');\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will edit rehearsal grade and point\r\n-    public function editGrade() {\r\n-        $id = $this->input->get('id');\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $gradeName = $this->input->post('gradeName', TRUE);\r\n-            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n-            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n-            $nameTo = $this->input->post('nameTo', TRUE);\r\n-\r\n-            $editData = array(\r\n-                'grade_name' => $this->db->escape_like_str($gradeName),\r\n-                'point' => $this->db->escape_like_str($gradePoint),\r\n-                'number_form' => $this->db->escape_like_str($numberFrom),\r\n-                'number_to' => $this->db->escape_like_str($nameTo)\r\n-            );\r\n-\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('rehearsal_grade', $editData)) {\r\n-                redirect('rehearsal/rehearsalGread', 'refresh');\r\n-            }\r\n-        } else {\r\n-            $data['gradInfo'] = $this->common->getWhere('rehearsal_grade', 'id', $id);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('editGrade', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function can delete rehearsal grade in this system\r\n-    public function deleteGrade() {\r\n-        $id = $this->input->get('id');\r\n-        if ($this->db->delete('rehearsal_grade', array('id' => $id))) {\r\n-            redirect('rehearsal/rehearsalGread', 'refresh');\r\n-        }\r\n-    }\r\n-    //This function is using for decleration new rehearsal for nay class.\r\n-    public function addRehearsal() {\r\n-        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n-            $startDate = $this->input->post('startDate', TRUE);\r\n-            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-            $totleTime = $this->input->post('totleTime', TRUE);\r\n-            $rehearsalInfo = array(\r\n-                'year' => $this->db->escape_like_str(date('Y')),\r\n-                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                'start_date' => $this->db->escape_like_str($startDate),\r\n-                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                'total_time' => $this->db->escape_like_str($totleTime),\r\n-                'publish' => $this->db->escape_like_str('Not Publish'),\r\n-                'final' => $this->db->escape_like_str($this->input->post('final', TRUE)),\r\n-                'status' => $this->db->escape_like_str('NoResult')\r\n-            );\r\n-            //Here is adding an rehearsal information into database\r\n-            if ($this->db->insert('add_rehearsal', $rehearsalInfo)) {\r\n-                $data['successMessage'] = '<div class=\"alert alert-success\">\r\n-                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n-                                                <strong>' . lang('success') . '</strong> ' . lang('exac_1') . '\" ' . $rehearsalTitle . ' \" ' . lang('exac_2') . ' \"' . $this->common->Choir_title($Choir_id) . '\" ' . lang('exac_3') . '\r\n-                                        </div>';\r\n-                $data['rehearsalInfo'] = $this->common->getAllData('add_rehearsal');\r\n-                $data['song'] = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n-                $data['weeklyDay'] = $this->common->getAllData('config_week_day');\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('addRutinSong', $data);\r\n-                $this->load->view('temp/footer');\r\n-            }\r\n-        } else {\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('addRehearsalRutine', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will complete an rehearsal routine after decletration that rehearsal.\r\n-    public function completRehearsalRoutin() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-            //this is the 1st song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate', TRUE);\r\n-                $song = $this->input->post('song', TRUE);\r\n-                $songCode = $this->input->post('songCode', TRUE);\r\n-                $romeNo = $this->input->post('romeNo', TRUE);\r\n-                $starTima = $this->input->post('starTima', TRUE);\r\n-                $endTima = $this->input->post('endTima', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 2nd song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_2', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_2', TRUE);\r\n-                $song = $this->input->post('song_2', TRUE);\r\n-                $songCode = $this->input->post('song', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_2', TRUE);\r\n-                $starTima = $this->input->post('starTima_2', TRUE);\r\n-                $endTima = $this->input->post('endTima_2', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_2', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 3rd song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_3', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_3', TRUE);\r\n-                $song = $this->input->post('song_3', TRUE);\r\n-                $songe = $this->input->post('songCode_3', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_3', TRUE);\r\n-                $starTima = $this->input->post('starTima_3', TRUE);\r\n-                $endTima = $this->input->post('endTima_3', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_3', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 4th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_4', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_4', TRUE);\r\n-                $song = $this->input->post('song_4', TRUE);\r\n-                $songCode = $this->input->post('songCode_4', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_4', TRUE);\r\n-                $starTima = $this->input->post('starTima_4', TRUE);\r\n-                $endTima = $this->input->post('endTima_4', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_4', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 5th songinformations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_5', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_5', TRUE);\r\n-                $song = $this->input->post('song_5', TRUE);\r\n-                $songCode = $this->input->post('songCode_5', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_5', TRUE);\r\n-                $starTima = $this->input->post('starTima_5', TRUE);\r\n-                $endTima = $this->input->post('endTima_5', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_5', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 6th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_6', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_6', TRUE);\r\n-                $song = $this->input->post('song_6', TRUE);\r\n-                $songCode = $this->input->post('songCode_6', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_6', TRUE);\r\n-                $starTima = $this->input->post('starTima_6', TRUE);\r\n-                $endTima = $this->input->post('endTima_6', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_6', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($song),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 7th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_7', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_7', TRUE);\r\n-                $song = $this->input->post('song_7', TRUE);\r\n-                $songCode = $this->input->post('songCode_7', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_7', TRUE);\r\n-                $starTima = $this->input->post('starTima_7', TRUE);\r\n-                $endTima = $this->input->post('endTima_7', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_7', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 8th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_8', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_8', TRUE);\r\n-                $song = $this->input->post('song_8', TRUE);\r\n-                $songCode = $this->input->post('songe_8', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_8', TRUE);\r\n-                $starTima = $this->input->post('starTima_8', TRUE);\r\n-                $endTima = $this->input->post('endTima_8', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_8', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 9th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_9', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_9', TRUE);\r\n-                $song = $this->input->post('song_9', TRUE);\r\n-                $songCode = $this->input->post('songCode_9', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_9', TRUE);\r\n-                $starTima = $this->input->post('starTima_9', TRUE);\r\n-                $endTima = $this->input->post('endTima_9', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_9', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 10th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_10', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_10', TRUE);\r\n-                $song = $this->input->post('song_10', TRUE);\r\n-                $songCode = $this->input->post('songCode_10', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_10', TRUE);\r\n-                $starTima = $this->input->post('starTima_10', TRUE);\r\n-                $endTima = $this->input->post('endTima_10', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_10', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 11th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_11', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_11', TRUE);\r\n-                $song = $this->input->post('song_11', TRUE);\r\n-                $songCode = $this->input->post('songCode_11', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_11', TRUE);\r\n-                $starTima = $this->input->post('starTima_11', TRUE);\r\n-                $endTima = $this->input->post('endTima_11', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_11', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 12th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_12', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_12', TRUE);\r\n-                $song = $this->input->post('song_12', TRUE);\r\n-                $songCode = $this->input->post('songCode_12', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_12', TRUE);\r\n-                $starTima = $this->input->post('starTima_12', TRUE);\r\n-                $endTima = $this->input->post('endTima_12', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_12', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 13th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_13', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_13', TRUE);\r\n-                $song = $this->input->post('song_13', TRUE);\r\n-                $songCode = $this->input->post('songCode_13', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_13', TRUE);\r\n-                $starTima = $this->input->post('starTima_13', TRUE);\r\n-                $endTima = $this->input->post('endTima_13', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_13', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 14th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_14', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_14', TRUE);\r\n-                $song = $this->input->post('song_14', TRUE);\r\n-                $songCode = $this->input->post('songCode_14', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_14', TRUE);\r\n-                $starTima = $this->input->post('starTima_14', TRUE);\r\n-                $endTima = $this->input->post('endTima_14', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_14', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 15th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_15', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_15', TRUE);\r\n-                $song = $this->input->post('song_15', TRUE);\r\n-                $songCode = $this->input->post('songCode_15', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_15', TRUE);\r\n-                $starTima = $this->input->post('starTima_15', TRUE);\r\n-                $endTima = $this->input->post('endTima_15', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_15', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n-            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n-            $data['schoolName'] = $this->common->schoolName();\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('rutineSuccess', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function can delete rehearsal and rehearsal routine\r\n-    public function deleteRehearsalAndRoutine() {\r\n-        $rehearsalId = $this->input->get('rehearsalId', TRUE);\r\n-        if ($this->db->delete('add_rehearsal', array('id' => $rehearsalId))) {\r\n-            if ($this->db->delete('rehearsal_routine', array('rehearsal_id' => $rehearsalId))) {\r\n-                redirect('rehearsal/allRehearsalRutine', 'refresh');\r\n-            }\r\n-        }\r\n-    }\r\n-    //This function will select that which rehearsal routine \r\n-    public function allRehearsalRutine() {\r\n-        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('selectAllRoutine', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function load class's rehearsal title which is declard previously by class title.\r\n-    public function ajaxChoirRehearsal() {\r\n-        $Choir_id = $this->input->get('q');    \r\n-        // Using Active Record to prevent SQL injection\r\n-        $query = $this->db->select('*')\r\n-                          ->from('add_rehearsal')\r\n-                          ->where('Choir_id', $Choir_id)\r\n-                          ->get();\r\n-    \r\n-        $data = $query->result_array();\r\n-    \r\n-        // Check if we have any data returned\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                      <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n-                      <div class=\"col-md-6\">\r\n-                          <select name=\"rehearsalId\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                  </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                      <label class=\"col-md-3 control-label\"></label>\r\n-                      <div class=\"col-md-6\">\r\n-                          <div class=\"alert alert-warning\">\r\n-                              <strong>' . lang('exac_info') . '</strong> ' . lang('exac_5') . '\r\n-                          </div></div></div>';\r\n-        }\r\n-    }\r\n-    \r\n-    //This function show a success message when an Rehearsal added and made this rehearsal routine fully, with full rutine.\r\n-    public function routinView() {\r\n-        if ($this->input->post('submit', TRUE) && $this->input->post('rehearsalId', TRUE)) {\r\n-            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n-            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n-            $data['schoolName'] = $this->common->schoolName();\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('rutineSuccess', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            echo lang('exac_6');\r\n-        }\r\n-    }\r\n-    //This function is using for select class and Choir_members for rehearsal attendance.\r\n-    public function selectRehearsalAttendance() {\r\n-        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('selectRehearsalAttendance', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function is using for taking Choir_members by class title for rehearsal attendence\r\n-    public function rehearsalAttendance() {\r\n-        $date = date(\"d/m/Y\");\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $rehearsalId = $this->input->get('id');\r\n-            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-            $rehearsalSong = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n-            //Whene submit the attendence information after takeing the attendence\r\n-            $i = $this->input->post('in_velu', TRUE);\r\n-            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-            for ($x = 1; $x <= $i; $x++) {\r\n-                $roll = $this->input->post(\"roll_$x\", TRUE);\r\n-                $name = $this->input->post(\"Choir_memberName_$x\", TRUE);\r\n-                $present = $this->input->post(\"action_$x\", TRUE);\r\n-                $userId = $this->input->post(\"userId_$x\", TRUE);\r\n-                $Choir_memberInfoId = $this->input->post(\"Choir_memberInfoId_$x\", TRUE);\r\n-                $section = $this->input->post(\"section_$x\", TRUE);\r\n-                $data = array(\r\n-                    'date' => $this->db->escape_like_str($date),\r\n-                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n-                    'user_id' => $this->db->escape_like_str($userId),\r\n-                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberInfoId),\r\n-                    'roll_no' => $this->db->escape_like_str($roll),\r\n-                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                    'section' => $this->db->escape_like_str($section),\r\n-                    'attendance' => $this->db->escape_like_str($present),\r\n-                    'Choir_member_title' => $this->db->escape_like_str($name),\r\n-                );\r\n-                //insert the $data information into \"daily_attendance\" database.\r\n-                $this->db->insert('rehearsal_attendanc', $data);\r\n-            }\r\n-            //Whene Rehearsal Attendance was full compleate then lode this page\r\n-            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($Choir_id, $rehearsalTitle, $rehearsalSong);\r\n-            print_r($data);\r\n-            $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('viewRehearsalAttendance', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-            $Choir_id = $this->input->post('Choir', TRUE);\r\n-            \r\n-            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId, $date);\r\n-            if ($check == 'Have An Rehearsal') {\r\n-                //Here is loding Choir_member for rehearsal attendance.\r\n-                //Get here Choir_members and informations by class title.\r\n-                $queryData = array();\r\n-                $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n-                foreach ($query->result_array() as $row) {\r\n-                    $queryData[] = $row;\r\n-                }$data['Choir_members'] = $queryData;\r\n-                $data['rehearsalId'] = $rehearsalId;\r\n-                $data['rehearsalTitle'] = $rehearsalTitle;\r\n-                $data['rehearsalSong'] = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n-                $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n-                if (!empty($data['Choir_members'])) {\r\n-                    $this->load->view('temp/header');\r\n-                    $this->load->view('rehearsalAttendance', $data);\r\n-                    $this->load->view('temp/footer');\r\n-                } else {\r\n-                    echo 'has no any Choir_member.';\r\n-                }\r\n-            } elseif ($check == 'No Any Rehearsal') {\r\n-                // $info['ChoirTitle'] = $ChoirTitle;\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('attendanceFaild');\r\n-                $this->load->view('temp/footer');\r\n-            }\r\n-        }\r\n-    }\r\n-    //This function load's rehearsal attendance view\r\n-    public function viewRehearsalAttendance() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $ChoirTitle = $this->input->post('Choir', TRUE);\r\n-            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n-            $songTitle = $this->input->post('songTitle', TRUE);\r\n-            $data['ChoirTitle'] = $ChoirTitle;\r\n-            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($ChoirTitle, $rehearsalTitle, $songTitle);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('viewRehearsalAttendance', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('allRehearsalAttendanceView', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function is called by ajax from view\r\n-    public function ajaxAttendanceView() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $query = $this->db->query(\"SELECT * FROM add_rehearsal WHERE Choir_id=$Choir_id\");\r\n-        foreach ($query->result_array() as $row) {\r\n-            $data[] = $row;\r\n-        }\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"rehearsalTitle\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['rehearsal_title'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_7') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-        $song = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n-        if (!empty($song)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"songTitle\" class=\"form-control\">';\r\n-            foreach ($song as $sub) {\r\n-                echo '<option value=\"' . $sub['song_title'] . '\">' . $sub['song_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //The rehearsal attendance can edit by this function.\r\n-    public function editRehearsalAttendance() {\r\n-        $id = $this->input->get('id');\r\n-\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $updateInfo = array(\r\n-                'attendance' => $this->db->escape_like_str($this->input->post('action', TRUE))\r\n-            );\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('rehearsal_attendanc', $updateInfo)) {\r\n-                redirect('rehearsal/viewRehearsalAttendance', 'refresh');\r\n-            }\r\n-        }\r\n-        $data['rehearsalAttendanceInf'] = $this->common->getWhere('rehearsal_attendanc', 'id', $id);\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('editRehearsalAttendance', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //Here is first time select class for result.\r\n-    public function makingResult() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-            $data['Choir_id'] = $Choir_id;\r\n-            $data['rehearsalId'] = $this->input->post('rehearsalID', TRUE);\r\n-            $data['songTitle'] = $this->input->post('rehearsalSongTitle', TRUE);\r\n-            $data['rehearsalRUtinID'] = $this->input->post('subjRutID', TRUE);\r\n-            $data['section_leaderInfo'] = $this->rehearsalmodel->section_leaderInfo($this->input->post('section_leaderUserId', TRUE));\r\n-            $queryData = array();\r\n-            $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n-            foreach ($query->result_array() as $row) {\r\n-                $queryData[] = $row;\r\n-            }\r\n-            $data['Choir_members'] = $queryData;\r\n-            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('makingResult', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            $data['s_Choir'] = $this->rehearsalmodel->getChoirTitle();\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('selectChoirResult', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will take class and give the class rehearsal title and song\r\n-    public function ajaxChoirResult() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $data = $this->rehearsalmodel->rehearsalTitleRes($Choir_id);\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select onchange=\"rehearsalSong(this.value)\" name=\"rehearsalID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n-                            <option value=\"\">' . lang('select') . '</option>';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div><div id=\"ajaxResult_2\"></div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_10') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //This function will show via ajax rehearsal song which are not compleated result\r\n-    public function ajaxRehearsalSong() {\r\n-        $rehearsalID = $this->input->get('erid');\r\n-        $song = $this->rehearsalmodel->rehearsalResSong($rehearsalID);\r\n-        if (!empty($song)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select onchange=\"rehearsalSongTitle(this.value)\" name=\"subjRutID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n-                            <option value=\"\">' . lang('select') . '</option>';\r\n-            foreach ($song as $sub) {\r\n-                echo '<option value=\"' . $sub['id'] . '\">' . $sub['rehearsal_song'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div><div id=\"ajaxResult_3\"></div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_11') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //This function will returan rehearsal song title \r\n-    public function ajaxRehearsalSubTitle() {\r\n-        $rehearsalId = $this->input->get('erid');\r\n-        $query = $this->db->query(\"SELECT rehearsal_song FROM rehearsal_routine WHERE id='$rehearsalId'\");\r\n-        foreach ($query->result_array() as $row) {\r\n-            $data = $row['rehearsal_song'];\r\n-            echo '<input type=\"hidden\" name=\"rehearsalSongTitle\" value=\"' . $row['rehearsal_song'] . '\">';\r\n-        }\r\n-    }\r\n-    //This function will submit result from section_leader.\r\n-    public function submitResult() {\r\n-        $i = $this->input->post('ivalue', TRUE);\r\n-        $rehearsalID = $this->input->post('rehearsalId', TRUE);\r\n-        $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalID);\r\n-        $rehearsalRuId = $this->input->post('rehearsalRutinID', TRUE);\r\n-        $rehearsalSong = $this->rehearsalmodel->rehearsalSongTitle($rehearsalRuId);\r\n-        $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-        $section_leaderName = $this->input->post('section_leaderName', TRUE);\r\n-        //here is checking this song is optionakl or not\r\n-        $date = date('d/m/Y');\r\n-        for ($a = 1; $a <= $i; $a++) {\r\n-            $rollNumber = $this->input->post(\"rollNumber_$a\", TRUE);\r\n-            $result = $this->input->post(\"result_$a\", TRUE);\r\n-            $greadInfo = $this->input->post(\"gread_$a\", TRUE);\r\n-            $grade = explode(\",\", $greadInfo);\r\n-            $resultInfo = array(\r\n-                'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n-                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                'Choir_member_name' => $this->db->escape_like_str($this->input->post(\"Choir_memberTitle_$a\", TRUE)),\r\n-                'Choir_member_id' => $this->db->escape_like_str($this->input->post(\"Choir_memberId_$a\", TRUE)),\r\n-                'roll_number' => $this->db->escape_like_str($this->input->post(\"rollNumber_$a\", TRUE)),\r\n-                'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n-                'result' => $this->db->escape_like_str($this->input->post(\"result_$a\", TRUE)),\r\n-                'mark' => $this->db->escape_like_str($this->input->post(\"totalMark_$a\", TRUE)),\r\n-                'grade' => $this->db->escape_like_str($grade[0]),\r\n-                'point' => $this->db->escape_like_str($grade[1]),\r\n-            );\r\n-            $this->db->insert('result_shit', $resultInfo);\r\n-        }\r\n-        $submitInfo = array(\r\n-            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-            'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-            'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n-            'date' => $this->db->escape_like_str($date),\r\n-            'song' => $this->db->escape_like_str($rehearsalSong),\r\n-            'submited' => $this->db->escape_like_str(0),\r\n-            'section_leader' => $this->db->escape_like_str($section_leaderName),\r\n-        );\r\n-        $songStatus = array(\r\n-            'status' => $this->db->escape_like_str('Result')\r\n-        );\r\n-        $this->db->where('id', $rehearsalRuId);\r\n-        $this->db->update('rehearsal_routine', $songStatus);\r\n-        if ($this->db->insert('result_submition_info', $submitInfo)) {\r\n-            $data['rehearsalTitle'] = $rehearsalTitle;\r\n-            $data['rehearsalSong'] = $rehearsalSong;\r\n-            $data['section_leaderName'] = $section_leaderName;\r\n-            $data['Choir_id'] = $Choir_id;\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('submitMessage', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function work only for admin.\r\n-    //He can view how many result shit was submited for aprove by admin.\r\n-    public function aproveShitView() {\r\n-        $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n-        $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('aproveShitView', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function can exes only admin and he can edit and Approve rehearsal rtesult shit\r\n-    public function checkResultShit() {\r\n-        $id = $this->input->get('id', TRUE);\r\n-        $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n-        $rehearsalTitle = $query[0]['rehearsal_title'];\r\n-        $Choir_id = $query[0]['Choir_id'];\r\n-        $song = $query[0]['song'];\r\n-        $data['rehearsalId'] = $id;\r\n-        $data['rehearsalTitle'] = $query[0]['rehearsal_title'];\r\n-        $data['Choir_id'] = $Choir_id;\r\n-        $data['section_leader'] = $query[0]['section_leader'];\r\n-        $data['song'] = $query[0]['song'];\r\n-        $data['resultShit'] = $this->rehearsalmodel->checkResultShit($Choir_id, $rehearsalTitle, $song);\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('checkResultShit', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function will edit Choir_member's result,number and grade,point\r\n-    public function editResult() {\r\n-        $id = $this->input->get('id');\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $updateData = array(\r\n-                'result' => $this->db->escape_like_str($this->input->post('result', TRUE)),\r\n-                'mark' => $this->db->escape_like_str($this->input->post('mark', TRUE)),\r\n-                'point' => $this->db->escape_like_str($this->input->post('point', TRUE)),\r\n-                'grade' => $this->db->escape_like_str($this->input->post('gread', TRUE))\r\n-            );\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('result_shit', $updateData)) {\r\n-                redirect('rehearsal/aproveShitView', 'refresh');\r\n-            }\r\n-        } else {\r\n-            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n-            $data['previousResult'] = $this->common->getWhere('result_shit', 'id', $id);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('editResult', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will approuve result shit which is sent from section_leader.\r\n-    public function approuveResultShit() {\r\n-        $id = $this->input->get('id');\r\n-        $data = array(\r\n-            'submited' => $this->db->escape_like_str(1)\r\n-        );\r\n-        $this->db->where('id', $id);\r\n-        if ($this->db->update('result_submition_info', $data)) {\r\n-            $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n-            foreach ($query as $row) {\r\n-                $rowInfo = $row;\r\n-            }\r\n-            $Choir_id = $rowInfo['Choir_id'];\r\n-            $rehearsalTitle = $rowInfo['rehearsal_title'];\r\n-            $rehearsalId = $rowInfo['rehearsal_id'];\r\n-            $song = $rowInfo['song'];\r\n-            $approuveSong = $this->rehearsalmodel->approuveSongAmount($Choir_id, $rehearsalTitle);\r\n-            $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n-            //By this if conditation we are chacking that all songs result was submited or not\r\n-            //When all songs result is submited in that time insert the informations in \"result_action\" table then it will ready for final calculation.\r\n-            if ($approuveSong == $ChoirSong) {\r\n-                $actionArrayt = array(\r\n-                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'status' => $this->db->escape_like_str('Not Complete')\r\n-                );\r\n-                if ($this->db->insert('result_action', $actionArrayt)) {\r\n-                    redirect('rehearsal/aproveShitView', 'refresh');\r\n-                }\r\n-            } else {\r\n-                redirect('rehearsal/aproveShitView', 'refresh');\r\n-            }\r\n-        }\r\n-    }\r\n-    //This function will make finalresult for class Choir_members\r\n-    public function finalResult() {\r\n-        $rehearsalActionId = $this->input->get('id');\r\n-        $Choir_id = $this->input->get('Choir');\r\n-        $rehearsalTitle = $this->input->get('rehearsal');\r\n-        $rehearsalId = $this->input->get('rehearsalId');\r\n-        //Here taking a Choir_members list by class title\r\n-        $Choir_memberQuery = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n-        foreach ($Choir_memberQuery as $row) {\r\n-            $Choir_memberId = $row['Choir_member_id'];\r\n-            $absent = $this->rehearsalmodel->absent($Choir_memberId);\r\n-            if ($absent == 0) {\r\n-                $fail = $this->rehearsalmodel->fail($Choir_memberId);\r\n-                if ($fail == 0) {\r\n-                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n-                    $finalPoint = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n-                    $gradeAverage = $this->rehearsalmodel->averageGrade($finalPoint);\r\n-                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n-                    $finalResultArray = array(\r\n-                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n-                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n-                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n-                        'point' => $this->db->escape_like_str($finalPoint),\r\n-                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n-                        'status' => $this->db->escape_like_str('Pass'),\r\n-                    );\r\n-                    $this->db->insert('final_result', $finalResultArray);\r\n-                } else {\r\n-                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n-                    $pointAverage = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n-                    $gradeAverage = $this->rehearsalmodel->averageGrade($pointAverage);\r\n-                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n-                    $finalResultArray = array(\r\n-                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n-                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n-                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n-                        'point' => $this->db->escape_like_str($pointAverage),\r\n-                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n-                        'status' => $this->db->escape_like_str('Fail'),\r\n-                        'fail_amount' => $this->db->escape_like_str($fail)\r\n-                    );\r\n-                    $this->db->insert('final_result', $finalResultArray);\r\n-                }\r\n-            } else {\r\n-                $finalResultArray = array(\r\n-                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n-                    'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n-                    'final_grade' => $this->db->escape_like_str('--'),\r\n-                    'point' => $this->db->escape_like_str('--'),\r\n-                    'total_mark' => $this->db->escape_like_str('--'),\r\n-                    'status' => $this->db->escape_like_str('Absent'),\r\n-                    'fail_amount' => $this->db->escape_like_str('--')\r\n-                );\r\n-                $this->db->insert('final_result', $finalResultArray);\r\n-            }\r\n-        }\r\n-        $rehearsalActionArray = array(\r\n-            'status' => $this->db->escape_like_str('Complete'),\r\n-            'publish' => $this->db->escape_like_str('Not Publish')\r\n-        );\r\n-        $this->db->where('id', $rehearsalActionId);\r\n-        if ($this->db->update('result_action', $rehearsalActionArray)) {\r\n-            $data['message'] = '<br><div class=\"alert alert-success\">\r\n-                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n-                                                <strong>' . lang('success') . '</strong> ' . lang('exac_12') . ' \"' . $rehearsalTitle . '\" ' . lang('exac_13') . ' \"' . $this->common->Choir_title($Choir_id) . '\"' . lang('exac_14') . '<br>\r\n-                                                <strong>' . lang('exac_info') . ' </strong>' . lang('exac_15') . '   \r\n-                                        </div>';\r\n-            $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n-            $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('aproveShitView', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function select class for results \r\n-    public function selectResult() {\r\n-        $data['result'] = $this->rehearsalmodel->publish('Complete', 'Publish');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('selectResult', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function will show details result in a class \r\n-    public function fullResult() {\r\n-        $Choir_id = $this->input->get('Choir');\r\n-        $rehearsalTitle = $this->input->get('rehearsal');\r\n-        \r\n-        $data['result'] = $this->rehearsalmodel->finalResultShow($Choir_id, $rehearsalTitle);\r\n-        // echo \"<pre>\";  // Use <pre> for better readability of array or object structures\r\n-        // print_r($data);\r\n-        // echo \"</pre>\";\r\n-        $data['Choir'] = $Choir_id;\r\n-        $data['rehearsalTitle'] = $rehearsalTitle;\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('fullResult', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //By this function admin can publish rehearsal result in day.\r\n-    public function publishResult() {\r\n-        $query = $this->rehearsalmodel->publish('Complete', 'Not Publish');\r\n-        foreach ($query as $row) {\r\n-            $id = $row['id'];\r\n-            $rehearsalTitle = $row['rehearsal_title'];\r\n-            $Choir_id = $row['Choir_id'];\r\n-            $array = array(\r\n-                'publish' => $this->db->escape_like_str('Publish')\r\n-            );\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('result_action', $array)) {\r\n-                $this->db->update('add_rehearsal', $array, array('rehearsal_title' => $this->db->escape_like_str($rehearsalTitle), 'Choir_id' => $this->db->escape_like_str($Choir_id)));\r\n-            }\r\n-        }\r\n-        redirect('rehearsal/selectResult', 'refresh');\r\n-    }\r\n-    //This function will select Choir_memberfor know mark shit\r\n-    public function selectChoirMarksheet() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            if ($this->input->post('rehearsalId', TRUE) && $this->input->post('Choir_memberId', TRUE)) {\r\n-                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-                $Choir_memberId = $this->input->post('Choir_memberId', TRUE);\r\n-                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n-                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-                $data['Choir_memberId'] = $Choir_memberId;\r\n-                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('marksheet', $data);\r\n-                $this->load->view('temp/footer');\r\n-            } else {\r\n-                echo lang('exac_16');\r\n-            }\r\n-        } else {\r\n-            $data['Choir'] = $this->common->getAllData('Choir');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('selectChoirMarksheet', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will called by ajax from view for load class markshit\r\n-    public function ajaxChoirMarkshit() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n-        foreach ($query as $row) {\r\n-            $data[] = $row;\r\n-        }\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-            $Choir_member = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n-            if (!empty($Choir_member)) {\r\n-                echo '<div class=\"form-group\">\r\n-                            <label class=\"col-md-3 control-label\">' . lang('exac_17') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                            <div class=\"col-md-6\">\r\n-                                <select name=\"Choir_memberId\" class=\"form-control\">';\r\n-                foreach ($Choir_member as $stu) {\r\n-                    echo '<option value=\"' . $stu['Choir_member_id'] . '\">' . $stu['Choir_member_title'] . '</option>';\r\n-                }\r\n-                echo '</select></div>\r\n-                    <input type=\"hidden\" name=\"Choir_memberTitle\" value=\"' . $stu['Choir_member_title'] . '\">\r\n-                            </div>';\r\n-            } else {\r\n-                echo '<div class=\"form-group\">\r\n-                            <label class=\"col-md-3 control-label\"></label>\r\n-                            <div class=\"col-md-6\">\r\n-                            <div class=\"alert alert-warning\">\r\n-                                    <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n-                            </div></div></div>';\r\n-            }\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //This function will select Choir_member's own marksheet\r\n-    public function sel_ow_ma() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            if ($this->input->post('rehearsalId', TRUE)) {\r\n-                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-                $user = $this->ion_auth->user()->row();\r\n-                $userId = $user->id;\r\n-                $Choir_memberId = $this->rehearsalmodel->Choir_member_id($userId);\r\n-                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n-                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-                $data['Choir_memberId'] = $Choir_memberId;\r\n-                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('ow_marksheet', $data);\r\n-                $this->load->view('temp/footer');\r\n-            } else {\r\n-                echo lang('exac_16');\r\n-            }\r\n-        } else {\r\n-            $data['Choir'] = $this->common->getAllData('Choir');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('sel_ow_ma', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will called by ajax from view for load class markshit\r\n-    public function ajax_ow_ma() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n-        foreach ($query as $row) {\r\n-            $data[] = $row;\r\n-        }\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-}\r\n"
                },
                {
                    "date": 1714943514244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1168 @@\n+<?php\r\n+if (!defined('BASEPATH')) {\r\n+    exit('No direct script access allowed');\r\n+}\r\n+class Rehearsal extends MX_Controller {\r\n+\r\n+    /**\r\n+     * This controller is using for \r\n+     *\r\n+     * Maps to the following URL\r\n+     * \t\thttp://rehearsalple.com/index.php/rehearsal\r\n+     * \t- or -  \r\n+     * \t\thttp://rehearsalple.com/index.php/rehearsal/<method_name>\r\n+     */\r\n+    function __construct() {\r\n+        parent::__construct();\r\n+        $this->lang->load('auth');\r\n+        $this->load->model('rehearsalmodel');\r\n+        if (!$this->ion_auth->logged_in()) {\r\n+            redirect('auth/login');\r\n+        }\r\n+    }\r\n+    //This function load all rehearsal grade and point\r\n+    public function rehearsalGread() {\r\n+        $data['grade'] = $this->common->getAllData('rehearsal_grade');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('rehearsalGread', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //THis function add new rehearsal grade\r\n+    public function addRehearsalGread() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $gradeName = $this->input->post('gradeName', TRUE);\r\n+            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n+            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n+            $nameTo = $this->input->post('nameTo', TRUE);\r\n+\r\n+            $data = array(\r\n+                'grade_name' => $this->db->escape_like_str($gradeName),\r\n+                'point' => $this->db->escape_like_str($gradePoint),\r\n+                'number_form' => $this->db->escape_like_str($numberFrom),\r\n+                'number_to' => $this->db->escape_like_str($nameTo)\r\n+            );\r\n+            $this->db->insert('rehearsal_grade', $data);\r\n+\r\n+            redirect('rehearsal/rehearsalGread', 'refresh');\r\n+        } else {\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('addRehearsalGrade');\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will edit rehearsal grade and point\r\n+    public function editGrade() {\r\n+        $id = $this->input->get('id');\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $gradeName = $this->input->post('gradeName', TRUE);\r\n+            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n+            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n+            $nameTo = $this->input->post('nameTo', TRUE);\r\n+\r\n+            $editData = array(\r\n+                'grade_name' => $this->db->escape_like_str($gradeName),\r\n+                'point' => $this->db->escape_like_str($gradePoint),\r\n+                'number_form' => $this->db->escape_like_str($numberFrom),\r\n+                'number_to' => $this->db->escape_like_str($nameTo)\r\n+            );\r\n+\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('rehearsal_grade', $editData)) {\r\n+                redirect('rehearsal/rehearsalGread', 'refresh');\r\n+            }\r\n+        } else {\r\n+            $data['gradInfo'] = $this->common->getWhere('rehearsal_grade', 'id', $id);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('editGrade', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function can delete rehearsal grade in this system\r\n+    public function deleteGrade() {\r\n+        $id = $this->input->get('id');\r\n+        if ($this->db->delete('rehearsal_grade', array('id' => $id))) {\r\n+            redirect('rehearsal/rehearsalGread', 'refresh');\r\n+        }\r\n+    }\r\n+    //This function is using for decleration new rehearsal for nay class.\r\n+    public function addRehearsal() {\r\n+        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n+            $startDate = $this->input->post('startDate', TRUE);\r\n+            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+            $totleTime = $this->input->post('totleTime', TRUE);\r\n+            $rehearsalInfo = array(\r\n+                'year' => $this->db->escape_like_str(date('Y')),\r\n+                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                'start_date' => $this->db->escape_like_str($startDate),\r\n+                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                'total_time' => $this->db->escape_like_str($totleTime),\r\n+                'publish' => $this->db->escape_like_str('Not Publish'),\r\n+                'final' => $this->db->escape_like_str($this->input->post('final', TRUE)),\r\n+                'status' => $this->db->escape_like_str('NoResult')\r\n+            );\r\n+            //Here is adding an rehearsal information into database\r\n+            if ($this->db->insert('add_rehearsal', $rehearsalInfo)) {\r\n+                $data['successMessage'] = '<div class=\"alert alert-success\">\r\n+                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n+                                                <strong>' . lang('success') . '</strong> ' . lang('exac_1') . '\" ' . $rehearsalTitle . ' \" ' . lang('exac_2') . ' \"' . $this->common->Choir_title($Choir_id) . '\" ' . lang('exac_3') . '\r\n+                                        </div>';\r\n+                $data['rehearsalInfo'] = $this->common->getAllData('add_rehearsal');\r\n+                $data['song'] = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n+                $data['weeklyDay'] = $this->common->getAllData('config_week_day');\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('addRutinSong', $data);\r\n+                $this->load->view('temp/footer');\r\n+            }\r\n+        } else {\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('addRehearsalRutine', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will complete an rehearsal routine after decletration that rehearsal.\r\n+    public function completRehearsalRoutin() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+            //this is the 1st song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate', TRUE);\r\n+                $song = $this->input->post('song', TRUE);\r\n+                $songCode = $this->input->post('songCode', TRUE);\r\n+                $romeNo = $this->input->post('romeNo', TRUE);\r\n+                $starTima = $this->input->post('starTima', TRUE);\r\n+                $endTima = $this->input->post('endTima', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 2nd song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_2', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_2', TRUE);\r\n+                $song = $this->input->post('song_2', TRUE);\r\n+                $songCode = $this->input->post('song', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_2', TRUE);\r\n+                $starTima = $this->input->post('starTima_2', TRUE);\r\n+                $endTima = $this->input->post('endTima_2', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_2', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 3rd song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_3', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_3', TRUE);\r\n+                $song = $this->input->post('song_3', TRUE);\r\n+                $songe = $this->input->post('songCode_3', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_3', TRUE);\r\n+                $starTima = $this->input->post('starTima_3', TRUE);\r\n+                $endTima = $this->input->post('endTima_3', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_3', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 4th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_4', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_4', TRUE);\r\n+                $song = $this->input->post('song_4', TRUE);\r\n+                $songCode = $this->input->post('songCode_4', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_4', TRUE);\r\n+                $starTima = $this->input->post('starTima_4', TRUE);\r\n+                $endTima = $this->input->post('endTima_4', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_4', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 5th songinformations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_5', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_5', TRUE);\r\n+                $song = $this->input->post('song_5', TRUE);\r\n+                $songCode = $this->input->post('songCode_5', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_5', TRUE);\r\n+                $starTima = $this->input->post('starTima_5', TRUE);\r\n+                $endTima = $this->input->post('endTima_5', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_5', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 6th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_6', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_6', TRUE);\r\n+                $song = $this->input->post('song_6', TRUE);\r\n+                $songCode = $this->input->post('songCode_6', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_6', TRUE);\r\n+                $starTima = $this->input->post('starTima_6', TRUE);\r\n+                $endTima = $this->input->post('endTima_6', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_6', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($song),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 7th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_7', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_7', TRUE);\r\n+                $song = $this->input->post('song_7', TRUE);\r\n+                $songCode = $this->input->post('songCode_7', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_7', TRUE);\r\n+                $starTima = $this->input->post('starTima_7', TRUE);\r\n+                $endTima = $this->input->post('endTima_7', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_7', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 8th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_8', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_8', TRUE);\r\n+                $song = $this->input->post('song_8', TRUE);\r\n+                $songCode = $this->input->post('songe_8', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_8', TRUE);\r\n+                $starTima = $this->input->post('starTima_8', TRUE);\r\n+                $endTima = $this->input->post('endTima_8', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_8', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 9th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_9', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_9', TRUE);\r\n+                $song = $this->input->post('song_9', TRUE);\r\n+                $songCode = $this->input->post('songCode_9', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_9', TRUE);\r\n+                $starTima = $this->input->post('starTima_9', TRUE);\r\n+                $endTima = $this->input->post('endTima_9', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_9', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 10th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_10', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_10', TRUE);\r\n+                $song = $this->input->post('song_10', TRUE);\r\n+                $songCode = $this->input->post('songCode_10', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_10', TRUE);\r\n+                $starTima = $this->input->post('starTima_10', TRUE);\r\n+                $endTima = $this->input->post('endTima_10', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_10', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 11th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_11', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_11', TRUE);\r\n+                $song = $this->input->post('song_11', TRUE);\r\n+                $songCode = $this->input->post('songCode_11', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_11', TRUE);\r\n+                $starTima = $this->input->post('starTima_11', TRUE);\r\n+                $endTima = $this->input->post('endTima_11', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_11', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 12th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_12', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_12', TRUE);\r\n+                $song = $this->input->post('song_12', TRUE);\r\n+                $songCode = $this->input->post('songCode_12', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_12', TRUE);\r\n+                $starTima = $this->input->post('starTima_12', TRUE);\r\n+                $endTima = $this->input->post('endTima_12', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_12', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 13th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_13', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_13', TRUE);\r\n+                $song = $this->input->post('song_13', TRUE);\r\n+                $songCode = $this->input->post('songCode_13', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_13', TRUE);\r\n+                $starTima = $this->input->post('starTima_13', TRUE);\r\n+                $endTima = $this->input->post('endTima_13', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_13', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 14th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_14', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_14', TRUE);\r\n+                $song = $this->input->post('song_14', TRUE);\r\n+                $songCode = $this->input->post('songCode_14', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_14', TRUE);\r\n+                $starTima = $this->input->post('starTima_14', TRUE);\r\n+                $endTima = $this->input->post('endTima_14', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_14', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            //this is the 15th song's informations for this rehearsal rutine\r\n+            if ($this->input->post('rehearsalSunjectFild_15', TRUE)) {\r\n+                $rehearsalDate = $this->input->post('rehearsalDate_15', TRUE);\r\n+                $song = $this->input->post('song_15', TRUE);\r\n+                $songCode = $this->input->post('songCode_15', TRUE);\r\n+                $romeNo = $this->input->post('romeNo_15', TRUE);\r\n+                $starTima = $this->input->post('starTima_15', TRUE);\r\n+                $endTima = $this->input->post('endTima_15', TRUE);\r\n+                $rehearsalShift = $this->input->post('rehearsalShift_15', TRUE);\r\n+                $routine = array(\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n+                    'song_code' => $this->db->escape_like_str($songCode),\r\n+                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n+                    'start_time' => $this->db->escape_like_str($starTima),\r\n+                    'end_time' => $this->db->escape_like_str($endTima),\r\n+                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n+                    'status' => $this->db->escape_like_str('NoResult')\r\n+                );\r\n+                //insert this song information into the database.\r\n+                $this->db->insert('rehearsal_routine', $routine);\r\n+            }\r\n+            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n+            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n+            $data['schoolName'] = $this->common->schoolName();\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('rutineSuccess', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function can delete rehearsal and rehearsal routine\r\n+    public function deleteRehearsalAndRoutine() {\r\n+        $rehearsalId = $this->input->get('rehearsalId', TRUE);\r\n+        if ($this->db->delete('add_rehearsal', array('id' => $rehearsalId))) {\r\n+            if ($this->db->delete('rehearsal_routine', array('rehearsal_id' => $rehearsalId))) {\r\n+                redirect('rehearsal/allRehearsalRutine', 'refresh');\r\n+            }\r\n+        }\r\n+    }\r\n+    //This function will select that which rehearsal routine \r\n+    public function allRehearsalRutine() {\r\n+        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('selectAllRoutine', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function load class's rehearsal title which is declard previously by class title.\r\n+    public function ajaxChoirRehearsal() {\r\n+        $Choir_id = $this->input->get('q');    \r\n+        // Using Active Record to prevent SQL injection\r\n+        $query = $this->db->select('*')\r\n+                          ->from('add_rehearsal')\r\n+                          ->where('Choir_id', $Choir_id)\r\n+                          ->get();\r\n+    \r\n+        $data = $query->result_array();\r\n+    \r\n+        // Check if we have any data returned\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                      <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n+                      <div class=\"col-md-6\">\r\n+                          <select name=\"rehearsalId\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                  </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                      <label class=\"col-md-3 control-label\"></label>\r\n+                      <div class=\"col-md-6\">\r\n+                          <div class=\"alert alert-warning\">\r\n+                              <strong>' . lang('exac_info') . '</strong> ' . lang('exac_5') . '\r\n+                          </div></div></div>';\r\n+        }\r\n+    }\r\n+    \r\n+    //This function show a success message when an Rehearsal added and made this rehearsal routine fully, with full rutine.\r\n+    public function routinView() {\r\n+        if ($this->input->post('submit', TRUE) && $this->input->post('rehearsalId', TRUE)) {\r\n+            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n+            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n+            $data['schoolName'] = $this->common->schoolName();\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('rutineSuccess', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            echo lang('exac_6');\r\n+        }\r\n+    }\r\n+    //This function is using for select class and Choir_members for rehearsal attendance.\r\n+    public function selectRehearsalAttendance() {\r\n+        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('selectRehearsalAttendance', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function is using for taking Choir_members by class title for rehearsal attendence\r\n+    public function rehearsalAttendance() {\r\n+        $date = date(\"d/m/Y\");\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $rehearsalId = $this->input->get('id');\r\n+            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+            $rehearsalSong = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n+            //Whene submit the attendence information after takeing the attendence\r\n+            $i = $this->input->post('in_velu', TRUE);\r\n+            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+            for ($x = 1; $x <= $i; $x++) {\r\n+                $roll = $this->input->post(\"roll_$x\", TRUE);\r\n+                $name = $this->input->post(\"Choir_memberName_$x\", TRUE);\r\n+                $present = $this->input->post(\"action_$x\", TRUE);\r\n+                $userId = $this->input->post(\"userId_$x\", TRUE);\r\n+                $Choir_memberInfoId = $this->input->post(\"Choir_memberInfoId_$x\", TRUE);\r\n+                $section = $this->input->post(\"section_$x\", TRUE);\r\n+                $data = array(\r\n+                    'date' => $this->db->escape_like_str($date),\r\n+                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                    'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n+                    'user_id' => $this->db->escape_like_str($userId),\r\n+                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberInfoId),\r\n+                    'roll_no' => $this->db->escape_like_str($roll),\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'section' => $this->db->escape_like_str($section),\r\n+                    'attendance' => $this->db->escape_like_str($present),\r\n+                    'Choir_member_title' => $this->db->escape_like_str($name),\r\n+                );\r\n+                //insert the $data information into \"daily_attendance\" database.\r\n+                $this->db->insert('rehearsal_attendanc', $data);\r\n+            }\r\n+            //Whene Rehearsal Attendance was full compleate then lode this page\r\n+            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($Choir_id, $rehearsalTitle, $rehearsalSong);\r\n+            print_r($data);\r\n+            $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('viewRehearsalAttendance', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+            $Choir_id = $this->input->post('Choir', TRUE);\r\n+            \r\n+            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId);\r\n+            if ($check == 'Have An Rehearsal') {\r\n+                //Here is loding Choir_member for rehearsal attendance.\r\n+                //Get here Choir_members and informations by class title.\r\n+                $queryData = array();\r\n+                $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n+                foreach ($query->result_array() as $row) {\r\n+                    $queryData[] = $row;\r\n+                }$data['Choir_members'] = $queryData;\r\n+                $data['rehearsalId'] = $rehearsalId;\r\n+                $data['rehearsalTitle'] = $rehearsalTitle;\r\n+                $data['rehearsalSong'] = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n+                $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n+                if (!empty($data['Choir_members'])) {\r\n+                    $this->load->view('temp/header');\r\n+                    $this->load->view('rehearsalAttendance', $data);\r\n+                    $this->load->view('temp/footer');\r\n+                } else {\r\n+                    echo 'has no any Choir_member.';\r\n+                }\r\n+            } elseif ($check == 'No Any Rehearsal') {\r\n+                // $info['ChoirTitle'] = $ChoirTitle;\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('attendanceFaild');\r\n+                $this->load->view('temp/footer');\r\n+            }\r\n+        }\r\n+    }\r\n+    //This function load's rehearsal attendance view\r\n+    public function viewRehearsalAttendance() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $ChoirTitle = $this->input->post('Choir', TRUE);\r\n+            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n+            $songTitle = $this->input->post('songTitle', TRUE);\r\n+            $data['ChoirTitle'] = $ChoirTitle;\r\n+            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($ChoirTitle, $rehearsalTitle, $songTitle);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('viewRehearsalAttendance', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('allRehearsalAttendanceView', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function is called by ajax from view\r\n+    public function ajaxAttendanceView() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $query = $this->db->query(\"SELECT * FROM add_rehearsal WHERE Choir_id=$Choir_id\");\r\n+        foreach ($query->result_array() as $row) {\r\n+            $data[] = $row;\r\n+        }\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"rehearsalTitle\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['rehearsal_title'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_7') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+        $song = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n+        if (!empty($song)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"songTitle\" class=\"form-control\">';\r\n+            foreach ($song as $sub) {\r\n+                echo '<option value=\"' . $sub['song_title'] . '\">' . $sub['song_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //The rehearsal attendance can edit by this function.\r\n+    public function editRehearsalAttendance() {\r\n+        $id = $this->input->get('id');\r\n+\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $updateInfo = array(\r\n+                'attendance' => $this->db->escape_like_str($this->input->post('action', TRUE))\r\n+            );\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('rehearsal_attendanc', $updateInfo)) {\r\n+                redirect('rehearsal/viewRehearsalAttendance', 'refresh');\r\n+            }\r\n+        }\r\n+        $data['rehearsalAttendanceInf'] = $this->common->getWhere('rehearsal_attendanc', 'id', $id);\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('editRehearsalAttendance', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //Here is first time select class for result.\r\n+    public function makingResult() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+            $data['Choir_id'] = $Choir_id;\r\n+            $data['rehearsalId'] = $this->input->post('rehearsalID', TRUE);\r\n+            $data['songTitle'] = $this->input->post('rehearsalSongTitle', TRUE);\r\n+            $data['rehearsalRUtinID'] = $this->input->post('subjRutID', TRUE);\r\n+            $data['section_leaderInfo'] = $this->rehearsalmodel->section_leaderInfo($this->input->post('section_leaderUserId', TRUE));\r\n+            $queryData = array();\r\n+            $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n+            foreach ($query->result_array() as $row) {\r\n+                $queryData[] = $row;\r\n+            }\r\n+            $data['Choir_members'] = $queryData;\r\n+            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('makingResult', $data);\r\n+            $this->load->view('temp/footer');\r\n+        } else {\r\n+            $data['s_Choir'] = $this->rehearsalmodel->getChoirTitle();\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('selectChoirResult', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will take class and give the class rehearsal title and song\r\n+    public function ajaxChoirResult() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $data = $this->rehearsalmodel->rehearsalTitleRes($Choir_id);\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select onchange=\"rehearsalSong(this.value)\" name=\"rehearsalID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n+                            <option value=\"\">' . lang('select') . '</option>';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div><div id=\"ajaxResult_2\"></div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_10') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //This function will show via ajax rehearsal song which are not compleated result\r\n+    public function ajaxRehearsalSong() {\r\n+        $rehearsalID = $this->input->get('erid');\r\n+        $song = $this->rehearsalmodel->rehearsalResSong($rehearsalID);\r\n+        if (!empty($song)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select onchange=\"rehearsalSongTitle(this.value)\" name=\"subjRutID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n+                            <option value=\"\">' . lang('select') . '</option>';\r\n+            foreach ($song as $sub) {\r\n+                echo '<option value=\"' . $sub['id'] . '\">' . $sub['rehearsal_song'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div><div id=\"ajaxResult_3\"></div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_11') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //This function will returan rehearsal song title \r\n+    public function ajaxRehearsalSubTitle() {\r\n+        $rehearsalId = $this->input->get('erid');\r\n+        $query = $this->db->query(\"SELECT rehearsal_song FROM rehearsal_routine WHERE id='$rehearsalId'\");\r\n+        foreach ($query->result_array() as $row) {\r\n+            $data = $row['rehearsal_song'];\r\n+            echo '<input type=\"hidden\" name=\"rehearsalSongTitle\" value=\"' . $row['rehearsal_song'] . '\">';\r\n+        }\r\n+    }\r\n+    //This function will submit result from section_leader.\r\n+    public function submitResult() {\r\n+        $i = $this->input->post('ivalue', TRUE);\r\n+        $rehearsalID = $this->input->post('rehearsalId', TRUE);\r\n+        $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalID);\r\n+        $rehearsalRuId = $this->input->post('rehearsalRutinID', TRUE);\r\n+        $rehearsalSong = $this->rehearsalmodel->rehearsalSongTitle($rehearsalRuId);\r\n+        $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+        $section_leaderName = $this->input->post('section_leaderName', TRUE);\r\n+        //here is checking this song is optionakl or not\r\n+        $date = date('d/m/Y');\r\n+        for ($a = 1; $a <= $i; $a++) {\r\n+            $rollNumber = $this->input->post(\"rollNumber_$a\", TRUE);\r\n+            $result = $this->input->post(\"result_$a\", TRUE);\r\n+            $greadInfo = $this->input->post(\"gread_$a\", TRUE);\r\n+            $grade = explode(\",\", $greadInfo);\r\n+            $resultInfo = array(\r\n+                'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n+                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                'Choir_member_name' => $this->db->escape_like_str($this->input->post(\"Choir_memberTitle_$a\", TRUE)),\r\n+                'Choir_member_id' => $this->db->escape_like_str($this->input->post(\"Choir_memberId_$a\", TRUE)),\r\n+                'roll_number' => $this->db->escape_like_str($this->input->post(\"rollNumber_$a\", TRUE)),\r\n+                'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n+                'result' => $this->db->escape_like_str($this->input->post(\"result_$a\", TRUE)),\r\n+                'mark' => $this->db->escape_like_str($this->input->post(\"totalMark_$a\", TRUE)),\r\n+                'grade' => $this->db->escape_like_str($grade[0]),\r\n+                'point' => $this->db->escape_like_str($grade[1]),\r\n+            );\r\n+            $this->db->insert('result_shit', $resultInfo);\r\n+        }\r\n+        $submitInfo = array(\r\n+            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+            'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+            'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n+            'date' => $this->db->escape_like_str($date),\r\n+            'song' => $this->db->escape_like_str($rehearsalSong),\r\n+            'submited' => $this->db->escape_like_str(0),\r\n+            'section_leader' => $this->db->escape_like_str($section_leaderName),\r\n+        );\r\n+        $songStatus = array(\r\n+            'status' => $this->db->escape_like_str('Result')\r\n+        );\r\n+        $this->db->where('id', $rehearsalRuId);\r\n+        $this->db->update('rehearsal_routine', $songStatus);\r\n+        if ($this->db->insert('result_submition_info', $submitInfo)) {\r\n+            $data['rehearsalTitle'] = $rehearsalTitle;\r\n+            $data['rehearsalSong'] = $rehearsalSong;\r\n+            $data['section_leaderName'] = $section_leaderName;\r\n+            $data['Choir_id'] = $Choir_id;\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('submitMessage', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function work only for admin.\r\n+    //He can view how many result shit was submited for aprove by admin.\r\n+    public function aproveShitView() {\r\n+        $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n+        $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('aproveShitView', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function can exes only admin and he can edit and Approve rehearsal rtesult shit\r\n+    public function checkResultShit() {\r\n+        $id = $this->input->get('id', TRUE);\r\n+        $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n+        $rehearsalTitle = $query[0]['rehearsal_title'];\r\n+        $Choir_id = $query[0]['Choir_id'];\r\n+        $song = $query[0]['song'];\r\n+        $data['rehearsalId'] = $id;\r\n+        $data['rehearsalTitle'] = $query[0]['rehearsal_title'];\r\n+        $data['Choir_id'] = $Choir_id;\r\n+        $data['section_leader'] = $query[0]['section_leader'];\r\n+        $data['song'] = $query[0]['song'];\r\n+        $data['resultShit'] = $this->rehearsalmodel->checkResultShit($Choir_id, $rehearsalTitle, $song);\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('checkResultShit', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function will edit Choir_member's result,number and grade,point\r\n+    public function editResult() {\r\n+        $id = $this->input->get('id');\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            $updateData = array(\r\n+                'result' => $this->db->escape_like_str($this->input->post('result', TRUE)),\r\n+                'mark' => $this->db->escape_like_str($this->input->post('mark', TRUE)),\r\n+                'point' => $this->db->escape_like_str($this->input->post('point', TRUE)),\r\n+                'grade' => $this->db->escape_like_str($this->input->post('gread', TRUE))\r\n+            );\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('result_shit', $updateData)) {\r\n+                redirect('rehearsal/aproveShitView', 'refresh');\r\n+            }\r\n+        } else {\r\n+            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n+            $data['previousResult'] = $this->common->getWhere('result_shit', 'id', $id);\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('editResult', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will approuve result shit which is sent from section_leader.\r\n+    public function approuveResultShit() {\r\n+        $id = $this->input->get('id');\r\n+        $data = array(\r\n+            'submited' => $this->db->escape_like_str(1)\r\n+        );\r\n+        $this->db->where('id', $id);\r\n+        if ($this->db->update('result_submition_info', $data)) {\r\n+            $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n+            foreach ($query as $row) {\r\n+                $rowInfo = $row;\r\n+            }\r\n+            $Choir_id = $rowInfo['Choir_id'];\r\n+            $rehearsalTitle = $rowInfo['rehearsal_title'];\r\n+            $rehearsalId = $rowInfo['rehearsal_id'];\r\n+            $song = $rowInfo['song'];\r\n+            $approuveSong = $this->rehearsalmodel->approuveSongAmount($Choir_id, $rehearsalTitle);\r\n+            $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n+            //By this if conditation we are chacking that all songs result was submited or not\r\n+            //When all songs result is submited in that time insert the informations in \"result_action\" table then it will ready for final calculation.\r\n+            if ($approuveSong == $ChoirSong) {\r\n+                $actionArrayt = array(\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'status' => $this->db->escape_like_str('Not Complete')\r\n+                );\r\n+                if ($this->db->insert('result_action', $actionArrayt)) {\r\n+                    redirect('rehearsal/aproveShitView', 'refresh');\r\n+                }\r\n+            } else {\r\n+                redirect('rehearsal/aproveShitView', 'refresh');\r\n+            }\r\n+        }\r\n+    }\r\n+    //This function will make finalresult for class Choir_members\r\n+    public function finalResult() {\r\n+        $rehearsalActionId = $this->input->get('id');\r\n+        $Choir_id = $this->input->get('Choir');\r\n+        $rehearsalTitle = $this->input->get('rehearsal');\r\n+        $rehearsalId = $this->input->get('rehearsalId');\r\n+        //Here taking a Choir_members list by class title\r\n+        $Choir_memberQuery = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n+        foreach ($Choir_memberQuery as $row) {\r\n+            $Choir_memberId = $row['Choir_member_id'];\r\n+            $absent = $this->rehearsalmodel->absent($Choir_memberId);\r\n+            if ($absent == 0) {\r\n+                $fail = $this->rehearsalmodel->fail($Choir_memberId);\r\n+                if ($fail == 0) {\r\n+                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n+                    $finalPoint = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n+                    $gradeAverage = $this->rehearsalmodel->averageGrade($finalPoint);\r\n+                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n+                    $finalResultArray = array(\r\n+                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n+                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n+                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n+                        'point' => $this->db->escape_like_str($finalPoint),\r\n+                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n+                        'status' => $this->db->escape_like_str('Pass'),\r\n+                    );\r\n+                    $this->db->insert('final_result', $finalResultArray);\r\n+                } else {\r\n+                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n+                    $pointAverage = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n+                    $gradeAverage = $this->rehearsalmodel->averageGrade($pointAverage);\r\n+                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n+                    $finalResultArray = array(\r\n+                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n+                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n+                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n+                        'point' => $this->db->escape_like_str($pointAverage),\r\n+                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n+                        'status' => $this->db->escape_like_str('Fail'),\r\n+                        'fail_amount' => $this->db->escape_like_str($fail)\r\n+                    );\r\n+                    $this->db->insert('final_result', $finalResultArray);\r\n+                }\r\n+            } else {\r\n+                $finalResultArray = array(\r\n+                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n+                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n+                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n+                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n+                    'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n+                    'final_grade' => $this->db->escape_like_str('--'),\r\n+                    'point' => $this->db->escape_like_str('--'),\r\n+                    'total_mark' => $this->db->escape_like_str('--'),\r\n+                    'status' => $this->db->escape_like_str('Absent'),\r\n+                    'fail_amount' => $this->db->escape_like_str('--')\r\n+                );\r\n+                $this->db->insert('final_result', $finalResultArray);\r\n+            }\r\n+        }\r\n+        $rehearsalActionArray = array(\r\n+            'status' => $this->db->escape_like_str('Complete'),\r\n+            'publish' => $this->db->escape_like_str('Not Publish')\r\n+        );\r\n+        $this->db->where('id', $rehearsalActionId);\r\n+        if ($this->db->update('result_action', $rehearsalActionArray)) {\r\n+            $data['message'] = '<br><div class=\"alert alert-success\">\r\n+                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n+                                                <strong>' . lang('success') . '</strong> ' . lang('exac_12') . ' \"' . $rehearsalTitle . '\" ' . lang('exac_13') . ' \"' . $this->common->Choir_title($Choir_id) . '\"' . lang('exac_14') . '<br>\r\n+                                                <strong>' . lang('exac_info') . ' </strong>' . lang('exac_15') . '   \r\n+                                        </div>';\r\n+            $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n+            $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('aproveShitView', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function select class for results \r\n+    public function selectResult() {\r\n+        $data['result'] = $this->rehearsalmodel->publish('Complete', 'Publish');\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('selectResult', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //This function will show details result in a class \r\n+    public function fullResult() {\r\n+        $Choir_id = $this->input->get('Choir');\r\n+        $rehearsalTitle = $this->input->get('rehearsal');\r\n+        \r\n+        $data['result'] = $this->rehearsalmodel->finalResultShow($Choir_id, $rehearsalTitle);\r\n+        // echo \"<pre>\";  // Use <pre> for better readability of array or object structures\r\n+        // print_r($data);\r\n+        // echo \"</pre>\";\r\n+        $data['Choir'] = $Choir_id;\r\n+        $data['rehearsalTitle'] = $rehearsalTitle;\r\n+        $this->load->view('temp/header');\r\n+        $this->load->view('fullResult', $data);\r\n+        $this->load->view('temp/footer');\r\n+    }\r\n+    //By this function admin can publish rehearsal result in day.\r\n+    public function publishResult() {\r\n+        $query = $this->rehearsalmodel->publish('Complete', 'Not Publish');\r\n+        foreach ($query as $row) {\r\n+            $id = $row['id'];\r\n+            $rehearsalTitle = $row['rehearsal_title'];\r\n+            $Choir_id = $row['Choir_id'];\r\n+            $array = array(\r\n+                'publish' => $this->db->escape_like_str('Publish')\r\n+            );\r\n+            $this->db->where('id', $id);\r\n+            if ($this->db->update('result_action', $array)) {\r\n+                $this->db->update('add_rehearsal', $array, array('rehearsal_title' => $this->db->escape_like_str($rehearsalTitle), 'Choir_id' => $this->db->escape_like_str($Choir_id)));\r\n+            }\r\n+        }\r\n+        redirect('rehearsal/selectResult', 'refresh');\r\n+    }\r\n+    //This function will select Choir_memberfor know mark shit\r\n+    public function selectChoirMarksheet() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            if ($this->input->post('rehearsalId', TRUE) && $this->input->post('Choir_memberId', TRUE)) {\r\n+                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+                $Choir_memberId = $this->input->post('Choir_memberId', TRUE);\r\n+                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n+                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+                $data['Choir_memberId'] = $Choir_memberId;\r\n+                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('marksheet', $data);\r\n+                $this->load->view('temp/footer');\r\n+            } else {\r\n+                echo lang('exac_16');\r\n+            }\r\n+        } else {\r\n+            $data['Choir'] = $this->common->getAllData('Choir');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('selectChoirMarksheet', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will called by ajax from view for load class markshit\r\n+    public function ajaxChoirMarkshit() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n+        foreach ($query as $row) {\r\n+            $data[] = $row;\r\n+        }\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+            $Choir_member = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n+            if (!empty($Choir_member)) {\r\n+                echo '<div class=\"form-group\">\r\n+                            <label class=\"col-md-3 control-label\">' . lang('exac_17') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                            <div class=\"col-md-6\">\r\n+                                <select name=\"Choir_memberId\" class=\"form-control\">';\r\n+                foreach ($Choir_member as $stu) {\r\n+                    echo '<option value=\"' . $stu['Choir_member_id'] . '\">' . $stu['Choir_member_title'] . '</option>';\r\n+                }\r\n+                echo '</select></div>\r\n+                    <input type=\"hidden\" name=\"Choir_memberTitle\" value=\"' . $stu['Choir_member_title'] . '\">\r\n+                            </div>';\r\n+            } else {\r\n+                echo '<div class=\"form-group\">\r\n+                            <label class=\"col-md-3 control-label\"></label>\r\n+                            <div class=\"col-md-6\">\r\n+                            <div class=\"alert alert-warning\">\r\n+                                    <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n+                            </div></div></div>';\r\n+            }\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+    //This function will select Choir_member's own marksheet\r\n+    public function sel_ow_ma() {\r\n+        if ($this->input->post('submit', TRUE)) {\r\n+            if ($this->input->post('rehearsalId', TRUE)) {\r\n+                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n+                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n+                $user = $this->ion_auth->user()->row();\r\n+                $userId = $user->id;\r\n+                $Choir_memberId = $this->rehearsalmodel->Choir_member_id($userId);\r\n+                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n+                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n+                $data['Choir_memberId'] = $Choir_memberId;\r\n+                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n+                $this->load->view('temp/header');\r\n+                $this->load->view('ow_marksheet', $data);\r\n+                $this->load->view('temp/footer');\r\n+            } else {\r\n+                echo lang('exac_16');\r\n+            }\r\n+        } else {\r\n+            $data['Choir'] = $this->common->getAllData('Choir');\r\n+            $this->load->view('temp/header');\r\n+            $this->load->view('sel_ow_ma', $data);\r\n+            $this->load->view('temp/footer');\r\n+        }\r\n+    }\r\n+    //This function will called by ajax from view for load class markshit\r\n+    public function ajax_ow_ma() {\r\n+        $Choir_id = $this->input->get('q');\r\n+        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n+        foreach ($query as $row) {\r\n+            $data[] = $row;\r\n+        }\r\n+        if (!empty($data)) {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n+                        <div class=\"col-md-6\">\r\n+                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n+            foreach ($data as $sec) {\r\n+                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n+            }\r\n+            echo '</select></div>\r\n+                        </div>';\r\n+        } else {\r\n+            echo '<div class=\"form-group\">\r\n+                        <label class=\"col-md-3 control-label\"></label>\r\n+                        <div class=\"col-md-6\">\r\n+                        <div class=\"alert alert-warning\">\r\n+                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n+                        </div></div></div>';\r\n+        }\r\n+    }\r\n+}\r\n"
                },
                {
                    "date": 1714992307578,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1165,1172 +1165,4 @@\n                         </div></div></div>';\r\n         }\r\n     }\r\n }\r\n-<?php\r\n-if (!defined('BASEPATH')) {\r\n-    exit('No direct script access allowed');\r\n-}\r\n-class Rehearsal extends MX_Controller {\r\n-\r\n-    /**\r\n-     * This controller is using for \r\n-     *\r\n-     * Maps to the following URL\r\n-     * \t\thttp://rehearsalple.com/index.php/rehearsal\r\n-     * \t- or -  \r\n-     * \t\thttp://rehearsalple.com/index.php/rehearsal/<method_name>\r\n-     */\r\n-    function __construct() {\r\n-        parent::__construct();\r\n-        $this->lang->load('auth');\r\n-        $this->load->model('rehearsalmodel');\r\n-        if (!$this->ion_auth->logged_in()) {\r\n-            redirect('auth/login');\r\n-        }\r\n-    }\r\n-    //This function load all rehearsal grade and point\r\n-    public function rehearsalGread() {\r\n-        $data['grade'] = $this->common->getAllData('rehearsal_grade');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('rehearsalGread', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //THis function add new rehearsal grade\r\n-    public function addRehearsalGread() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $gradeName = $this->input->post('gradeName', TRUE);\r\n-            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n-            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n-            $nameTo = $this->input->post('nameTo', TRUE);\r\n-\r\n-            $data = array(\r\n-                'grade_name' => $this->db->escape_like_str($gradeName),\r\n-                'point' => $this->db->escape_like_str($gradePoint),\r\n-                'number_form' => $this->db->escape_like_str($numberFrom),\r\n-                'number_to' => $this->db->escape_like_str($nameTo)\r\n-            );\r\n-            $this->db->insert('rehearsal_grade', $data);\r\n-\r\n-            redirect('rehearsal/rehearsalGread', 'refresh');\r\n-        } else {\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('addRehearsalGrade');\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will edit rehearsal grade and point\r\n-    public function editGrade() {\r\n-        $id = $this->input->get('id');\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $gradeName = $this->input->post('gradeName', TRUE);\r\n-            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n-            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n-            $nameTo = $this->input->post('nameTo', TRUE);\r\n-\r\n-            $editData = array(\r\n-                'grade_name' => $this->db->escape_like_str($gradeName),\r\n-                'point' => $this->db->escape_like_str($gradePoint),\r\n-                'number_form' => $this->db->escape_like_str($numberFrom),\r\n-                'number_to' => $this->db->escape_like_str($nameTo)\r\n-            );\r\n-\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('rehearsal_grade', $editData)) {\r\n-                redirect('rehearsal/rehearsalGread', 'refresh');\r\n-            }\r\n-        } else {\r\n-            $data['gradInfo'] = $this->common->getWhere('rehearsal_grade', 'id', $id);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('editGrade', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function can delete rehearsal grade in this system\r\n-    public function deleteGrade() {\r\n-        $id = $this->input->get('id');\r\n-        if ($this->db->delete('rehearsal_grade', array('id' => $id))) {\r\n-            redirect('rehearsal/rehearsalGread', 'refresh');\r\n-        }\r\n-    }\r\n-    //This function is using for decleration new rehearsal for nay class.\r\n-    public function addRehearsal() {\r\n-        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n-            $startDate = $this->input->post('startDate', TRUE);\r\n-            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-            $totleTime = $this->input->post('totleTime', TRUE);\r\n-            $rehearsalInfo = array(\r\n-                'year' => $this->db->escape_like_str(date('Y')),\r\n-                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                'start_date' => $this->db->escape_like_str($startDate),\r\n-                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                'total_time' => $this->db->escape_like_str($totleTime),\r\n-                'publish' => $this->db->escape_like_str('Not Publish'),\r\n-                'final' => $this->db->escape_like_str($this->input->post('final', TRUE)),\r\n-                'status' => $this->db->escape_like_str('NoResult')\r\n-            );\r\n-            //Here is adding an rehearsal information into database\r\n-            if ($this->db->insert('add_rehearsal', $rehearsalInfo)) {\r\n-                $data['successMessage'] = '<div class=\"alert alert-success\">\r\n-                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n-                                                <strong>' . lang('success') . '</strong> ' . lang('exac_1') . '\" ' . $rehearsalTitle . ' \" ' . lang('exac_2') . ' \"' . $this->common->Choir_title($Choir_id) . '\" ' . lang('exac_3') . '\r\n-                                        </div>';\r\n-                $data['rehearsalInfo'] = $this->common->getAllData('add_rehearsal');\r\n-                $data['song'] = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n-                $data['weeklyDay'] = $this->common->getAllData('config_week_day');\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('addRutinSong', $data);\r\n-                $this->load->view('temp/footer');\r\n-            }\r\n-        } else {\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('addRehearsalRutine', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will complete an rehearsal routine after decletration that rehearsal.\r\n-    public function completRehearsalRoutin() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-            //this is the 1st song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate', TRUE);\r\n-                $song = $this->input->post('song', TRUE);\r\n-                $songCode = $this->input->post('songCode', TRUE);\r\n-                $romeNo = $this->input->post('romeNo', TRUE);\r\n-                $starTima = $this->input->post('starTima', TRUE);\r\n-                $endTima = $this->input->post('endTima', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 2nd song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_2', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_2', TRUE);\r\n-                $song = $this->input->post('song_2', TRUE);\r\n-                $songCode = $this->input->post('song', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_2', TRUE);\r\n-                $starTima = $this->input->post('starTima_2', TRUE);\r\n-                $endTima = $this->input->post('endTima_2', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_2', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 3rd song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_3', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_3', TRUE);\r\n-                $song = $this->input->post('song_3', TRUE);\r\n-                $songe = $this->input->post('songCode_3', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_3', TRUE);\r\n-                $starTima = $this->input->post('starTima_3', TRUE);\r\n-                $endTima = $this->input->post('endTima_3', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_3', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 4th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_4', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_4', TRUE);\r\n-                $song = $this->input->post('song_4', TRUE);\r\n-                $songCode = $this->input->post('songCode_4', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_4', TRUE);\r\n-                $starTima = $this->input->post('starTima_4', TRUE);\r\n-                $endTima = $this->input->post('endTima_4', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_4', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 5th songinformations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_5', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_5', TRUE);\r\n-                $song = $this->input->post('song_5', TRUE);\r\n-                $songCode = $this->input->post('songCode_5', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_5', TRUE);\r\n-                $starTima = $this->input->post('starTima_5', TRUE);\r\n-                $endTima = $this->input->post('endTima_5', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_5', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 6th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_6', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_6', TRUE);\r\n-                $song = $this->input->post('song_6', TRUE);\r\n-                $songCode = $this->input->post('songCode_6', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_6', TRUE);\r\n-                $starTima = $this->input->post('starTima_6', TRUE);\r\n-                $endTima = $this->input->post('endTima_6', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_6', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($song),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 7th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_7', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_7', TRUE);\r\n-                $song = $this->input->post('song_7', TRUE);\r\n-                $songCode = $this->input->post('songCode_7', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_7', TRUE);\r\n-                $starTima = $this->input->post('starTima_7', TRUE);\r\n-                $endTima = $this->input->post('endTima_7', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_7', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 8th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_8', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_8', TRUE);\r\n-                $song = $this->input->post('song_8', TRUE);\r\n-                $songCode = $this->input->post('songe_8', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_8', TRUE);\r\n-                $starTima = $this->input->post('starTima_8', TRUE);\r\n-                $endTima = $this->input->post('endTima_8', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_8', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 9th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_9', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_9', TRUE);\r\n-                $song = $this->input->post('song_9', TRUE);\r\n-                $songCode = $this->input->post('songCode_9', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_9', TRUE);\r\n-                $starTima = $this->input->post('starTima_9', TRUE);\r\n-                $endTima = $this->input->post('endTima_9', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_9', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 10th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_10', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_10', TRUE);\r\n-                $song = $this->input->post('song_10', TRUE);\r\n-                $songCode = $this->input->post('songCode_10', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_10', TRUE);\r\n-                $starTima = $this->input->post('starTima_10', TRUE);\r\n-                $endTima = $this->input->post('endTima_10', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_10', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 11th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_11', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_11', TRUE);\r\n-                $song = $this->input->post('song_11', TRUE);\r\n-                $songCode = $this->input->post('songCode_11', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_11', TRUE);\r\n-                $starTima = $this->input->post('starTima_11', TRUE);\r\n-                $endTima = $this->input->post('endTima_11', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_11', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 12th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_12', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_12', TRUE);\r\n-                $song = $this->input->post('song_12', TRUE);\r\n-                $songCode = $this->input->post('songCode_12', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_12', TRUE);\r\n-                $starTima = $this->input->post('starTima_12', TRUE);\r\n-                $endTima = $this->input->post('endTima_12', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_12', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 13th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_13', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_13', TRUE);\r\n-                $song = $this->input->post('song_13', TRUE);\r\n-                $songCode = $this->input->post('songCode_13', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_13', TRUE);\r\n-                $starTima = $this->input->post('starTima_13', TRUE);\r\n-                $endTima = $this->input->post('endTima_13', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_13', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 14th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_14', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_14', TRUE);\r\n-                $song = $this->input->post('song_14', TRUE);\r\n-                $songCode = $this->input->post('songCode_14', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_14', TRUE);\r\n-                $starTima = $this->input->post('starTima_14', TRUE);\r\n-                $endTima = $this->input->post('endTima_14', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_14', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            //this is the 15th song's informations for this rehearsal rutine\r\n-            if ($this->input->post('rehearsalSunjectFild_15', TRUE)) {\r\n-                $rehearsalDate = $this->input->post('rehearsalDate_15', TRUE);\r\n-                $song = $this->input->post('song_15', TRUE);\r\n-                $songCode = $this->input->post('songCode_15', TRUE);\r\n-                $romeNo = $this->input->post('romeNo_15', TRUE);\r\n-                $starTima = $this->input->post('starTima_15', TRUE);\r\n-                $endTima = $this->input->post('endTima_15', TRUE);\r\n-                $rehearsalShift = $this->input->post('rehearsalShift_15', TRUE);\r\n-                $routine = array(\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n-                    'song_code' => $this->db->escape_like_str($songCode),\r\n-                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n-                    'start_time' => $this->db->escape_like_str($starTima),\r\n-                    'end_time' => $this->db->escape_like_str($endTima),\r\n-                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n-                    'status' => $this->db->escape_like_str('NoResult')\r\n-                );\r\n-                //insert this song information into the database.\r\n-                $this->db->insert('rehearsal_routine', $routine);\r\n-            }\r\n-            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n-            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n-            $data['schoolName'] = $this->common->schoolName();\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('rutineSuccess', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function can delete rehearsal and rehearsal routine\r\n-    public function deleteRehearsalAndRoutine() {\r\n-        $rehearsalId = $this->input->get('rehearsalId', TRUE);\r\n-        if ($this->db->delete('add_rehearsal', array('id' => $rehearsalId))) {\r\n-            if ($this->db->delete('rehearsal_routine', array('rehearsal_id' => $rehearsalId))) {\r\n-                redirect('rehearsal/allRehearsalRutine', 'refresh');\r\n-            }\r\n-        }\r\n-    }\r\n-    //This function will select that which rehearsal routine \r\n-    public function allRehearsalRutine() {\r\n-        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('selectAllRoutine', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function load class's rehearsal title which is declard previously by class title.\r\n-    public function ajaxChoirRehearsal() {\r\n-        $Choir_id = $this->input->get('q');    \r\n-        // Using Active Record to prevent SQL injection\r\n-        $query = $this->db->select('*')\r\n-                          ->from('add_rehearsal')\r\n-                          ->where('Choir_id', $Choir_id)\r\n-                          ->get();\r\n-    \r\n-        $data = $query->result_array();\r\n-    \r\n-        // Check if we have any data returned\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                      <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n-                      <div class=\"col-md-6\">\r\n-                          <select name=\"rehearsalId\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                  </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                      <label class=\"col-md-3 control-label\"></label>\r\n-                      <div class=\"col-md-6\">\r\n-                          <div class=\"alert alert-warning\">\r\n-                              <strong>' . lang('exac_info') . '</strong> ' . lang('exac_5') . '\r\n-                          </div></div></div>';\r\n-        }\r\n-    }\r\n-    \r\n-    //This function show a success message when an Rehearsal added and made this rehearsal routine fully, with full rutine.\r\n-    public function routinView() {\r\n-        if ($this->input->post('submit', TRUE) && $this->input->post('rehearsalId', TRUE)) {\r\n-            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n-            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n-            $data['schoolName'] = $this->common->schoolName();\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('rutineSuccess', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            echo lang('exac_6');\r\n-        }\r\n-    }\r\n-    //This function is using for select class and Choir_members for rehearsal attendance.\r\n-    public function selectRehearsalAttendance() {\r\n-        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('selectRehearsalAttendance', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function is using for taking Choir_members by class title for rehearsal attendence\r\n-    public function rehearsalAttendance() {\r\n-        $date = date(\"d/m/Y\");\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $rehearsalId = $this->input->get('id');\r\n-            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-            $rehearsalSong = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n-            //Whene submit the attendence information after takeing the attendence\r\n-            $i = $this->input->post('in_velu', TRUE);\r\n-            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-            for ($x = 1; $x <= $i; $x++) {\r\n-                $roll = $this->input->post(\"roll_$x\", TRUE);\r\n-                $name = $this->input->post(\"Choir_memberName_$x\", TRUE);\r\n-                $present = $this->input->post(\"action_$x\", TRUE);\r\n-                $userId = $this->input->post(\"userId_$x\", TRUE);\r\n-                $Choir_memberInfoId = $this->input->post(\"Choir_memberInfoId_$x\", TRUE);\r\n-                $section = $this->input->post(\"section_$x\", TRUE);\r\n-                $data = array(\r\n-                    'date' => $this->db->escape_like_str($date),\r\n-                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                    'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n-                    'user_id' => $this->db->escape_like_str($userId),\r\n-                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberInfoId),\r\n-                    'roll_no' => $this->db->escape_like_str($roll),\r\n-                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                    'section' => $this->db->escape_like_str($section),\r\n-                    'attendance' => $this->db->escape_like_str($present),\r\n-                    'Choir_member_title' => $this->db->escape_like_str($name),\r\n-                );\r\n-                //insert the $data information into \"daily_attendance\" database.\r\n-                $this->db->insert('rehearsal_attendanc', $data);\r\n-            }\r\n-            //Whene Rehearsal Attendance was full compleate then lode this page\r\n-            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($Choir_id, $rehearsalTitle, $rehearsalSong);\r\n-            print_r($data);\r\n-            $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('viewRehearsalAttendance', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-            $Choir_id = $this->input->post('Choir', TRUE);\r\n-            \r\n-            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId);\r\n-            if ($check == 'Have An Rehearsal') {\r\n-                //Here is loding Choir_member for rehearsal attendance.\r\n-                //Get here Choir_members and informations by class title.\r\n-                $queryData = array();\r\n-                $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n-                foreach ($query->result_array() as $row) {\r\n-                    $queryData[] = $row;\r\n-                }$data['Choir_members'] = $queryData;\r\n-                $data['rehearsalId'] = $rehearsalId;\r\n-                $data['rehearsalTitle'] = $rehearsalTitle;\r\n-                $data['rehearsalSong'] = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n-                $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n-                if (!empty($data['Choir_members'])) {\r\n-                    $this->load->view('temp/header');\r\n-                    $this->load->view('rehearsalAttendance', $data);\r\n-                    $this->load->view('temp/footer');\r\n-                } else {\r\n-                    echo 'has no any Choir_member.';\r\n-                }\r\n-            } elseif ($check == 'No Any Rehearsal') {\r\n-                // $info['ChoirTitle'] = $ChoirTitle;\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('attendanceFaild');\r\n-                $this->load->view('temp/footer');\r\n-            }\r\n-        }\r\n-    }\r\n-    //This function load's rehearsal attendance view\r\n-    public function viewRehearsalAttendance() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $ChoirTitle = $this->input->post('Choir', TRUE);\r\n-            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n-            $songTitle = $this->input->post('songTitle', TRUE);\r\n-            $data['ChoirTitle'] = $ChoirTitle;\r\n-            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($ChoirTitle, $rehearsalTitle, $songTitle);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('viewRehearsalAttendance', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('allRehearsalAttendanceView', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function is called by ajax from view\r\n-    public function ajaxAttendanceView() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $query = $this->db->query(\"SELECT * FROM add_rehearsal WHERE Choir_id=$Choir_id\");\r\n-        foreach ($query->result_array() as $row) {\r\n-            $data[] = $row;\r\n-        }\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"rehearsalTitle\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['rehearsal_title'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_7') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-        $song = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n-        if (!empty($song)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"songTitle\" class=\"form-control\">';\r\n-            foreach ($song as $sub) {\r\n-                echo '<option value=\"' . $sub['song_title'] . '\">' . $sub['song_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //The rehearsal attendance can edit by this function.\r\n-    public function editRehearsalAttendance() {\r\n-        $id = $this->input->get('id');\r\n-\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $updateInfo = array(\r\n-                'attendance' => $this->db->escape_like_str($this->input->post('action', TRUE))\r\n-            );\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('rehearsal_attendanc', $updateInfo)) {\r\n-                redirect('rehearsal/viewRehearsalAttendance', 'refresh');\r\n-            }\r\n-        }\r\n-        $data['rehearsalAttendanceInf'] = $this->common->getWhere('rehearsal_attendanc', 'id', $id);\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('editRehearsalAttendance', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //Here is first time select class for result.\r\n-    public function makingResult() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-            $data['Choir_id'] = $Choir_id;\r\n-            $data['rehearsalId'] = $this->input->post('rehearsalID', TRUE);\r\n-            $data['songTitle'] = $this->input->post('rehearsalSongTitle', TRUE);\r\n-            $data['rehearsalRUtinID'] = $this->input->post('subjRutID', TRUE);\r\n-            $data['section_leaderInfo'] = $this->rehearsalmodel->section_leaderInfo($this->input->post('section_leaderUserId', TRUE));\r\n-            $queryData = array();\r\n-            $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n-            foreach ($query->result_array() as $row) {\r\n-                $queryData[] = $row;\r\n-            }\r\n-            $data['Choir_members'] = $queryData;\r\n-            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('makingResult', $data);\r\n-            $this->load->view('temp/footer');\r\n-        } else {\r\n-            $data['s_Choir'] = $this->rehearsalmodel->getChoirTitle();\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('selectChoirResult', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will take class and give the class rehearsal title and song\r\n-    public function ajaxChoirResult() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $data = $this->rehearsalmodel->rehearsalTitleRes($Choir_id);\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select onchange=\"rehearsalSong(this.value)\" name=\"rehearsalID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n-                            <option value=\"\">' . lang('select') . '</option>';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div><div id=\"ajaxResult_2\"></div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_10') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //This function will show via ajax rehearsal song which are not compleated result\r\n-    public function ajaxRehearsalSong() {\r\n-        $rehearsalID = $this->input->get('erid');\r\n-        $song = $this->rehearsalmodel->rehearsalResSong($rehearsalID);\r\n-        if (!empty($song)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select onchange=\"rehearsalSongTitle(this.value)\" name=\"subjRutID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n-                            <option value=\"\">' . lang('select') . '</option>';\r\n-            foreach ($song as $sub) {\r\n-                echo '<option value=\"' . $sub['id'] . '\">' . $sub['rehearsal_song'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div><div id=\"ajaxResult_3\"></div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_11') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //This function will returan rehearsal song title \r\n-    public function ajaxRehearsalSubTitle() {\r\n-        $rehearsalId = $this->input->get('erid');\r\n-        $query = $this->db->query(\"SELECT rehearsal_song FROM rehearsal_routine WHERE id='$rehearsalId'\");\r\n-        foreach ($query->result_array() as $row) {\r\n-            $data = $row['rehearsal_song'];\r\n-            echo '<input type=\"hidden\" name=\"rehearsalSongTitle\" value=\"' . $row['rehearsal_song'] . '\">';\r\n-        }\r\n-    }\r\n-    //This function will submit result from section_leader.\r\n-    public function submitResult() {\r\n-        $i = $this->input->post('ivalue', TRUE);\r\n-        $rehearsalID = $this->input->post('rehearsalId', TRUE);\r\n-        $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalID);\r\n-        $rehearsalRuId = $this->input->post('rehearsalRutinID', TRUE);\r\n-        $rehearsalSong = $this->rehearsalmodel->rehearsalSongTitle($rehearsalRuId);\r\n-        $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-        $section_leaderName = $this->input->post('section_leaderName', TRUE);\r\n-        //here is checking this song is optionakl or not\r\n-        $date = date('d/m/Y');\r\n-        for ($a = 1; $a <= $i; $a++) {\r\n-            $rollNumber = $this->input->post(\"rollNumber_$a\", TRUE);\r\n-            $result = $this->input->post(\"result_$a\", TRUE);\r\n-            $greadInfo = $this->input->post(\"gread_$a\", TRUE);\r\n-            $grade = explode(\",\", $greadInfo);\r\n-            $resultInfo = array(\r\n-                'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n-                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                'Choir_member_name' => $this->db->escape_like_str($this->input->post(\"Choir_memberTitle_$a\", TRUE)),\r\n-                'Choir_member_id' => $this->db->escape_like_str($this->input->post(\"Choir_memberId_$a\", TRUE)),\r\n-                'roll_number' => $this->db->escape_like_str($this->input->post(\"rollNumber_$a\", TRUE)),\r\n-                'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n-                'result' => $this->db->escape_like_str($this->input->post(\"result_$a\", TRUE)),\r\n-                'mark' => $this->db->escape_like_str($this->input->post(\"totalMark_$a\", TRUE)),\r\n-                'grade' => $this->db->escape_like_str($grade[0]),\r\n-                'point' => $this->db->escape_like_str($grade[1]),\r\n-            );\r\n-            $this->db->insert('result_shit', $resultInfo);\r\n-        }\r\n-        $submitInfo = array(\r\n-            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-            'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-            'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n-            'date' => $this->db->escape_like_str($date),\r\n-            'song' => $this->db->escape_like_str($rehearsalSong),\r\n-            'submited' => $this->db->escape_like_str(0),\r\n-            'section_leader' => $this->db->escape_like_str($section_leaderName),\r\n-        );\r\n-        $songStatus = array(\r\n-            'status' => $this->db->escape_like_str('Result')\r\n-        );\r\n-        $this->db->where('id', $rehearsalRuId);\r\n-        $this->db->update('rehearsal_routine', $songStatus);\r\n-        if ($this->db->insert('result_submition_info', $submitInfo)) {\r\n-            $data['rehearsalTitle'] = $rehearsalTitle;\r\n-            $data['rehearsalSong'] = $rehearsalSong;\r\n-            $data['section_leaderName'] = $section_leaderName;\r\n-            $data['Choir_id'] = $Choir_id;\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('submitMessage', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function work only for admin.\r\n-    //He can view how many result shit was submited for aprove by admin.\r\n-    public function aproveShitView() {\r\n-        $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n-        $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('aproveShitView', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function can exes only admin and he can edit and Approve rehearsal rtesult shit\r\n-    public function checkResultShit() {\r\n-        $id = $this->input->get('id', TRUE);\r\n-        $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n-        $rehearsalTitle = $query[0]['rehearsal_title'];\r\n-        $Choir_id = $query[0]['Choir_id'];\r\n-        $song = $query[0]['song'];\r\n-        $data['rehearsalId'] = $id;\r\n-        $data['rehearsalTitle'] = $query[0]['rehearsal_title'];\r\n-        $data['Choir_id'] = $Choir_id;\r\n-        $data['section_leader'] = $query[0]['section_leader'];\r\n-        $data['song'] = $query[0]['song'];\r\n-        $data['resultShit'] = $this->rehearsalmodel->checkResultShit($Choir_id, $rehearsalTitle, $song);\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('checkResultShit', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function will edit Choir_member's result,number and grade,point\r\n-    public function editResult() {\r\n-        $id = $this->input->get('id');\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            $updateData = array(\r\n-                'result' => $this->db->escape_like_str($this->input->post('result', TRUE)),\r\n-                'mark' => $this->db->escape_like_str($this->input->post('mark', TRUE)),\r\n-                'point' => $this->db->escape_like_str($this->input->post('point', TRUE)),\r\n-                'grade' => $this->db->escape_like_str($this->input->post('gread', TRUE))\r\n-            );\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('result_shit', $updateData)) {\r\n-                redirect('rehearsal/aproveShitView', 'refresh');\r\n-            }\r\n-        } else {\r\n-            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n-            $data['previousResult'] = $this->common->getWhere('result_shit', 'id', $id);\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('editResult', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will approuve result shit which is sent from section_leader.\r\n-    public function approuveResultShit() {\r\n-        $id = $this->input->get('id');\r\n-        $data = array(\r\n-            'submited' => $this->db->escape_like_str(1)\r\n-        );\r\n-        $this->db->where('id', $id);\r\n-        if ($this->db->update('result_submition_info', $data)) {\r\n-            $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n-            foreach ($query as $row) {\r\n-                $rowInfo = $row;\r\n-            }\r\n-            $Choir_id = $rowInfo['Choir_id'];\r\n-            $rehearsalTitle = $rowInfo['rehearsal_title'];\r\n-            $rehearsalId = $rowInfo['rehearsal_id'];\r\n-            $song = $rowInfo['song'];\r\n-            $approuveSong = $this->rehearsalmodel->approuveSongAmount($Choir_id, $rehearsalTitle);\r\n-            $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n-            //By this if conditation we are chacking that all songs result was submited or not\r\n-            //When all songs result is submited in that time insert the informations in \"result_action\" table then it will ready for final calculation.\r\n-            if ($approuveSong == $ChoirSong) {\r\n-                $actionArrayt = array(\r\n-                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'status' => $this->db->escape_like_str('Not Complete')\r\n-                );\r\n-                if ($this->db->insert('result_action', $actionArrayt)) {\r\n-                    redirect('rehearsal/aproveShitView', 'refresh');\r\n-                }\r\n-            } else {\r\n-                redirect('rehearsal/aproveShitView', 'refresh');\r\n-            }\r\n-        }\r\n-    }\r\n-    //This function will make finalresult for class Choir_members\r\n-    public function finalResult() {\r\n-        $rehearsalActionId = $this->input->get('id');\r\n-        $Choir_id = $this->input->get('Choir');\r\n-        $rehearsalTitle = $this->input->get('rehearsal');\r\n-        $rehearsalId = $this->input->get('rehearsalId');\r\n-        //Here taking a Choir_members list by class title\r\n-        $Choir_memberQuery = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n-        foreach ($Choir_memberQuery as $row) {\r\n-            $Choir_memberId = $row['Choir_member_id'];\r\n-            $absent = $this->rehearsalmodel->absent($Choir_memberId);\r\n-            if ($absent == 0) {\r\n-                $fail = $this->rehearsalmodel->fail($Choir_memberId);\r\n-                if ($fail == 0) {\r\n-                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n-                    $finalPoint = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n-                    $gradeAverage = $this->rehearsalmodel->averageGrade($finalPoint);\r\n-                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n-                    $finalResultArray = array(\r\n-                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n-                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n-                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n-                        'point' => $this->db->escape_like_str($finalPoint),\r\n-                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n-                        'status' => $this->db->escape_like_str('Pass'),\r\n-                    );\r\n-                    $this->db->insert('final_result', $finalResultArray);\r\n-                } else {\r\n-                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n-                    $pointAverage = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n-                    $gradeAverage = $this->rehearsalmodel->averageGrade($pointAverage);\r\n-                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n-                    $finalResultArray = array(\r\n-                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n-                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n-                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n-                        'point' => $this->db->escape_like_str($pointAverage),\r\n-                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n-                        'status' => $this->db->escape_like_str('Fail'),\r\n-                        'fail_amount' => $this->db->escape_like_str($fail)\r\n-                    );\r\n-                    $this->db->insert('final_result', $finalResultArray);\r\n-                }\r\n-            } else {\r\n-                $finalResultArray = array(\r\n-                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n-                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n-                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n-                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n-                    'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n-                    'final_grade' => $this->db->escape_like_str('--'),\r\n-                    'point' => $this->db->escape_like_str('--'),\r\n-                    'total_mark' => $this->db->escape_like_str('--'),\r\n-                    'status' => $this->db->escape_like_str('Absent'),\r\n-                    'fail_amount' => $this->db->escape_like_str('--')\r\n-                );\r\n-                $this->db->insert('final_result', $finalResultArray);\r\n-            }\r\n-        }\r\n-        $rehearsalActionArray = array(\r\n-            'status' => $this->db->escape_like_str('Complete'),\r\n-            'publish' => $this->db->escape_like_str('Not Publish')\r\n-        );\r\n-        $this->db->where('id', $rehearsalActionId);\r\n-        if ($this->db->update('result_action', $rehearsalActionArray)) {\r\n-            $data['message'] = '<br><div class=\"alert alert-success\">\r\n-                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n-                                                <strong>' . lang('success') . '</strong> ' . lang('exac_12') . ' \"' . $rehearsalTitle . '\" ' . lang('exac_13') . ' \"' . $this->common->Choir_title($Choir_id) . '\"' . lang('exac_14') . '<br>\r\n-                                                <strong>' . lang('exac_info') . ' </strong>' . lang('exac_15') . '   \r\n-                                        </div>';\r\n-            $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n-            $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('aproveShitView', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function select class for results \r\n-    public function selectResult() {\r\n-        $data['result'] = $this->rehearsalmodel->publish('Complete', 'Publish');\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('selectResult', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //This function will show details result in a class \r\n-    public function fullResult() {\r\n-        $Choir_id = $this->input->get('Choir');\r\n-        $rehearsalTitle = $this->input->get('rehearsal');\r\n-        \r\n-        $data['result'] = $this->rehearsalmodel->finalResultShow($Choir_id, $rehearsalTitle);\r\n-        // echo \"<pre>\";  // Use <pre> for better readability of array or object structures\r\n-        // print_r($data);\r\n-        // echo \"</pre>\";\r\n-        $data['Choir'] = $Choir_id;\r\n-        $data['rehearsalTitle'] = $rehearsalTitle;\r\n-        $this->load->view('temp/header');\r\n-        $this->load->view('fullResult', $data);\r\n-        $this->load->view('temp/footer');\r\n-    }\r\n-    //By this function admin can publish rehearsal result in day.\r\n-    public function publishResult() {\r\n-        $query = $this->rehearsalmodel->publish('Complete', 'Not Publish');\r\n-        foreach ($query as $row) {\r\n-            $id = $row['id'];\r\n-            $rehearsalTitle = $row['rehearsal_title'];\r\n-            $Choir_id = $row['Choir_id'];\r\n-            $array = array(\r\n-                'publish' => $this->db->escape_like_str('Publish')\r\n-            );\r\n-            $this->db->where('id', $id);\r\n-            if ($this->db->update('result_action', $array)) {\r\n-                $this->db->update('add_rehearsal', $array, array('rehearsal_title' => $this->db->escape_like_str($rehearsalTitle), 'Choir_id' => $this->db->escape_like_str($Choir_id)));\r\n-            }\r\n-        }\r\n-        redirect('rehearsal/selectResult', 'refresh');\r\n-    }\r\n-    //This function will select Choir_memberfor know mark shit\r\n-    public function selectChoirMarksheet() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            if ($this->input->post('rehearsalId', TRUE) && $this->input->post('Choir_memberId', TRUE)) {\r\n-                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-                $Choir_memberId = $this->input->post('Choir_memberId', TRUE);\r\n-                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n-                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-                $data['Choir_memberId'] = $Choir_memberId;\r\n-                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('marksheet', $data);\r\n-                $this->load->view('temp/footer');\r\n-            } else {\r\n-                echo lang('exac_16');\r\n-            }\r\n-        } else {\r\n-            $data['Choir'] = $this->common->getAllData('Choir');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('selectChoirMarksheet', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will called by ajax from view for load class markshit\r\n-    public function ajaxChoirMarkshit() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n-        foreach ($query as $row) {\r\n-            $data[] = $row;\r\n-        }\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-            $Choir_member = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n-            if (!empty($Choir_member)) {\r\n-                echo '<div class=\"form-group\">\r\n-                            <label class=\"col-md-3 control-label\">' . lang('exac_17') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                            <div class=\"col-md-6\">\r\n-                                <select name=\"Choir_memberId\" class=\"form-control\">';\r\n-                foreach ($Choir_member as $stu) {\r\n-                    echo '<option value=\"' . $stu['Choir_member_id'] . '\">' . $stu['Choir_member_title'] . '</option>';\r\n-                }\r\n-                echo '</select></div>\r\n-                    <input type=\"hidden\" name=\"Choir_memberTitle\" value=\"' . $stu['Choir_member_title'] . '\">\r\n-                            </div>';\r\n-            } else {\r\n-                echo '<div class=\"form-group\">\r\n-                            <label class=\"col-md-3 control-label\"></label>\r\n-                            <div class=\"col-md-6\">\r\n-                            <div class=\"alert alert-warning\">\r\n-                                    <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n-                            </div></div></div>';\r\n-            }\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-    //This function will select Choir_member's own marksheet\r\n-    public function sel_ow_ma() {\r\n-        if ($this->input->post('submit', TRUE)) {\r\n-            if ($this->input->post('rehearsalId', TRUE)) {\r\n-                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n-                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n-                $user = $this->ion_auth->user()->row();\r\n-                $userId = $user->id;\r\n-                $Choir_memberId = $this->rehearsalmodel->Choir_member_id($userId);\r\n-                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n-                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n-                $data['Choir_memberId'] = $Choir_memberId;\r\n-                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n-                $this->load->view('temp/header');\r\n-                $this->load->view('ow_marksheet', $data);\r\n-                $this->load->view('temp/footer');\r\n-            } else {\r\n-                echo lang('exac_16');\r\n-            }\r\n-        } else {\r\n-            $data['Choir'] = $this->common->getAllData('Choir');\r\n-            $this->load->view('temp/header');\r\n-            $this->load->view('sel_ow_ma', $data);\r\n-            $this->load->view('temp/footer');\r\n-        }\r\n-    }\r\n-    //This function will called by ajax from view for load class markshit\r\n-    public function ajax_ow_ma() {\r\n-        $Choir_id = $this->input->get('q');\r\n-        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n-        foreach ($query as $row) {\r\n-            $data[] = $row;\r\n-        }\r\n-        if (!empty($data)) {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n-                        <div class=\"col-md-6\">\r\n-                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n-            foreach ($data as $sec) {\r\n-                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n-            }\r\n-            echo '</select></div>\r\n-                        </div>';\r\n-        } else {\r\n-            echo '<div class=\"form-group\">\r\n-                        <label class=\"col-md-3 control-label\"></label>\r\n-                        <div class=\"col-md-6\">\r\n-                        <div class=\"alert alert-warning\">\r\n-                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n-                        </div></div></div>';\r\n-        }\r\n-    }\r\n-}\r\n"
                }
            ],
            "date": 1714943023299,
            "name": "Commit-0",
            "content": "<?php\r\nif (!defined('BASEPATH')) {\r\n    exit('No direct script access allowed');\r\n}\r\nclass Rehearsal extends MX_Controller {\r\n\r\n    /**\r\n     * This controller is using for \r\n     *\r\n     * Maps to the following URL\r\n     * \t\thttp://rehearsalple.com/index.php/rehearsal\r\n     * \t- or -  \r\n     * \t\thttp://rehearsalple.com/index.php/rehearsal/<method_name>\r\n     */\r\n    function __construct() {\r\n        parent::__construct();\r\n        $this->lang->load('auth');\r\n        $this->load->model('rehearsalmodel');\r\n        if (!$this->ion_auth->logged_in()) {\r\n            redirect('auth/login');\r\n        }\r\n    }\r\n    //This function load all rehearsal grade and point\r\n    public function rehearsalGread() {\r\n        $data['grade'] = $this->common->getAllData('rehearsal_grade');\r\n        $this->load->view('temp/header');\r\n        $this->load->view('rehearsalGread', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //THis function add new rehearsal grade\r\n    public function addRehearsalGread() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $gradeName = $this->input->post('gradeName', TRUE);\r\n            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n            $nameTo = $this->input->post('nameTo', TRUE);\r\n\r\n            $data = array(\r\n                'grade_name' => $this->db->escape_like_str($gradeName),\r\n                'point' => $this->db->escape_like_str($gradePoint),\r\n                'number_form' => $this->db->escape_like_str($numberFrom),\r\n                'number_to' => $this->db->escape_like_str($nameTo)\r\n            );\r\n            $this->db->insert('rehearsal_grade', $data);\r\n\r\n            redirect('rehearsal/rehearsalGread', 'refresh');\r\n        } else {\r\n            $this->load->view('temp/header');\r\n            $this->load->view('addRehearsalGrade');\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function will edit rehearsal grade and point\r\n    public function editGrade() {\r\n        $id = $this->input->get('id');\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $gradeName = $this->input->post('gradeName', TRUE);\r\n            $gradePoint = $this->input->post('gradePoint', TRUE);\r\n            $numberFrom = $this->input->post('numberFrom', TRUE);\r\n            $nameTo = $this->input->post('nameTo', TRUE);\r\n\r\n            $editData = array(\r\n                'grade_name' => $this->db->escape_like_str($gradeName),\r\n                'point' => $this->db->escape_like_str($gradePoint),\r\n                'number_form' => $this->db->escape_like_str($numberFrom),\r\n                'number_to' => $this->db->escape_like_str($nameTo)\r\n            );\r\n\r\n            $this->db->where('id', $id);\r\n            if ($this->db->update('rehearsal_grade', $editData)) {\r\n                redirect('rehearsal/rehearsalGread', 'refresh');\r\n            }\r\n        } else {\r\n            $data['gradInfo'] = $this->common->getWhere('rehearsal_grade', 'id', $id);\r\n            $this->load->view('temp/header');\r\n            $this->load->view('editGrade', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function can delete rehearsal grade in this system\r\n    public function deleteGrade() {\r\n        $id = $this->input->get('id');\r\n        if ($this->db->delete('rehearsal_grade', array('id' => $id))) {\r\n            redirect('rehearsal/rehearsalGread', 'refresh');\r\n        }\r\n    }\r\n    //This function is using for decleration new rehearsal for nay class.\r\n    public function addRehearsal() {\r\n        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n            $startDate = $this->input->post('startDate', TRUE);\r\n            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n            $totleTime = $this->input->post('totleTime', TRUE);\r\n            $rehearsalInfo = array(\r\n                'year' => $this->db->escape_like_str(date('Y')),\r\n                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                'start_date' => $this->db->escape_like_str($startDate),\r\n                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                'total_time' => $this->db->escape_like_str($totleTime),\r\n                'publish' => $this->db->escape_like_str('Not Publish'),\r\n                'final' => $this->db->escape_like_str($this->input->post('final', TRUE)),\r\n                'status' => $this->db->escape_like_str('NoResult')\r\n            );\r\n            //Here is adding an rehearsal information into database\r\n            if ($this->db->insert('add_rehearsal', $rehearsalInfo)) {\r\n                $data['successMessage'] = '<div class=\"alert alert-success\">\r\n                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n                                                <strong>' . lang('success') . '</strong> ' . lang('exac_1') . '\" ' . $rehearsalTitle . ' \" ' . lang('exac_2') . ' \"' . $this->common->Choir_title($Choir_id) . '\" ' . lang('exac_3') . '\r\n                                        </div>';\r\n                $data['rehearsalInfo'] = $this->common->getAllData('add_rehearsal');\r\n                $data['song'] = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n                $data['weeklyDay'] = $this->common->getAllData('config_week_day');\r\n                $this->load->view('temp/header');\r\n                $this->load->view('addRutinSong', $data);\r\n                $this->load->view('temp/footer');\r\n            }\r\n        } else {\r\n            $this->load->view('temp/header');\r\n            $this->load->view('addRehearsalRutine', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function will complete an rehearsal routine after decletration that rehearsal.\r\n    public function completRehearsalRoutin() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n            //this is the 1st song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate', TRUE);\r\n                $song = $this->input->post('song', TRUE);\r\n                $songCode = $this->input->post('songCode', TRUE);\r\n                $romeNo = $this->input->post('romeNo', TRUE);\r\n                $starTima = $this->input->post('starTima', TRUE);\r\n                $endTima = $this->input->post('endTima', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 2nd song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_2', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_2', TRUE);\r\n                $song = $this->input->post('song_2', TRUE);\r\n                $songCode = $this->input->post('song', TRUE);\r\n                $romeNo = $this->input->post('romeNo_2', TRUE);\r\n                $starTima = $this->input->post('starTima_2', TRUE);\r\n                $endTima = $this->input->post('endTima_2', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_2', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 3rd song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_3', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_3', TRUE);\r\n                $song = $this->input->post('song_3', TRUE);\r\n                $songe = $this->input->post('songCode_3', TRUE);\r\n                $romeNo = $this->input->post('romeNo_3', TRUE);\r\n                $starTima = $this->input->post('starTima_3', TRUE);\r\n                $endTima = $this->input->post('endTima_3', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_3', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 4th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_4', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_4', TRUE);\r\n                $song = $this->input->post('song_4', TRUE);\r\n                $songCode = $this->input->post('songCode_4', TRUE);\r\n                $romeNo = $this->input->post('romeNo_4', TRUE);\r\n                $starTima = $this->input->post('starTima_4', TRUE);\r\n                $endTima = $this->input->post('endTima_4', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_4', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 5th songinformations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_5', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_5', TRUE);\r\n                $song = $this->input->post('song_5', TRUE);\r\n                $songCode = $this->input->post('songCode_5', TRUE);\r\n                $romeNo = $this->input->post('romeNo_5', TRUE);\r\n                $starTima = $this->input->post('starTima_5', TRUE);\r\n                $endTima = $this->input->post('endTima_5', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_5', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 6th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_6', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_6', TRUE);\r\n                $song = $this->input->post('song_6', TRUE);\r\n                $songCode = $this->input->post('songCode_6', TRUE);\r\n                $romeNo = $this->input->post('romeNo_6', TRUE);\r\n                $starTima = $this->input->post('starTima_6', TRUE);\r\n                $endTima = $this->input->post('endTima_6', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_6', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($song),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 7th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_7', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_7', TRUE);\r\n                $song = $this->input->post('song_7', TRUE);\r\n                $songCode = $this->input->post('songCode_7', TRUE);\r\n                $romeNo = $this->input->post('romeNo_7', TRUE);\r\n                $starTima = $this->input->post('starTima_7', TRUE);\r\n                $endTima = $this->input->post('endTima_7', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_7', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 8th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_8', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_8', TRUE);\r\n                $song = $this->input->post('song_8', TRUE);\r\n                $songCode = $this->input->post('songe_8', TRUE);\r\n                $romeNo = $this->input->post('romeNo_8', TRUE);\r\n                $starTima = $this->input->post('starTima_8', TRUE);\r\n                $endTima = $this->input->post('endTima_8', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_8', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 9th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_9', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_9', TRUE);\r\n                $song = $this->input->post('song_9', TRUE);\r\n                $songCode = $this->input->post('songCode_9', TRUE);\r\n                $romeNo = $this->input->post('romeNo_9', TRUE);\r\n                $starTima = $this->input->post('starTima_9', TRUE);\r\n                $endTima = $this->input->post('endTima_9', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_9', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 10th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_10', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_10', TRUE);\r\n                $song = $this->input->post('song_10', TRUE);\r\n                $songCode = $this->input->post('songCode_10', TRUE);\r\n                $romeNo = $this->input->post('romeNo_10', TRUE);\r\n                $starTima = $this->input->post('starTima_10', TRUE);\r\n                $endTima = $this->input->post('endTima_10', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_10', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 11th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_11', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_11', TRUE);\r\n                $song = $this->input->post('song_11', TRUE);\r\n                $songCode = $this->input->post('songCode_11', TRUE);\r\n                $romeNo = $this->input->post('romeNo_11', TRUE);\r\n                $starTima = $this->input->post('starTima_11', TRUE);\r\n                $endTima = $this->input->post('endTima_11', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_11', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 12th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_12', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_12', TRUE);\r\n                $song = $this->input->post('song_12', TRUE);\r\n                $songCode = $this->input->post('songCode_12', TRUE);\r\n                $romeNo = $this->input->post('romeNo_12', TRUE);\r\n                $starTima = $this->input->post('starTima_12', TRUE);\r\n                $endTima = $this->input->post('endTima_12', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_12', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 13th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_13', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_13', TRUE);\r\n                $song = $this->input->post('song_13', TRUE);\r\n                $songCode = $this->input->post('songCode_13', TRUE);\r\n                $romeNo = $this->input->post('romeNo_13', TRUE);\r\n                $starTima = $this->input->post('starTima_13', TRUE);\r\n                $endTima = $this->input->post('endTima_13', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_13', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 14th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_14', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_14', TRUE);\r\n                $song = $this->input->post('song_14', TRUE);\r\n                $songCode = $this->input->post('songCode_14', TRUE);\r\n                $romeNo = $this->input->post('romeNo_14', TRUE);\r\n                $starTima = $this->input->post('starTima_14', TRUE);\r\n                $endTima = $this->input->post('endTima_14', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_14', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            //this is the 15th song's informations for this rehearsal rutine\r\n            if ($this->input->post('rehearsalSunjectFild_15', TRUE)) {\r\n                $rehearsalDate = $this->input->post('rehearsalDate_15', TRUE);\r\n                $song = $this->input->post('song_15', TRUE);\r\n                $songCode = $this->input->post('songCode_15', TRUE);\r\n                $romeNo = $this->input->post('romeNo_15', TRUE);\r\n                $starTima = $this->input->post('starTima_15', TRUE);\r\n                $endTima = $this->input->post('endTima_15', TRUE);\r\n                $rehearsalShift = $this->input->post('rehearsalShift_15', TRUE);\r\n                $routine = array(\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_date' => $this->db->escape_like_str($rehearsalDate),\r\n                    'rehearsal_song' => $this->db->escape_like_str($song),\r\n                    'song_code' => $this->db->escape_like_str($songCode),\r\n                    'rome_number' => $this->db->escape_like_str($romeNo),\r\n                    'start_time' => $this->db->escape_like_str($starTima),\r\n                    'end_time' => $this->db->escape_like_str($endTima),\r\n                    'rehearsal_shift' => $this->db->escape_like_str($rehearsalShift),\r\n                    'status' => $this->db->escape_like_str('NoResult')\r\n                );\r\n                //insert this song information into the database.\r\n                $this->db->insert('rehearsal_routine', $routine);\r\n            }\r\n            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n            $data['schoolName'] = $this->common->schoolName();\r\n            $this->load->view('temp/header');\r\n            $this->load->view('rutineSuccess', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function can delete rehearsal and rehearsal routine\r\n    public function deleteRehearsalAndRoutine() {\r\n        $rehearsalId = $this->input->get('rehearsalId', TRUE);\r\n        if ($this->db->delete('add_rehearsal', array('id' => $rehearsalId))) {\r\n            if ($this->db->delete('rehearsal_routine', array('rehearsal_id' => $rehearsalId))) {\r\n                redirect('rehearsal/allRehearsalRutine', 'refresh');\r\n            }\r\n        }\r\n    }\r\n    //This function will select that which rehearsal routine \r\n    public function allRehearsalRutine() {\r\n        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n        $this->load->view('temp/header');\r\n        $this->load->view('selectAllRoutine', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //This function load class's rehearsal title which is declard previously by class title.\r\n    public function ajaxChoirRehearsal() {\r\n        $Choir_id = $this->input->get('q');    \r\n        // Using Active Record to prevent SQL injection\r\n        $query = $this->db->select('*')\r\n                          ->from('add_rehearsal')\r\n                          ->where('Choir_id', $Choir_id)\r\n                          ->get();\r\n    \r\n        $data = $query->result_array();\r\n    \r\n        // Check if we have any data returned\r\n        if (!empty($data)) {\r\n            echo '<div class=\"form-group\">\r\n                      <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n                      <div class=\"col-md-6\">\r\n                          <select name=\"rehearsalId\" class=\"form-control\">';\r\n            foreach ($data as $sec) {\r\n                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                  </div>';\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                      <label class=\"col-md-3 control-label\"></label>\r\n                      <div class=\"col-md-6\">\r\n                          <div class=\"alert alert-warning\">\r\n                              <strong>' . lang('exac_info') . '</strong> ' . lang('exac_5') . '\r\n                          </div></div></div>';\r\n        }\r\n    }\r\n    \r\n    //This function show a success message when an Rehearsal added and made this rehearsal routine fully, with full rutine.\r\n    public function routinView() {\r\n        if ($this->input->post('submit', TRUE) && $this->input->post('rehearsalId', TRUE)) {\r\n            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n            $data['rutineInfo'] = $this->common->getWhere('rehearsal_routine', 'rehearsal_id', $rehearsalId);\r\n            $data['rehearsalInfo'] = $this->common->getWhere('add_rehearsal', 'id', $rehearsalId);\r\n            $data['schoolName'] = $this->common->schoolName();\r\n            $this->load->view('temp/header');\r\n            $this->load->view('rutineSuccess', $data);\r\n            $this->load->view('temp/footer');\r\n        } else {\r\n            echo lang('exac_6');\r\n        }\r\n    }\r\n    //This function is using for select class and Choir_members for rehearsal attendance.\r\n    public function selectRehearsalAttendance() {\r\n        $data['s_Choir'] = $this->common->getAllData('Choir');\r\n        $this->load->view('temp/header');\r\n        $this->load->view('selectRehearsalAttendance', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //This function is using for taking Choir_members by class title for rehearsal attendence\r\n    public function rehearsalAttendance() {\r\n        $date = date(\"d/m/Y\");\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $rehearsalId = $this->input->get('id');\r\n            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n            $rehearsalSong = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n            //Whene submit the attendence information after takeing the attendence\r\n            $i = $this->input->post('in_velu', TRUE);\r\n            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n            for ($x = 1; $x <= $i; $x++) {\r\n                $roll = $this->input->post(\"roll_$x\", TRUE);\r\n                $name = $this->input->post(\"Choir_memberName_$x\", TRUE);\r\n                $present = $this->input->post(\"action_$x\", TRUE);\r\n                $userId = $this->input->post(\"userId_$x\", TRUE);\r\n                $Choir_memberInfoId = $this->input->post(\"Choir_memberInfoId_$x\", TRUE);\r\n                $section = $this->input->post(\"section_$x\", TRUE);\r\n                $data = array(\r\n                    'date' => $this->db->escape_like_str($date),\r\n                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                    'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n                    'user_id' => $this->db->escape_like_str($userId),\r\n                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberInfoId),\r\n                    'roll_no' => $this->db->escape_like_str($roll),\r\n                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                    'section' => $this->db->escape_like_str($section),\r\n                    'attendance' => $this->db->escape_like_str($present),\r\n                    'Choir_member_title' => $this->db->escape_like_str($name),\r\n                );\r\n                //insert the $data information into \"daily_attendance\" database.\r\n                $this->db->insert('rehearsal_attendanc', $data);\r\n            }\r\n            //Whene Rehearsal Attendance was full compleate then lode this page\r\n            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($Choir_id, $rehearsalTitle, $rehearsalSong);\r\n            print_r($data);\r\n            $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n            $this->load->view('temp/header');\r\n            $this->load->view('viewRehearsalAttendance', $data);\r\n            $this->load->view('temp/footer');\r\n        } else {\r\n            $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n            $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n            $Choir_id = $this->input->post('Choir', TRUE);\r\n            \r\n            $check = $this->rehearsalmodel->checkRehearsal($rehearsalId, $date);\r\n            if ($check == 'Have An Rehearsal') {\r\n                //Here is loding Choir_member for rehearsal attendance.\r\n                //Get here Choir_members and informations by class title.\r\n                $queryData = array();\r\n                $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n                foreach ($query->result_array() as $row) {\r\n                    $queryData[] = $row;\r\n                }$data['Choir_members'] = $queryData;\r\n                $data['rehearsalId'] = $rehearsalId;\r\n                $data['rehearsalTitle'] = $rehearsalTitle;\r\n                $data['rehearsalSong'] = $this->rehearsalmodel->rehearsalSong($rehearsalId, $date);\r\n                $data['ChoirTitle'] = $this->common->Choir_title($Choir_id);\r\n                if (!empty($data['Choir_members'])) {\r\n                    $this->load->view('temp/header');\r\n                    $this->load->view('rehearsalAttendance', $data);\r\n                    $this->load->view('temp/footer');\r\n                } else {\r\n                    // echo $ChoirTitle . 'has no any Choir_member.';\r\n                }\r\n            } elseif ($check == 'No Any Rehearsal') {\r\n                // $info['ChoirTitle'] = $ChoirTitle;\r\n                $this->load->view('temp/header');\r\n                $this->load->view('attendanceFaild', $info);\r\n                $this->load->view('temp/footer');\r\n            }\r\n        }\r\n    }\r\n    //This function load's rehearsal attendance view\r\n    public function viewRehearsalAttendance() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $ChoirTitle = $this->input->post('Choir', TRUE);\r\n            $rehearsalTitle = $this->input->post('rehearsalTitle', TRUE);\r\n            $songTitle = $this->input->post('songTitle', TRUE);\r\n            $data['ChoirTitle'] = $ChoirTitle;\r\n            $data['previerAttendance'] = $this->rehearsalmodel->previewAttendance($ChoirTitle, $rehearsalTitle, $songTitle);\r\n            $this->load->view('temp/header');\r\n            $this->load->view('viewRehearsalAttendance', $data);\r\n            $this->load->view('temp/footer');\r\n        } else {\r\n            $data['s_Choir'] = $this->common->getAllData('Choir');\r\n            $this->load->view('temp/header');\r\n            $this->load->view('allRehearsalAttendanceView', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function is called by ajax from view\r\n    public function ajaxAttendanceView() {\r\n        $Choir_id = $this->input->get('q');\r\n        $query = $this->db->query(\"SELECT * FROM add_rehearsal WHERE Choir_id=$Choir_id\");\r\n        foreach ($query->result_array() as $row) {\r\n            $data[] = $row;\r\n        }\r\n        if (!empty($data)) {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . '<span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select name=\"rehearsalTitle\" class=\"form-control\">';\r\n            foreach ($data as $sec) {\r\n                echo '<option value=\"' . $sec['rehearsal_title'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                        </div>';\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_7') . '\r\n                        </div></div></div>';\r\n        }\r\n        $song = $this->common->getWhere('Choir_song', 'Choir_id', $Choir_id);\r\n        if (!empty($song)) {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select name=\"songTitle\" class=\"form-control\">';\r\n            foreach ($song as $sub) {\r\n                echo '<option value=\"' . $sub['song_title'] . '\">' . $sub['song_title'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                        </div>';\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n                        </div></div></div>';\r\n        }\r\n    }\r\n    //The rehearsal attendance can edit by this function.\r\n    public function editRehearsalAttendance() {\r\n        $id = $this->input->get('id');\r\n\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $updateInfo = array(\r\n                'attendance' => $this->db->escape_like_str($this->input->post('action', TRUE))\r\n            );\r\n            $this->db->where('id', $id);\r\n            if ($this->db->update('rehearsal_attendanc', $updateInfo)) {\r\n                redirect('rehearsal/viewRehearsalAttendance', 'refresh');\r\n            }\r\n        }\r\n        $data['rehearsalAttendanceInf'] = $this->common->getWhere('rehearsal_attendanc', 'id', $id);\r\n        $this->load->view('temp/header');\r\n        $this->load->view('editRehearsalAttendance', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //Here is first time select class for result.\r\n    public function makingResult() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $Choir_id = $this->input->post('Choir_id', TRUE);\r\n            $data['Choir_id'] = $Choir_id;\r\n            $data['rehearsalId'] = $this->input->post('rehearsalID', TRUE);\r\n            $data['songTitle'] = $this->input->post('rehearsalSongTitle', TRUE);\r\n            $data['rehearsalRUtinID'] = $this->input->post('subjRutID', TRUE);\r\n            $data['section_leaderInfo'] = $this->rehearsalmodel->section_leaderInfo($this->input->post('section_leaderUserId', TRUE));\r\n            $queryData = array();\r\n            $query = $this->db->get_where('Choir_Choir_members', array('Choir_id' => $Choir_id));\r\n            foreach ($query->result_array() as $row) {\r\n                $queryData[] = $row;\r\n            }\r\n            $data['Choir_members'] = $queryData;\r\n            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n            $this->load->view('temp/header');\r\n            $this->load->view('makingResult', $data);\r\n            $this->load->view('temp/footer');\r\n        } else {\r\n            $data['s_Choir'] = $this->rehearsalmodel->getChoirTitle();\r\n            $this->load->view('temp/header');\r\n            $this->load->view('selectChoirResult', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function will take class and give the class rehearsal title and song\r\n    public function ajaxChoirResult() {\r\n        $Choir_id = $this->input->get('q');\r\n        $data = $this->rehearsalmodel->rehearsalTitleRes($Choir_id);\r\n        if (!empty($data)) {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select onchange=\"rehearsalSong(this.value)\" name=\"rehearsalID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n                            <option value=\"\">' . lang('select') . '</option>';\r\n            foreach ($data as $sec) {\r\n                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                        </div><div id=\"ajaxResult_2\"></div>';\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_10') . '\r\n                        </div></div></div>';\r\n        }\r\n    }\r\n    //This function will show via ajax rehearsal song which are not compleated result\r\n    public function ajaxRehearsalSong() {\r\n        $rehearsalID = $this->input->get('erid');\r\n        $song = $this->rehearsalmodel->rehearsalResSong($rehearsalID);\r\n        if (!empty($song)) {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">' . lang('exac_8') . ' <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select onchange=\"rehearsalSongTitle(this.value)\" name=\"subjRutID\" class=\"form-control\" data-validation=\"required\" data-validation-error-msg=\"\">\r\n                            <option value=\"\">' . lang('select') . '</option>';\r\n            foreach ($song as $sub) {\r\n                echo '<option value=\"' . $sub['id'] . '\">' . $sub['rehearsal_song'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                        </div><div id=\"ajaxResult_3\"></div>';\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_11') . '\r\n                        </div></div></div>';\r\n        }\r\n    }\r\n    //This function will returan rehearsal song title \r\n    public function ajaxRehearsalSubTitle() {\r\n        $rehearsalId = $this->input->get('erid');\r\n        $query = $this->db->query(\"SELECT rehearsal_song FROM rehearsal_routine WHERE id='$rehearsalId'\");\r\n        foreach ($query->result_array() as $row) {\r\n            $data = $row['rehearsal_song'];\r\n            echo '<input type=\"hidden\" name=\"rehearsalSongTitle\" value=\"' . $row['rehearsal_song'] . '\">';\r\n        }\r\n    }\r\n    //This function will submit result from section_leader.\r\n    public function submitResult() {\r\n        $i = $this->input->post('ivalue', TRUE);\r\n        $rehearsalID = $this->input->post('rehearsalId', TRUE);\r\n        $rehearsalTitle = $this->rehearsalmodel->rehearsalTitle($rehearsalID);\r\n        $rehearsalRuId = $this->input->post('rehearsalRutinID', TRUE);\r\n        $rehearsalSong = $this->rehearsalmodel->rehearsalSongTitle($rehearsalRuId);\r\n        $Choir_id = $this->input->post('Choir_id', TRUE);\r\n        $section_leaderName = $this->input->post('section_leaderName', TRUE);\r\n        //here is checking this song is optionakl or not\r\n        $date = date('d/m/Y');\r\n        for ($a = 1; $a <= $i; $a++) {\r\n            $rollNumber = $this->input->post(\"rollNumber_$a\", TRUE);\r\n            $result = $this->input->post(\"result_$a\", TRUE);\r\n            $greadInfo = $this->input->post(\"gread_$a\", TRUE);\r\n            $grade = explode(\",\", $greadInfo);\r\n            $resultInfo = array(\r\n                'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n                'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                'Choir_member_name' => $this->db->escape_like_str($this->input->post(\"Choir_memberTitle_$a\", TRUE)),\r\n                'Choir_member_id' => $this->db->escape_like_str($this->input->post(\"Choir_memberId_$a\", TRUE)),\r\n                'roll_number' => $this->db->escape_like_str($this->input->post(\"rollNumber_$a\", TRUE)),\r\n                'rehearsal_song' => $this->db->escape_like_str($rehearsalSong),\r\n                'result' => $this->db->escape_like_str($this->input->post(\"result_$a\", TRUE)),\r\n                'mark' => $this->db->escape_like_str($this->input->post(\"totalMark_$a\", TRUE)),\r\n                'grade' => $this->db->escape_like_str($grade[0]),\r\n                'point' => $this->db->escape_like_str($grade[1]),\r\n            );\r\n            $this->db->insert('result_shit', $resultInfo);\r\n        }\r\n        $submitInfo = array(\r\n            'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n            'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n            'rehearsal_id' => $this->db->escape_like_str($rehearsalID),\r\n            'date' => $this->db->escape_like_str($date),\r\n            'song' => $this->db->escape_like_str($rehearsalSong),\r\n            'submited' => $this->db->escape_like_str(0),\r\n            'section_leader' => $this->db->escape_like_str($section_leaderName),\r\n        );\r\n        $songStatus = array(\r\n            'status' => $this->db->escape_like_str('Result')\r\n        );\r\n        $this->db->where('id', $rehearsalRuId);\r\n        $this->db->update('rehearsal_routine', $songStatus);\r\n        if ($this->db->insert('result_submition_info', $submitInfo)) {\r\n            $data['rehearsalTitle'] = $rehearsalTitle;\r\n            $data['rehearsalSong'] = $rehearsalSong;\r\n            $data['section_leaderName'] = $section_leaderName;\r\n            $data['Choir_id'] = $Choir_id;\r\n            $this->load->view('temp/header');\r\n            $this->load->view('submitMessage', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function work only for admin.\r\n    //He can view how many result shit was submited for aprove by admin.\r\n    public function aproveShitView() {\r\n        $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n        $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n        $this->load->view('temp/header');\r\n        $this->load->view('aproveShitView', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //This function can exes only admin and he can edit and Approve rehearsal rtesult shit\r\n    public function checkResultShit() {\r\n        $id = $this->input->get('id', TRUE);\r\n        $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n        $rehearsalTitle = $query[0]['rehearsal_title'];\r\n        $Choir_id = $query[0]['Choir_id'];\r\n        $song = $query[0]['song'];\r\n        $data['rehearsalId'] = $id;\r\n        $data['rehearsalTitle'] = $query[0]['rehearsal_title'];\r\n        $data['Choir_id'] = $Choir_id;\r\n        $data['section_leader'] = $query[0]['section_leader'];\r\n        $data['song'] = $query[0]['song'];\r\n        $data['resultShit'] = $this->rehearsalmodel->checkResultShit($Choir_id, $rehearsalTitle, $song);\r\n        $this->load->view('temp/header');\r\n        $this->load->view('checkResultShit', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //This function will edit Choir_member's result,number and grade,point\r\n    public function editResult() {\r\n        $id = $this->input->get('id');\r\n        if ($this->input->post('submit', TRUE)) {\r\n            $updateData = array(\r\n                'result' => $this->db->escape_like_str($this->input->post('result', TRUE)),\r\n                'mark' => $this->db->escape_like_str($this->input->post('mark', TRUE)),\r\n                'point' => $this->db->escape_like_str($this->input->post('point', TRUE)),\r\n                'grade' => $this->db->escape_like_str($this->input->post('gread', TRUE))\r\n            );\r\n            $this->db->where('id', $id);\r\n            if ($this->db->update('result_shit', $updateData)) {\r\n                redirect('rehearsal/aproveShitView', 'refresh');\r\n            }\r\n        } else {\r\n            $data['gread'] = $this->common->getAllData('rehearsal_grade');\r\n            $data['previousResult'] = $this->common->getWhere('result_shit', 'id', $id);\r\n            $this->load->view('temp/header');\r\n            $this->load->view('editResult', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function will approuve result shit which is sent from section_leader.\r\n    public function approuveResultShit() {\r\n        $id = $this->input->get('id');\r\n        $data = array(\r\n            'submited' => $this->db->escape_like_str(1)\r\n        );\r\n        $this->db->where('id', $id);\r\n        if ($this->db->update('result_submition_info', $data)) {\r\n            $query = $this->common->getWhere('result_submition_info', 'id', $id);\r\n            foreach ($query as $row) {\r\n                $rowInfo = $row;\r\n            }\r\n            $Choir_id = $rowInfo['Choir_id'];\r\n            $rehearsalTitle = $rowInfo['rehearsal_title'];\r\n            $rehearsalId = $rowInfo['rehearsal_id'];\r\n            $song = $rowInfo['song'];\r\n            $approuveSong = $this->rehearsalmodel->approuveSongAmount($Choir_id, $rehearsalTitle);\r\n            $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n            //By this if conditation we are chacking that all songs result was submited or not\r\n            //When all songs result is submited in that time insert the informations in \"result_action\" table then it will ready for final calculation.\r\n            if ($approuveSong == $ChoirSong) {\r\n                $actionArrayt = array(\r\n                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'status' => $this->db->escape_like_str('Not Complete')\r\n                );\r\n                if ($this->db->insert('result_action', $actionArrayt)) {\r\n                    redirect('rehearsal/aproveShitView', 'refresh');\r\n                }\r\n            } else {\r\n                redirect('rehearsal/aproveShitView', 'refresh');\r\n            }\r\n        }\r\n    }\r\n    //This function will make finalresult for class Choir_members\r\n    public function finalResult() {\r\n        $rehearsalActionId = $this->input->get('id');\r\n        $Choir_id = $this->input->get('Choir');\r\n        $rehearsalTitle = $this->input->get('rehearsal');\r\n        $rehearsalId = $this->input->get('rehearsalId');\r\n        //Here taking a Choir_members list by class title\r\n        $Choir_memberQuery = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n        foreach ($Choir_memberQuery as $row) {\r\n            $Choir_memberId = $row['Choir_member_id'];\r\n            $absent = $this->rehearsalmodel->absent($Choir_memberId);\r\n            if ($absent == 0) {\r\n                $fail = $this->rehearsalmodel->fail($Choir_memberId);\r\n                if ($fail == 0) {\r\n                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n                    $finalPoint = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n                    $gradeAverage = $this->rehearsalmodel->averageGrade($finalPoint);\r\n                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n                    $finalResultArray = array(\r\n                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n                        'point' => $this->db->escape_like_str($finalPoint),\r\n                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n                        'status' => $this->db->escape_like_str('Pass'),\r\n                    );\r\n                    $this->db->insert('final_result', $finalResultArray);\r\n                } else {\r\n                    $ChoirSong = $this->rehearsalmodel->ChoirSongAmount($Choir_id);\r\n                    $pointAverage = $this->rehearsalmodel->pointAverage($Choir_memberId, $ChoirSong);\r\n                    $gradeAverage = $this->rehearsalmodel->averageGrade($pointAverage);\r\n                    $totalMark = $this->rehearsalmodel->totalMark($Choir_memberId);\r\n                    $finalResultArray = array(\r\n                        'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                        'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                        'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                        'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n                        'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n                        'final_grade' => $this->db->escape_like_str($gradeAverage),\r\n                        'point' => $this->db->escape_like_str($pointAverage),\r\n                        'total_mark' => $this->db->escape_like_str($totalMark),\r\n                        'status' => $this->db->escape_like_str('Fail'),\r\n                        'fail_amount' => $this->db->escape_like_str($fail)\r\n                    );\r\n                    $this->db->insert('final_result', $finalResultArray);\r\n                }\r\n            } else {\r\n                $finalResultArray = array(\r\n                    'Choir_id' => $this->db->escape_like_str($Choir_id),\r\n                    'rehearsal_id' => $this->db->escape_like_str($rehearsalId),\r\n                    'rehearsal_title' => $this->db->escape_like_str($rehearsalTitle),\r\n                    'Choir_member_id' => $this->db->escape_like_str($Choir_memberId),\r\n                    'Choir_member_name' => $this->db->escape_like_str($row['Choir_member_title']),\r\n                    'final_grade' => $this->db->escape_like_str('--'),\r\n                    'point' => $this->db->escape_like_str('--'),\r\n                    'total_mark' => $this->db->escape_like_str('--'),\r\n                    'status' => $this->db->escape_like_str('Absent'),\r\n                    'fail_amount' => $this->db->escape_like_str('--')\r\n                );\r\n                $this->db->insert('final_result', $finalResultArray);\r\n            }\r\n        }\r\n        $rehearsalActionArray = array(\r\n            'status' => $this->db->escape_like_str('Complete'),\r\n            'publish' => $this->db->escape_like_str('Not Publish')\r\n        );\r\n        $this->db->where('id', $rehearsalActionId);\r\n        if ($this->db->update('result_action', $rehearsalActionArray)) {\r\n            $data['message'] = '<br><div class=\"alert alert-success\">\r\n                                                <button aria-hidden=\"true\" data-dismiss=\"alert\" class=\"close\" type=\"button\"></button>\r\n                                                <strong>' . lang('success') . '</strong> ' . lang('exac_12') . ' \"' . $rehearsalTitle . '\" ' . lang('exac_13') . ' \"' . $this->common->Choir_title($Choir_id) . '\"' . lang('exac_14') . '<br>\r\n                                                <strong>' . lang('exac_info') . ' </strong>' . lang('exac_15') . '   \r\n                                        </div>';\r\n            $data['shitList'] = $this->common->getWhere('result_submition_info', 'submited', 0);\r\n            $data['ChoirAction'] = $this->common->getWhere('result_action', 'status', 'Not Complete');\r\n            $this->load->view('temp/header');\r\n            $this->load->view('aproveShitView', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function select class for results \r\n    public function selectResult() {\r\n        $data['result'] = $this->rehearsalmodel->publish('Complete', 'Publish');\r\n        $this->load->view('temp/header');\r\n        $this->load->view('selectResult', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //This function will show details result in a class \r\n    public function fullResult() {\r\n        $Choir_id = $this->input->get('Choir');\r\n        $rehearsalTitle = $this->input->get('rehearsal');\r\n        \r\n        $data['result'] = $this->rehearsalmodel->finalResultShow($Choir_id, $rehearsalTitle);\r\n        // echo \"<pre>\";  // Use <pre> for better readability of array or object structures\r\n        // print_r($data);\r\n        // echo \"</pre>\";\r\n        $data['Choir'] = $Choir_id;\r\n        $data['rehearsalTitle'] = $rehearsalTitle;\r\n        $this->load->view('temp/header');\r\n        $this->load->view('fullResult', $data);\r\n        $this->load->view('temp/footer');\r\n    }\r\n    //By this function admin can publish rehearsal result in day.\r\n    public function publishResult() {\r\n        $query = $this->rehearsalmodel->publish('Complete', 'Not Publish');\r\n        foreach ($query as $row) {\r\n            $id = $row['id'];\r\n            $rehearsalTitle = $row['rehearsal_title'];\r\n            $Choir_id = $row['Choir_id'];\r\n            $array = array(\r\n                'publish' => $this->db->escape_like_str('Publish')\r\n            );\r\n            $this->db->where('id', $id);\r\n            if ($this->db->update('result_action', $array)) {\r\n                $this->db->update('add_rehearsal', $array, array('rehearsal_title' => $this->db->escape_like_str($rehearsalTitle), 'Choir_id' => $this->db->escape_like_str($Choir_id)));\r\n            }\r\n        }\r\n        redirect('rehearsal/selectResult', 'refresh');\r\n    }\r\n    //This function will select Choir_memberfor know mark shit\r\n    public function selectChoirMarksheet() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            if ($this->input->post('rehearsalId', TRUE) && $this->input->post('Choir_memberId', TRUE)) {\r\n                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n                $Choir_memberId = $this->input->post('Choir_memberId', TRUE);\r\n                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n                $data['Choir_memberId'] = $Choir_memberId;\r\n                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n                $this->load->view('temp/header');\r\n                $this->load->view('marksheet', $data);\r\n                $this->load->view('temp/footer');\r\n            } else {\r\n                echo lang('exac_16');\r\n            }\r\n        } else {\r\n            $data['Choir'] = $this->common->getAllData('Choir');\r\n            $this->load->view('temp/header');\r\n            $this->load->view('selectChoirMarksheet', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function will called by ajax from view for load class markshit\r\n    public function ajaxChoirMarkshit() {\r\n        $Choir_id = $this->input->get('q');\r\n        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n        foreach ($query as $row) {\r\n            $data[] = $row;\r\n        }\r\n        if (!empty($data)) {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n            foreach ($data as $sec) {\r\n                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                        </div>';\r\n            $Choir_member = $this->common->getWhere('Choir_Choir_members', 'Choir_id', $Choir_id);\r\n            if (!empty($Choir_member)) {\r\n                echo '<div class=\"form-group\">\r\n                            <label class=\"col-md-3 control-label\">' . lang('exac_17') . ' <span class=\"requiredStar\"> * </span></label>\r\n                            <div class=\"col-md-6\">\r\n                                <select name=\"Choir_memberId\" class=\"form-control\">';\r\n                foreach ($Choir_member as $stu) {\r\n                    echo '<option value=\"' . $stu['Choir_member_id'] . '\">' . $stu['Choir_member_title'] . '</option>';\r\n                }\r\n                echo '</select></div>\r\n                    <input type=\"hidden\" name=\"Choir_memberTitle\" value=\"' . $stu['Choir_member_title'] . '\">\r\n                            </div>';\r\n            } else {\r\n                echo '<div class=\"form-group\">\r\n                            <label class=\"col-md-3 control-label\"></label>\r\n                            <div class=\"col-md-6\">\r\n                            <div class=\"alert alert-warning\">\r\n                                    <strong>' . lang('exac_info') . '</strong> ' . lang('exac_9') . '\r\n                            </div></div></div>';\r\n            }\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n                        </div></div></div>';\r\n        }\r\n    }\r\n    //This function will select Choir_member's own marksheet\r\n    public function sel_ow_ma() {\r\n        if ($this->input->post('submit', TRUE)) {\r\n            if ($this->input->post('rehearsalId', TRUE)) {\r\n                $Choir_id = $this->input->post('Choir_id', TRUE);\r\n                $rehearsalId = $this->input->post('rehearsalId', TRUE);\r\n                $user = $this->ion_auth->user()->row();\r\n                $userId = $user->id;\r\n                $Choir_memberId = $this->rehearsalmodel->Choir_member_id($userId);\r\n                $data['markshit'] = $this->rehearsalmodel->markshit($rehearsalId, $Choir_id, $Choir_memberId);\r\n                $data['rehearsalTitle'] = $this->rehearsalmodel->rehearsalTitle($rehearsalId);\r\n                $data['Choir_memberId'] = $Choir_memberId;\r\n                $data['Choir_memberName'] = $this->input->post('Choir_memberTitle', TRUE);\r\n                $this->load->view('temp/header');\r\n                $this->load->view('ow_marksheet', $data);\r\n                $this->load->view('temp/footer');\r\n            } else {\r\n                echo lang('exac_16');\r\n            }\r\n        } else {\r\n            $data['Choir'] = $this->common->getAllData('Choir');\r\n            $this->load->view('temp/header');\r\n            $this->load->view('sel_ow_ma', $data);\r\n            $this->load->view('temp/footer');\r\n        }\r\n    }\r\n    //This function will called by ajax from view for load class markshit\r\n    public function ajax_ow_ma() {\r\n        $Choir_id = $this->input->get('q');\r\n        $query = $this->rehearsalmodel->rehearsalTitleForMarkshit($Choir_id);\r\n        foreach ($query as $row) {\r\n            $data[] = $row;\r\n        }\r\n        if (!empty($data)) {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\">' . lang('exac_4') . ' <span class=\"requiredStar\"> * </span></label>\r\n                        <div class=\"col-md-6\">\r\n                            <select name=\"rehearsalId\" class=\"form-control\">';\r\n            foreach ($data as $sec) {\r\n                echo '<option value=\"' . $sec['id'] . '\">' . $sec['rehearsal_title'] . '</option>';\r\n            }\r\n            echo '</select></div>\r\n                        </div>';\r\n        } else {\r\n            echo '<div class=\"form-group\">\r\n                        <label class=\"col-md-3 control-label\"></label>\r\n                        <div class=\"col-md-6\">\r\n                        <div class=\"alert alert-warning\">\r\n                                <strong>' . lang('exac_info') . '</strong> ' . lang('exac_18') . '\r\n                        </div></div></div>';\r\n        }\r\n    }\r\n}\r\n"
        }
    ]
}